<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Structures – Analysing Quantitative Data with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-exploratory_analysis.html" rel="next">
<link href="./02-basics.html" rel="prev">
<link href="./images/Crest_white.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e2851886d12d134ff83effd9cfa02285.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="theme-color" content="#1d1f2b" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#1d1f2b" media="(prefers-color-scheme: light)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<script>
// This MUST come before the script src above
window.MathJax = {
  tex: {
    // (Quarto already sets these, but harmless to repeat)
    inlineMath: [['\\(', '\\)'], ['$', '$']],
    displayMath: [['\\[', '\\]'], ['$$', '$$']]
  },
  // Tell the CHTML output to use Fira
  chtml: { font: 'mathjax-fira' }
};
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-chtml-nofont.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/Crest_white.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"><span class="title-long">Analysing Quantitative Data with R</span> <span class="title-short">AQDR</span></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://drflolinke.github.io/"> 
<span class="menu-text">Flo’s Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-introduction.html">THE BASICS</a></li><li class="breadcrumb-item"><a href="./03-data_structures.html"><span class="chapter-title">Data Structures</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">THE BASICS</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Basics of R Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-data_structures.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Data Structures</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">ADVANCED DATA MANIPULATION</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-exploratory_analysis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Exploratory Data Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-key_programming_concepts.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Key Programming Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-dplyr_data_manipulation.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Manipulation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">DATA ANLYSIS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-data_visualization.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-statistical_association.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Statistical Inference and Association</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">FURTHER TOPICS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-ols.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-logit.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Quarto.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Quarto</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">DOCUMENTS</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-downloads.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Downloads</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#datastructures" id="toc-datastructures" class="nav-link active" data-scroll-target="#datastructures">Introduction</a>
  <ul class="collapse">
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data Frames</a></li>
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors">Factors</a></li>
  <li><a href="#reading-and-writing-the-data" id="toc-reading-and-writing-the-data" class="nav-link" data-scroll-target="#reading-and-writing-the-data">Reading and writing the data</a>
  <ul class="collapse">
  <li><a href="#reading-from-csv" id="toc-reading-from-csv" class="nav-link" data-scroll-target="#reading-from-csv">Reading from CSV</a></li>
  <li><a href="#reading-from-other-formats" id="toc-reading-from-other-formats" class="nav-link" data-scroll-target="#reading-from-other-formats">Reading from other formats</a></li>
  </ul></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">Lists</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-introduction.html">THE BASICS</a></li><li class="breadcrumb-item"><a href="./03-data_structures.html"><span class="chapter-title">Data Structures</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Data Structures</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="datastructures" class="level1 unnumbered">
<h1 class="unnumbered">Introduction</h1>
<p>In the previous chapter you have become familiar with the most common data structure in R programming - a vector. In this section, you will be introduced to some more advanced data structures that are often used in R, in particular the <code>data.frame</code>, which is the most common way of storing and manipulating data in R.</p>
<p>Generally, the best way to examine any R object is using the <code>str()</code> function, which returns contents of the object along with its class. For example you can check how it works for simple vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">8</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:3] 5 3 8</code></pre>
</div>
</div>
<p><code>num</code> indicates that it is an integer vector and <code>[1:3]</code> tells us that its index ranges from 1 to 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"five"</span>,<span class="st">"three"</span>,<span class="st">"eight"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:3] "five" "three" "eight"</code></pre>
</div>
</div>
<section id="data-frames" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="data-frames">Data Frames</h2>
<p>In the previous chapter’s exercises you’ve manipulated data related to some basic development indicators of several countries. When we’re dealing with multiple variables represented by multiple vectors, it’s often very useful to store them toegether as one entity - a <code>data.frame</code>. Data frames can simply be thought of as tables, where each of the columns is a vector with its unique name. In this case, we can store the information about countries in a data frame called <code>dev_data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>country <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Georgia"</span>, <span class="st">"Mexico"</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Philippines"</span>, <span class="st">"Turkey"</span>, <span class="st">"Ukraine"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>eys <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">17.6</span>, <span class="fl">15.4</span>, <span class="fl">14.3</span>, <span class="fl">12.7</span>, <span class="fl">16.4</span>, <span class="fl">15.1</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>mys <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">10.6</span>, <span class="fl">12.8</span>, <span class="fl">8.6</span>, <span class="fl">9.4</span>, <span class="fl">7.7</span>, <span class="fl">11.3</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>lexp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">76.5</span>, <span class="fl">73.6</span>, <span class="dv">75</span>, <span class="fl">71.1</span>, <span class="fl">77.4</span>, <span class="dv">72</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>gni <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">17611</span>, <span class="dv">9570</span>, <span class="dv">17628</span>, <span class="dv">9540</span>, <span class="dv">24905</span>, <span class="dv">7994</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>dev_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(country, eys, mys, lexp, gni)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can use the <code>head</code> function to see the first 5 rows of the data (in the toy example we have above it might seem unnecessary, but it is useful to get an overview of all the variables when the data consists of potentially thousands of rows).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dev_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country  eys  mys lexp   gni
1   Argentina 17.6 10.6 76.5 17611
2     Georgia 15.4 12.8 73.6  9570
3      Mexico 14.3  8.6 75.0 17628
4 Philippines 12.7  9.4 71.1  9540
5      Turkey 16.4  7.7 77.4 24905
6     Ukraine 15.1 11.3 72.0  7994</code></pre>
</div>
</div>
<p>The <code>str()</code> function is also very useful to get an overview of the variables included in a dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dev_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  5 variables:
 $ country: chr  "Argentina" "Georgia" "Mexico" "Philippines" ...
 $ eys    : num  17.6 15.4 14.3 12.7 16.4 15.1
 $ mys    : num  10.6 12.8 8.6 9.4 7.7 11.3
 $ lexp   : num  76.5 73.6 75 71.1 77.4 72
 $ gni    : num  17611 9570 17628 9540 24905 ...</code></pre>
</div>
</div>
<p>To access a column stored in a dataframe, you can use the <code>$</code> operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>gni</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17611  9570 17628  9540 24905  7994</code></pre>
</div>
</div>
<p>Similarily, we can use the same operator to create a new column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>log_gni <span class="ot">&lt;-</span> <span class="fu">log</span>(dev_data<span class="sc">$</span>gni)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>log_gni</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  9.776279  9.166388  9.777244  9.163249 10.122824  8.986447</code></pre>
</div>
</div>
<p>As in the case of vectors, data frames can be indexed to retrieve values stored at specific positions. Since data frame is a table, each position in a dataframe is associated with <em>two</em> indices - one for rows, the other for columns - the first index references the row and the second the column. For example, the code below retrieves the value from the second row from the third column of <code>dev_data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dev_data[<span class="dv">2</span>, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.8</code></pre>
</div>
</div>
<p>Note that this is identical to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>mys[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.8</code></pre>
</div>
</div>
<p>This is because the <code>mys</code> is the third column in <code>dev_data</code>.</p>
<p>By leaving one of the indices empty, we can also retrieve entire row/column of a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dev_data[<span class="dv">1</span>, ] <span class="co">#get first row</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country  eys  mys lexp   gni  log_gni
1 Argentina 17.6 10.6 76.5 17611 9.776279</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dev_data[, <span class="dv">2</span>] <span class="co">#get second column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17.6 15.4 14.3 12.7 16.4 15.1</code></pre>
</div>
</div>
<p>Data frames can also be indexed with integer vectors. Such indexing will always return a smaller data frame. For example, to retrieve rows 1 and 5 from columns 2 and 3, we can do:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dev_data[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   eys  mys
1 17.6 10.6
5 16.4  7.7</code></pre>
</div>
</div>
<p>Similarily, character vectors referencing the column names can be used to subset a dataframe. To achieve similar result to the one above, one could also type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>dev_data[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="st">"eys"</span>,<span class="st">"mys"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   eys  mys
1 17.6 10.6
5 16.4  7.7</code></pre>
</div>
</div>
<p>We can also use logical indexing to subset dataframes. Recall from the previous chapter, that we can check which values of a given vector satisfy a certain condition by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>gni <span class="sc">&gt;</span> <span class="dv">10000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>We can then use the output generated by the above code to index the <code>dev_data</code> data frame and obtain the rows with gni per capita larger than 10000:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>dev_data[dev_data<span class="sc">$</span>gni <span class="sc">&gt;</span> <span class="dv">10000</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country  eys  mys lexp   gni   log_gni
1 Argentina 17.6 10.6 76.5 17611  9.776279
3    Mexico 14.3  8.6 75.0 17628  9.777244
5    Turkey 16.4  7.7 77.4 24905 10.122824</code></pre>
</div>
</div>
<p>There are many useful functions that work in combination with data frames. Below, there are several examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(dev_data) <span class="co">#check if an object is of class `data.frame`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(dev_data) <span class="co">#number of rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(dev_data) <span class="co">#number of columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dev_data) <span class="co">#column names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country" "eys"     "mys"     "lexp"    "gni"     "log_gni"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(dev_data) <span class="co">#row names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2" "3" "4" "5" "6"</code></pre>
</div>
</div>
<p>The <code>with</code> command allows to evaluate column names <em>in the context of a given data frame</em>. This means, that we do not have to reference the data frame name whenever we use one of its columns. Suppose we wanted to calculate the UN’s <em>Education Index</em> as in the previous section’s exercises and assign it’s values to a new column in <code>dev_data</code>, <code>dev_data$edu_ind</code>. This could be done by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>edu_ind <span class="ot">&lt;-</span> (dev_data<span class="sc">$</span>mys <span class="sc">/</span> <span class="dv">15</span> <span class="sc">+</span> dev_data<span class="sc">$</span>eys <span class="sc">/</span> <span class="dv">18</span>)<span class="sc">/</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, in many circumstances this will require you to reference the name of the data frame you are using multiple times, often making the code long and unreadable. To avoid it, it’s often useful to do:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>dev_data<span class="sc">$</span>edu_ind <span class="ot">&lt;-</span> <span class="fu">with</span>(dev_data, (mys <span class="sc">/</span> <span class="dv">15</span> <span class="sc">+</span> eys <span class="sc">/</span> <span class="dv">18</span>)<span class="sc">/</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>with</code> function takes name of the dataframe as its first argument and the operation you want to perform as the second argument.</p>
<p>Similarily, to subset a dataframe by multiple variables, the <code>subset()</code> command can be used:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dev_data[dev_data<span class="sc">$</span>eys <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> dev_data<span class="sc">$</span>lexp <span class="sc">&gt;</span> <span class="dv">75</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country  eys  mys lexp   gni   log_gni   edu_ind
1 Argentina 17.6 10.6 76.5 17611  9.776279 0.8422222
5    Turkey 16.4  7.7 77.4 24905 10.122824 0.7122222</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(dev_data, eys <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> lexp <span class="sc">&gt;</span> <span class="dv">75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country  eys  mys lexp   gni   log_gni   edu_ind
1 Argentina 17.6 10.6 76.5 17611  9.776279 0.8422222
5    Turkey 16.4  7.7 77.4 24905 10.122824 0.7122222</code></pre>
</div>
</div>
</section>
<section id="factors" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="factors">Factors</h2>
<p>When looking at the <code>str(dev_data)</code> you could’ve noticed that the <code>country</code> variable is a vector type that we haven’t encountered earlier - a <em>factor</em>. Factors are a specific type of vectors used to store values that take a <em>prespecified</em> set of values, called factor levels. For example, suppose we have two character vectors storing names of students and their year. We can use <code>factor()</code> to create a factor vector from a character vector. This can be done for any other type of vector as well.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Thomas"</span>,<span class="st">"James"</span>,<span class="st">"Kate"</span>,<span class="st">"Nina"</span>,<span class="st">"Robert"</span>,<span class="st">"Andrew"</span>,<span class="st">"John"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>year_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Freshman"</span>,<span class="st">"Junior"</span>,<span class="st">"Sophmore"</span>,<span class="st">"Freshman"</span>,<span class="st">"Senior"</span>,<span class="st">"Junior"</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>year_ch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Freshman" "Freshman" "Junior"   "Sophmore" "Freshman" "Senior"   "Junior"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(year_ch)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Freshman Freshman Junior   Sophmore Freshman Senior   Junior  
Levels: Freshman Junior Senior Sophmore</code></pre>
</div>
</div>
<p>We can view the unique levels of the factor using the <code>levels()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Freshman" "Junior"   "Senior"   "Sophmore"</code></pre>
</div>
</div>
<p>A crucial difference between factor and character vectors is that the former have an underlying integer representation. That means, that there’s a natural ordering to their levels, which is alphabetic by default. We can see that using the <a href="02-basics.html#coercion">coercion function</a> <code>as.numeric</code> on the <code>year</code> factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Freshman Freshman Junior   Sophmore Freshman Senior   Junior  
Levels: Freshman Junior Senior Sophmore</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 2 4 1 3 2</code></pre>
</div>
</div>
<p>Note that the ordering of the values corresponds with the ordering obtained by the <code>levels()</code> function. This matters in some circumstances (such as when using factor variables in regression models, discussed in the <a href="09-ols.html#ols">Linear Regression</a> section of the course). It’s a good practice to explicitly pass the factor levels to the <code>factor()</code> constructor. For example, in our case, “Sophmore” comes as the last value of the factor, even though it would make more sense for it to be second. Explicit creation of the factor levels can be seen below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>year_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Freshman"</span>,<span class="st">"Junior"</span>,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Sophmore"</span>,<span class="st">"Freshman"</span>,<span class="st">"Senior"</span>,<span class="st">"Junior"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(year_ch, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Sophmore"</span>,<span class="st">"Junior"</span>,<span class="st">"Senior"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now see that the ordering of the levels is different, and so is the underlying numeric representation of the factor:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Freshman" "Sophmore" "Junior"   "Senior"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 3 2 1 4 3</code></pre>
</div>
</div>
<p>Note that we cannot change the value of a factor vector to any other than the pre-specified levels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>year[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Graduate"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The error message returned by R means that the value we were trying to assign to the factor is not one of the predefined levels (i.e.&nbsp;“Freshman”,“Junior”, “Senior” and “Sophmore”) and thus <code>NA</code> missing value was generated.</p>
<p>However, if we know that a level that has no values attached to it will be created in the future, <code>NA</code>s can be avoided by explicitly creating an unused levels when constructing the factor vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>year_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Freshman"</span>,<span class="st">"Junior"</span>,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Sophmore"</span>,<span class="st">"Freshman"</span>,<span class="st">"Senior"</span>,<span class="st">"Junior"</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(year_ch, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Sophmore"</span>,<span class="st">"Junior"</span>,<span class="st">"Senior"</span>, <span class="st">"Graduate"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, we have created the variable with 5 levels: Freshman, Sophmore, Junior, Senior, Graduate, even though only 4 of them are actual values of the factor. As a result, we can assign a value with the “Graduate” value without producing <code>NA</code>s. The relevance of having empty factor levels will become apparent in the next part of the book when discussing <a href="04-exploratory_analysis.html#cross-tabulation">Cross-Tabulation</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>year[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Graduate"</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Graduate Freshman Junior   Sophmore Freshman Senior   Junior  
Levels: Freshman Sophmore Junior Senior Graduate</code></pre>
</div>
</div>
<p>We can also rename the levels of an existing factor, by using the <code>levels&lt;-</code> command. This can be done either to specific levels of a factor…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(year_ch, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Sophmore"</span>,<span class="st">"Junior"</span>,<span class="st">"Senior"</span>))</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(year)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Fresher"</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Fresher  Fresher  Junior   Sophmore Fresher  Senior   Junior  
Levels: Fresher Sophmore Junior Senior</code></pre>
</div>
</div>
<p>…or to all the levels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(year) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"First"</span>,<span class="st">"Second"</span>,<span class="st">"Third"</span>,<span class="st">"Final"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] First  First  Third  Second First  Final  Third 
Levels: First Second Third Final</code></pre>
</div>
</div>
<p>This way, all the values of the character are changed very quickly.</p>
<p>Finally, there’s some confusion about the difference between <code>factor()</code> and <code>as.factor()</code> functions. In many contexts, these can be used equivalently, since both create a factor vector from a numeric or a character vector. However, some important differences include:</p>
<ol type="1">
<li><p><code>factor()</code> allows to explicitly pass vector levels at construction, whether <code>as.factor()</code> assigns them by default</p></li>
<li><p>The behaviour of the two functions is different when passed factors with empty levels. For example, let’s create the <code>year</code> factor as earlier and only keep the first three values. In this case, the <em>Sophmore</em> and <em>Senior</em> levels are unused.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>year_char <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Freshman"</span>,<span class="st">"Junior"</span>,</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Sophmore"</span>,<span class="st">"Freshman"</span>,<span class="st">"Senior"</span>,<span class="st">"Junior"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">factor</span>(year_char, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Freshman"</span>,<span class="st">"Sophmore"</span>,<span class="st">"Junior"</span>,<span class="st">"Senior"</span>))</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> year[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Freshman Freshman Junior  
Levels: Freshman Sophmore Junior Senior</code></pre>
</div>
</div>
<p>Passing the <code>year</code> vector to <code>as.factor</code> will not change anything in the vector’s structure:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Freshman Freshman Junior  
Levels: Freshman Sophmore Junior Senior</code></pre>
</div>
</div>
<p>However, using <code>factor()</code> constructor on an existing factor vector is a convenient way to drop unused levels (when it’s desirable):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Freshman Freshman Junior  
Levels: Freshman Junior</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>The performance of <code>as.factor()</code> tends to be quicker when numeric or character vectors are passed to it. The two commands also treat <code>NA</code> levels slightly differently. You can read more about it in this <a href="https://stackoverflow.com/questions/39279238/why-use-as-factor-instead-of-just-factor?answertab=oldest#tab-top">Stack Overflow post</a>.</li>
</ol>
<p>Finally, some R functions such as the <code>data.frame</code> constructor treat all read all character vectors as factors by default. This can be noticed by examining the <code>dev_data</code> data frame we created earlier:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dev_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  7 variables:
 $ country: chr  "Argentina" "Georgia" "Mexico" "Philippines" ...
 $ eys    : num  17.6 15.4 14.3 12.7 16.4 15.1
 $ mys    : num  10.6 12.8 8.6 9.4 7.7 11.3
 $ lexp   : num  76.5 73.6 75 71.1 77.4 72
 $ gni    : num  17611 9570 17628 9540 24905 ...
 $ log_gni: num  9.78 9.17 9.78 9.16 10.12 ...
 $ edu_ind: num  0.842 0.854 0.684 0.666 0.712 ...</code></pre>
</div>
</div>
<p>As you can see <code>country</code> is a factor with 6 levels - each for one country name. This doesn’t make too much sense, as the column is unlikely to have any repeating values. To avoid this behaviour, we can set the <code>stringsAsFactors</code> optional argument in the <code>data.frame</code> function explicitly to <code>FALSE</code>. This way, all the character vectors remain character variables in the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>dev_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(country, eys, mys, lexp, gni, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dev_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  5 variables:
 $ country: chr  "Argentina" "Georgia" "Mexico" "Philippines" ...
 $ eys    : num  17.6 15.4 14.3 12.7 16.4 15.1
 $ mys    : num  10.6 12.8 8.6 9.4 7.7 11.3
 $ lexp   : num  76.5 73.6 75 71.1 77.4 72
 $ gni    : num  17611 9570 17628 9540 24905 ...</code></pre>
</div>
</div>
</section>
<section id="reading-and-writing-the-data" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="reading-and-writing-the-data">Reading and writing the data</h2>
<section id="reading-from-csv" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="reading-from-csv">Reading from CSV</h3>
<p>While so far, we’ve created small and simple datasets by manually typing them into the scripts, the usual way of loading data into R is through external files. The most common format used to store data for R analysis is a CSV file, which stands for Comma Separated Values. This essentially means, that the data is represented as a text file, in which values are separeted by columns to indicate their relative positions - for example, a csv file with 5 columns will have 4 commas to separate them in each row.</p>
<p>In the example below, we read in data on Human Development Indicators for 209 countries for 2018 obtained from the <a href="http://hdr.undp.org/en/data">UN Human Development Reports</a>. Yuo can download the file used in the example from <a href="data:text/csv;base64,Y291bnRyeSxleXMsZ25pLGxleHAsbXlzCkFmZ2hhbmlzdGFuLDEwLjEsMTc0Niw2NC41LDMuOQpBbGJhbmlhLDE1LjIsMTIzMDAsNzguNSwxMC4xCkFsZ2VyaWEsMTQuNywxMzYzOSw3Ni43LDgKQW5kb3JyYSwxMy4zLDQ4NjQxLDgxLjgsMTAuMgpBbmdvbGEsMTEuOCw1NTU1LDYwLjgsNS4xCkFudGlndWEgYW5kIEJhcmJ1ZGEsMTIuNSwyMjIwMSw3Ni45LDkuMwpBcmdlbnRpbmEsMTcuNiwxNzYxMSw3Ni41LDEwLjYKQXJtZW5pYSwxMy4yLDkyNzcsNzQuOSwxMS44CkF1c3RyYWxpYSwyMi4xLDQ0MDk3LDgzLjMsMTIuNwpBdXN0cmlhLDE2LjMsNDYyMzEsODEuNCwxMi42CkF6ZXJiYWlqYW4sMTIuNCwxNTI0MCw3Mi45LDEwLjUKQmFoYW1hcywxMi44LDI4Mzk1LDczLjgsMTEuNQpCYWhyYWluLDE1LjMsNDAzOTksNzcuMiw5LjQKQmFuZ2xhZGVzaCwxMS4yLDQwNTcsNzIuMyw2LjEKQmFyYmFkb3MsMTUuMiwxNTkxMiw3OS4xLDEwLjYKQmVsYXJ1cywxNS40LDE3MDM5LDc0LjYsMTIuMwpCZWxnaXVtLDE5LjcsNDM4MjEsODEuNSwxMS44CkJlbGl6ZSwxMy4xLDcxMzYsNzQuNSw5LjgKQmVuaW4sMTIuNiwyMTM1LDYxLjUsMy44CkJodXRhbiwxMi4xLDg2MDksNzEuNSwzLjEKQm9saXZpYSAoUGx1cmluYXRpb25hbCBTdGF0ZSBvZiksMTQsNjg0OSw3MS4yLDkKQm9zbmlhIGFuZCBIZXJ6ZWdvdmluYSwxMy44LDEyNjkwLDc3LjMsOS43CkJvdHN3YW5hLDEyLjcsMTU5NTEsNjkuMyw5LjMKQnJhemlsLDE1LjQsMTQwNjgsNzUuNyw3LjgKQnJ1bmVpIERhcnVzc2FsYW0sMTQuNCw3NjM4OSw3NS43LDkuMQpCdWxnYXJpYSwxNC44LDE5NjQ2LDc0LjksMTEuOApCdXJraW5hIEZhc28sOC45LDE3MDUsNjEuMiwxLjYKQnVydW5kaSwxMS4zLDY2MCw2MS4yLDMuMQpDYWJvIFZlcmRlLDExLjksNjUxMyw3Mi44LDYuMgpDYW1ib2RpYSwxMS4zLDM1OTcsNjkuNiw0LjgKQ2FtZXJvb24sMTIuNywzMjkxLDU4LjksNi4zCkNhbmFkYSwxNi4xLDQzNjAyLDgyLjMsMTMuMwpDZW50cmFsIEFmcmljYW4gUmVwdWJsaWMsNy42LDc3Nyw1Mi44LDQuMwpDaGFkLDcuNSwxNzE2LDU0LDIuNApDaGlsZSwxNi41LDIxOTcyLDgwLDEwLjQKQ2hpbmEsMTMuOSwxNjEyNyw3Ni43LDcuOQpDb2xvbWJpYSwxNC42LDEyODk2LDc3LjEsOC4zCkNvbW9yb3MsMTEuMiwyNDI2LDY0LjEsNC45CkNvbmdvLDExLjYsNTgwNCw2NC4zLDYuNQpDb25nbyAoRGVtb2NyYXRpYyBSZXB1YmxpYyBvZiB0aGUpLDkuNyw4MDAsNjAuNCw2LjgKQ29zdGEgUmljYSwxNS40LDE0NzkwLDgwLjEsOC43CkNyb2F0aWEsMTUsMjMwNjEsNzguMywxMS40CkN1YmEsMTQuNCw3ODExLDc4LjcsMTEuOApDeXBydXMsMTQuNywzMzEwMCw4MC44LDEyLjEKQ3plY2hpYSwxNi44LDMxNTk3LDc5LjIsMTIuNwpDw7R0ZSBkJ0l2b2lyZSw5LjYsMzU4OSw1Ny40LDUuMgpEZW5tYXJrLDE5LjEsNDg4MzYsODAuOCwxMi42CkRqaWJvdXRpLDYuNSwzNjAxLDY2LjYsNApEb21pbmljYSwxMyw5MjQ1LDc4LjEsNy44CkRvbWluaWNhbiBSZXB1YmxpYywxNC4xLDE1MDc0LDczLjksNy45CkVjdWFkb3IsMTQuOSwxMDE0MSw3Ni44LDkKRWd5cHQsMTMuMSwxMDc0NCw3MS44LDcuMwpFbCBTYWx2YWRvciwxMiw2OTczLDczLjEsNi45CkVxdWF0b3JpYWwgR3VpbmVhLDkuMiwxNzc5Niw1OC40LDUuNgpFcml0cmVhLDUsMTcwOCw2NS45LDMuOQpFc3RvbmlhLDE2LjEsMzAzNzksNzguNiwxMwpFc3dhdGluaSAoS2luZ2RvbSBvZiksMTEuNCw5MzU5LDU5LjQsNi43CkV0aGlvcGlhLDguNywxNzgyLDY2LjIsMi44CkZpamksMTQuNCw5MTEwLDY3LjMsMTAuOQpGaW5sYW5kLDE5LjMsNDE3NzksODEuNywxMi40CkZyYW5jZSwxNS41LDQwNTExLDgyLjUsMTEuNApHYWJvbiwxMi45LDE1Nzk0LDY2LjIsOC4zCkdhbWJpYSw5LjUsMTQ5MCw2MS43LDMuNwpHZW9yZ2lhLDE1LjQsOTU3MCw3My42LDEyLjgKR2VybWFueSwxNy4xLDQ2OTQ2LDgxLjIsMTQuMQpHaGFuYSwxMS41LDQwOTksNjMuOCw3LjIKR3JlZWNlLDE3LjMsMjQ5MDksODIuMSwxMC41CkdyZW5hZGEsMTYuNiwxMjY4NCw3Mi40LDguOApHdWF0ZW1hbGEsMTAuNiw3Mzc4LDc0LjEsNi41Ckd1aW5lYSw5LDIyMTEsNjEuMiwyLjcKR3VpbmVhLUJpc3NhdSwxMC41LDE1OTMsNTgsMy4zCkd1eWFuYSwxMS41LDc2MTUsNjkuOCw4LjUKSGFpdGksOS41LDE2NjUsNjMuNyw1LjQKSG9uZHVyYXMsMTAuMiw0MjU4LDc1LjEsNi42CiJIb25nIEtvbmcsIENoaW5hIChTQVIpIiwxNi41LDYwMjIxLDg0LjcsMTIKSHVuZ2FyeSwxNS4xLDI3MTQ0LDc2LjcsMTEuOQpJY2VsYW5kLDE5LjIsNDc1NjYsODIuOSwxMi41CkluZGlhLDEyLjMsNjgyOSw2OS40LDYuNQpJbmRvbmVzaWEsMTIuOSwxMTI1Niw3MS41LDgKSXJhbiAoSXNsYW1pYyBSZXB1YmxpYyBvZiksMTQuNywxODE2Niw3Ni41LDEwCklyYXEsMTEuMSwxNTM2NSw3MC41LDcuMwpJcmVsYW5kLDE4LjgsNTU2NjAsODIuMSwxMi41CklzcmFlbCwxNiwzMzY1MCw4Mi44LDEzCkl0YWx5LDE2LjIsMzYxNDEsODMuNCwxMC4yCkphbWFpY2EsMTMuMSw3OTMyLDc0LjQsOS44CkphcGFuLDE1LjIsNDA3OTksODQuNSwxMi44CkpvcmRhbiwxMS45LDgyNjgsNzQuNCwxMC41CkthemFraHN0YW4sMTUuMywyMjE2OCw3My4yLDExLjgKS2VueWEsMTEuMSwzMDUyLDY2LjMsNi42CktpcmliYXRpLDExLjgsMzkxNyw2OC4xLDcuOQpLb3JlYSAoRGVtb2NyYXRpYyBQZW9wbGUncyBSZXAuIG9mKSwxMC44LE5BLDcyLjEsTkEKS29yZWEgKFJlcHVibGljIG9mKSwxNi40LDM2NzU3LDgyLjgsMTIuMgpLdXdhaXQsMTMuOCw3MTE2NCw3NS40LDcuMwpLeXJneXpzdGFuLDEzLjQsMzMxNyw3MS4zLDEwLjkKTGFvIFBlb3BsZSdzIERlbW9jcmF0aWMgUmVwdWJsaWMsMTEuMSw2MzE3LDY3LjYsNS4yCkxhdHZpYSwxNiwyNjMwMSw3NS4yLDEyLjgKTGViYW5vbiwxMS4zLDExMTM2LDc4LjksOC43Ckxlc290aG8sMTAuNywzMjQ0LDUzLjcsNi4zCkxpYmVyaWEsOS42LDEwNDAsNjMuNyw0LjcKTGlieWEsMTIuOCwxMTY4NSw3Mi43LDcuNgpMaWVjaHRlbnN0ZWluLDE0LjcsOTk3MzIsODAuNSwxMi41CkxpdGh1YW5pYSwxNi41LDI5Nzc1LDc1LjcsMTMKTHV4ZW1ib3VyZywxNC4yLDY1NTQzLDgyLjEsMTIuMgpNYWRhZ2FzY2FyLDEwLjQsMTQwNCw2Ni43LDYuMQpNYWxhd2ksMTEsMTE1OSw2My44LDQuNgpNYWxheXNpYSwxMy41LDI3MjI3LDc2LDEwLjIKTWFsZGl2ZXMsMTIuMSwxMjU0OSw3OC42LDYuOApNYWxpLDcuNiwxOTY1LDU4LjksMi40Ck1hbHRhLDE1LjksMzQ3OTUsODIuNCwxMS4zCk1hcnNoYWxsIElzbGFuZHMsMTIuNCw0NjMzLDczLjksMTAuOQpNYXVyaXRhbmlhLDguNSwzNzQ2LDY0LjcsNC42Ck1hdXJpdGl1cywxNSwyMjcyNCw3NC45LDkuNApNZXhpY28sMTQuMywxNzYyOCw3NSw4LjYKTWljcm9uZXNpYSAoRmVkZXJhdGVkIFN0YXRlcyBvZiksMTEuNSwzNzAwLDY3LjgsNy43Ck1vbGRvdmEgKFJlcHVibGljIG9mKSwxMS42LDY4MzMsNzEuOCwxMS42Ck1vbmdvbGlhLDE0LjIsMTA3ODQsNjkuNywxMC4yCk1vbnRlbmVncm8sMTUsMTc1MTEsNzYuOCwxMS40Ck1vcm9jY28sMTMuMSw3NDgwLDc2LjUsNS41Ck1vemFtYmlxdWUsOS43LDExNTQsNjAuMiwzLjUKTXlhbm1hciwxMC4zLDU3NjQsNjYuOSw1Ck5hbWliaWEsMTIuNiw5NjgzLDYzLjQsNi45Ck5hdXJ1LDExLjMsMTczMTMsTkEsTkEKTmVwYWwsMTIuMiwyNzQ4LDcwLjUsNC45Ck5ldGhlcmxhbmRzLDE4LDUwMDEzLDgyLjEsMTIuMgpOZXcgWmVhbGFuZCwxOC44LDM1MTA4LDgyLjEsMTIuNwpOaWNhcmFndWEsMTIuMiw0NzkwLDc0LjMsNi44Ck5pZ2VyLDYuNSw5MTIsNjIsMgpOaWdlcmlhLDkuNyw1MDg2LDU0LjMsNi41Ck5vcnRoIE1hY2Vkb25pYSwxMy41LDEyODc0LDc1LjcsOS43Ck5vcndheSwxOC4xLDY4MDU5LDgyLjMsMTIuNgpPbWFuLDE0LjcsMzcwMzksNzcuNiw5LjcKUGFraXN0YW4sOC41LDUxOTAsNjcuMSw1LjIKUGFsYXUsMTUuNiwxNjcyMCw3My43LDEyLjQKIlBhbGVzdGluZSwgU3RhdGUgb2YiLDEyLjgsNTMxNCw3My45LDkuMQpQYW5hbWEsMTIuOSwyMDQ1NSw3OC4zLDEwLjIKUGFwdWEgTmV3IEd1aW5lYSwxMCwzNjg2LDY0LjMsNC42ClBhcmFndWF5LDEyLjcsMTE3MjAsNzQuMSw4LjQKUGVydSwxMy44LDEyMzIzLDc2LjUsOS4yClBoaWxpcHBpbmVzLDEyLjcsOTU0MCw3MS4xLDkuNApQb2xhbmQsMTYuNCwyNzYyNiw3OC41LDEyLjMKUG9ydHVnYWwsMTYuMywyNzkzNSw4MS45LDkuMgpRYXRhciwxMi4yLDExMDQ4OSw4MC4xLDkuNwpSb21hbmlhLDE0LjMsMjM5MDYsNzUuOSwxMQpSdXNzaWFuIEZlZGVyYXRpb24sMTUuNSwyNTAzNiw3Mi40LDEyClJ3YW5kYSwxMS4yLDE5NTksNjguNyw0LjQKU2FpbnQgS2l0dHMgYW5kIE5ldmlzLDEzLjYsMjY3NzAsNzQuNiw4LjUKU2FpbnQgTHVjaWEsMTMuOSwxMTUyOCw3Ni4xLDguNQpTYWludCBWaW5jZW50IGFuZCB0aGUgR3JlbmFkaW5lcywxMy42LDExNzQ2LDcyLjQsOC42ClNhbW9hLDEyLjUsNTg4NSw3My4yLDEwLjYKU2FuIE1hcmlubywxNS4xLE5BLE5BLE5BClNhbyBUb21lIGFuZCBQcmluY2lwZSwxMi43LDMwMjQsNzAuMiw2LjQKU2F1ZGkgQXJhYmlhLDE3LDQ5MzM4LDc1LDkuNwpTZW5lZ2FsLDksMzI1Niw2Ny43LDMuMQpTZXJiaWEsMTQuOCwxNTIxOCw3NS44LDExLjIKU2V5Y2hlbGxlcywxNS41LDI1MDc3LDczLjMsOS43ClNpZXJyYSBMZW9uZSwxMC4yLDEzODEsNTQuMywzLjYKU2luZ2Fwb3JlLDE2LjMsODM3OTMsODMuNSwxMS41ClNsb3Zha2lhLDE0LjUsMzA2NzIsNzcuNCwxMi42ClNsb3ZlbmlhLDE3LjQsMzIxNDMsODEuMiwxMi4zClNvbG9tb24gSXNsYW5kcywxMC4yLDIwMjcsNzIuOCw1LjUKU291dGggQWZyaWNhLDEzLjcsMTE3NTYsNjMuOSwxMC4yClNvdXRoIFN1ZGFuLDUsMTQ1NSw1Ny42LDQuOApTcGFpbiwxNy45LDM1MDQxLDgzLjQsOS44ClNyaSBMYW5rYSwxNCwxMTYxMSw3Ni44LDExLjEKU3VkYW4sNy43LDM5NjIsNjUuMSwzLjcKU3VyaW5hbWUsMTIuOSwxMTkzMyw3MS42LDkuMQpTd2VkZW4sMTguOCw0Nzk1NSw4Mi43LDEyLjQKU3dpdHplcmxhbmQsMTYuMiw1OTM3NSw4My42LDEzLjQKU3lyaWFuIEFyYWIgUmVwdWJsaWMsOC44LDI3MjUsNzEuOCw1LjEKVGFqaWtpc3RhbiwxMS40LDM0ODIsNzAuOSwxMC43ClRhbnphbmlhIChVbml0ZWQgUmVwdWJsaWMgb2YpLDgsMjgwNSw2NSw2ClRoYWlsYW5kLDE0LjcsMTYxMjksNzYuOSw3LjcKVGltb3ItTGVzdGUsMTIuNCw3NTI3LDY5LjMsNC41ClRvZ28sMTIuNiwxNTkzLDYwLjgsNQpUb25nYSwxNC4zLDU3ODMsNzAuOCwxMS4yClRyaW5pZGFkIGFuZCBUb2JhZ28sMTMsMjg0OTcsNzMuNCwxMQpUdW5pc2lhLDE1LjEsMTA2NzcsNzYuNSw3LjIKVHVya2V5LDE2LjQsMjQ5MDUsNzcuNCw3LjcKVHVya21lbmlzdGFuLDEwLjksMTY0MDcsNjguMSw5LjgKVHV2YWx1LDEyLjMsNTQwOSxOQSxOQQpVZ2FuZGEsMTEuMiwxNzUyLDYzLDYuMQpVa3JhaW5lLDE1LjEsNzk5NCw3MiwxMS4zClVuaXRlZCBBcmFiIEVtaXJhdGVzLDEzLjYsNjY5MTIsNzcuOCwxMQpVbml0ZWQgS2luZ2RvbSwxNy40LDM5NTA3LDgxLjIsMTMKVW5pdGVkIFN0YXRlcywxNi4zLDU2MTQwLDc4LjksMTMuNApVcnVndWF5LDE2LjMsMTk0MzUsNzcuOCw4LjcKVXpiZWtpc3RhbiwxMiw2NDYyLDcxLjYsMTEuNQpWYW51YXR1LDExLjQsMjgwOCw3MC4zLDYuOApWZW5lenVlbGEgKEJvbGl2YXJpYW4gUmVwdWJsaWMgb2YpLDEyLjgsOTA3MCw3Mi4xLDEwLjMKVmlldCBOYW0sMTIuNyw2MjIwLDc1LjMsOC4yClllbWVuLDguNywxNDMzLDY2LjEsMy4yClphbWJpYSwxMi4xLDM1ODIsNjMuNSw3LjEKWmltYmFid2UsMTAuNSwyNjYxLDYxLjIsOC4zClN1Yi1TYWhhcmFuIEFmcmljYSwxMCwzNDQzLDYxLjIsNS43ClNvbWFsaWEsTkEsTkEsNTcuMSxOQQo=" download="dev2018.csv">here</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>dev <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/un_data/dev2018.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the above example, the first argument specifies the path to the file read as a <em>string</em>, i.e.&nbsp;enclosed in quotation marks. The file can be read: 1. using <em>absolute path</em> - for example <code>dev &lt;- read.csv("C:/Users/yourusername/Documents/dev2018.csv")</code> in Windows or <code>dev &lt;- read.csv("/Users/yourusername/Documents/dev2018.csv")</code> in MacOS. In this case, you need to provide the full path to where the file is located in the computer.</p>
<ol start="2" type="1">
<li>using <em>relative path</em>, as in the above example. In this case, R will search for the directory <em>in your current working directory</em>. <em>Working directory</em> is simply the specific folder in your computer in which R looks for the data. R Studio usually sets one default working directory (this can be changed under Tools -&gt; Global Options -&gt; Set Default Working Directory). This means that every time you open RStudio or restart your R session (as described in <a href="01-introduction.html#a-short-note-on-keeping-your-working-environment-clean">Chapter 1</a>, the working directory is set to this default. You can also change working directory <em>manually</em> by executing the <code>setwd()</code> function from your script or the console.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/yourusername/folder"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also get your current working directory by using the <code>getwd()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While some users tend to include <code>setwd(path/to/project)</code> in the beginnings of their scripts, this is potentially problematic, as whenever you move your data or script to another folder, errors are likely to occur. Therefore, it is a good practice to <em>always set working directory to the location of your R Source script</em> and keep the data in the same folder as your source script. This can be done by choosing the Session tab</p>
<p>Note that in this case, it is assumed that you have selected “Set Working Directory” &gt; “To Source File” location from the “Session” tab in Rstudio, as discussed in the <a href="#datastructures">Introduction</a> and that the directory of the source file has a folder called “data” in which the <code>dev2018.csv</code> file is stored. Alternatively, <code>dev &lt;- read.csv("dev2018.csv")</code> would read the file directly from your working directory. You could also use <code>dev &lt;- read.csv("C:/Users/yourusername/Documents/dev2018.csv")</code> in Windows or <code>dev &lt;- read.csv("/Users/yourusername/Documents/dev2018.csv")</code> in MacOS to read the data file from an arbitary folder using its absolute path. Similarily to the <code>data.frame</code> constructor, we can also use the <code>stringsAsFactors</code> argument to ensure all character variables are read as strings.</p>
<p>You can also save data to .csv files by using the <code>write.csv</code>, which takes the data frame as its first argument and the string specifying the path to which you want to save the file as the second argument. For example, suppose we want to keep only the first 40 rows of the data and store it in a separate file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>dev_new <span class="ot">&lt;-</span> dev[<span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>, ]</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dev_new, <span class="st">"data/un_data/dev_new.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reading-from-other-formats" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="reading-from-other-formats">Reading from other formats</h3>
<p>While csv is the most common format, the data is often likely to come in many other variants - common examples include Stata’s <code>.dta</code> files or SPSS’ <code>.sav</code>, as well as <code>.xlsx</code> Excel format. Some of the R packages offer functionalities percisely to deal with such files.</p>
<p>So far, we have only used the built-in functionalities offered by R. While their range is pretty extensive and the ones covered in this course are only the tip of the iceberg, much more than that is offered by user-made packages, which offer new functions useful for specific tasks. The official R packages are available through <a href="https://cran.r-project.org/">CRAN</a>. To use a package it needs to be installed first and then loaded. For example, to use an example package named <em>foo</em>, you should first run <code>install.packages("foo")</code> to download the package files from CRAN and install it and then put <code>library(foo)</code> in your R Script to load it into R. Note that while installation has to be done only once, you have to load the library every time you use it - that’s why, you should always put the <code>library</code> calls at the top of your R script. If you use a function from that package without loading it first, your R script execution will fail! Please also note, that you pass the package name as a <em>string</em> (i.e.&nbsp;in quotation marks) to the <code>install.packages</code>, but without them to <code>library</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"haven"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Coming back to our example, we can use the R package <code>haven</code> to load Stata, SPSS and SAS files. You can see an example below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>dev_stata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/un_data/dev2018.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Similarily, the data can be written using:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_dta</span>(dev, <span class="st">"data/un_data/dev2018.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Other alternatives offered by the <code>haven</code> package inlcude <code>read_sav</code> or <code>read_xpt</code>. Other packages useful for reading unusual data types include <code>readxl</code> for reading Excel files and <code>foreign</code> for a broader choice of file types.</p>
</section>
</section>
<section id="missing-values" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="missing-values">Missing values</h2>
<p>As mentioned earlier, the <code>NA</code> missing value constant is particularly important in R. Real-life data that you are likely to deal with most of the time when using R in practice is often imperfect and missingness should be addressed as one of the first steps of the analysis process.</p>
<p><code>is.na()</code> command can be used to determine whether a value of an R object is missing. It returns true for each value of the index which is missing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">6</span>, <span class="cn">NA</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<p>To count NAs in an R object we can levarage the fact that <code>TRUE</code> values are also interpreted as 1 and use the <code>sum</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(numbers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>You can also verify whether an object contains <code>NA</code>s using the <code>anyNA</code> function. Let’s check if the HDI data we have loaded contains any missing values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>dev <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/un_data/dev2018.csv"</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anyNA</span>(dev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>The column returns <code>TRUE</code>. Therefore there is some missingness in the data.</p>
<p>Another useful function for missing data analysis is <code>complete.cases</code>. As the name suggests, given a data frame it returns a logical vector with <code>TRUE</code> for each row which doesn’t contain missing values. We can verify which observations are the cause of the data missingness:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>dev[<span class="sc">!</span><span class="fu">complete.cases</span>(dev), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                country  eys   gni lexp mys
91  Korea (Democratic People's Rep. of) 10.8    NA 72.1  NA
122                               Nauru 11.3 17313   NA  NA
150                          San Marino 15.1    NA   NA  NA
180                              Tuvalu 12.3  5409   NA  NA
195                             Somalia   NA    NA 57.1  NA</code></pre>
</div>
</div>
</section>
<section id="lists" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="lists">Lists</h2>
<p>The final key R data structure covered in this section are lists. Similarily to data frames, lists can be thought of containers to store other data structures.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> However, unlike data frames, they are less strict in terms of their contents - a list can store vectors of different length, data frames and even other lists. Lists are created with the <code>list()</code> constructor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">"Tom"</span>,<span class="st">"James"</span>,<span class="st">"Tim"</span>), <span class="at">values =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>my_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$names
[1] "Tom"   "James" "Tim"  

$values
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
</div>
</div>
<p>You can extract elements from a list using their names or their numeric index. To index a list, <em>double square brackets</em> <code>[[</code> are used, as opposed to vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tom"   "James" "Tim"  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"names"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tom"   "James" "Tim"  </code></pre>
</div>
</div>
<p>If a list is indexed with single brackets, it returns a one-element list, rather than the object stored in it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> my_list[[<span class="st">"values"</span>]]</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> int [1:20] 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> my_list[<span class="st">"values"</span>]</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 1
 $ values: int [1:20] 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
</div>
</div>
<p>You can also extract elements from a list using the <code>$</code> operator, similarily to data.frames. Finally, you can assign values to lists similarily as in the case of vectors or data.frames:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>my_list[[<span class="st">"new"</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"new"</span>,<span class="st">"values"</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(my_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ names : chr [1:3] "Tom" "James" "Tim"
 $ values: int [1:20] 1 2 3 4 5 6 7 8 9 10 ...
 $ new   : chr [1:2] "new" "values"</code></pre>
</div>
</div>
</section>
</section>
<section id="summary" class="level1 unnumbered">
<h1 class="unnumbered">Summary</h1>
<ul>
<li><p><em>Data Frames</em> are one of the most common data structures in R. You can think about them as an Excel spreadsheet with tables with rows and columns or as a list of variables (vectors of equal length), each with its unique name. Each value in a data frame has two indexes - one for the row number and one for the column number. For example, <code>df[2,3]</code> retrieves the value in the second row from the third column.</p></li>
<li><p><em>Factors</em> are a special kind of vectors that can only take a pre-specified set of values, determined when the factor is created.</p></li>
<li><p><em>csv files</em> are the most common way of storing data in R. You can load the data from them using <code>read.csv</code> and save the data using <code>write.csv</code>.</p></li>
<li><p><em>working directory</em> is the folder in your computer where R looks for files by default. You can check it using the <code>getwd()</code> function, change it using <code>setwd()</code>or set it to the location where your current script is located by selecting <code>Session &gt; Set Working Directory &gt; To Source File Location</code>.</p></li>
<li><p><em>packages</em> are sets of new functions developed for R by external developers, extending its functionalities. You can install them using <code>install.packages</code> and load them using the <code>library</code> function.</p></li>
<li><p><em>missing values</em> are marked in R by the <code>NA</code> token. There are many useful functions created to detect missing values, such as <code>is.na</code>, <code>complete.cases</code> or <code>anyNA</code>.</p></li>
<li><p><em>lists</em> are another type of R data structure. They can be thought of as containers, which can be used to store arbitrary elements at each position.</p></li>
</ul>
</section>
<section id="exercises" class="level1 unnumbered">
<h1 class="unnumbered">Exercises</h1>
<ol type="1">
<li>The following code returns an error. Why? Check what happends if we set b to <code>1:5</code> instead of <code>1:3</code>. Explain this behaviour.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">b =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><p>What is the difference between character and factor vectors in R? In what situation you might prefer one over the other and vice versa?</p></li>
<li><p>To complete this exercise, load the <code>dev2018.csv</code> data into R.</p></li>
</ol>
<ol type="a">
<li><p>What proportion of the rows are complete?</p></li>
<li><p>Store all the non-missing rows in a data.frame called <code>dev_clean</code>.</p></li>
<li><p>For the <code>dev_clean</code>, compute the HDI following the method outlined in the previous chapter.</p></li>
<li><p>Use indexing to retrieve:</p></li>
</ol>
<ul>
<li>countries with HDI greater than 0.7 or GNI per capita greater than 10000</li>
<li>10 countries with the largest GNI</li>
<li>10 countries with shortest life expactancy at birth</li>
<li>the development data for Poland</li>
<li>countries with Education Index higher than Life Expectancy Index</li>
</ul>
<ol start="5" type="a">
<li>The UN categorizes the countries into 4 groups based on their HDI value - <em>very high human development</em> <span class="math inline">\(HDI \geq 0.8\)</span>, <em>high human development</em> <span class="math inline">\(0.8 &gt; HDI \geq 0.7\)</span>, <em>medium human development</em> <span class="math inline">\(0.7 &gt; HDI \geq 0.55\)</span> and <em>low human development</em> <span class="math inline">\(0.55 &gt; HDI\)</span>. Based on this thresholds, create a data frame called hdi_groups, with element names <code>"vhigh", "high", "med", "low"</code>, with each containing a dataframe only with observations corresponding to its respective HDI group. How many rows (as a fraction of total data.frame size) does each of these levels consist of?</li>
</ol>
<ol start="3" type="1">
<li>The following operation returns a warning error and the result is not quite as you would expect. Why? How would you replace the first element of the list with the <code>1:5</code> sequence so that the error doesn’t appear? Name the two ways this could be done.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">vals =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"Jane"</span>,<span class="st">"Kate"</span>))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>my_list[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>More specifically, the <code>data.frame</code> class is a special type of <code>list</code> - you can verify that by running the <code>typeof</code> function with a data frame as input.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".delayed-download");

    buttons.forEach(function (btn) {
      const releaseDate = new Date(btn.dataset.date);
      const now = new Date();

      if (now >= releaseDate) {
        btn.classList.remove("disabled");
        btn.setAttribute("aria-disabled", "false");
        btn.setAttribute("href", btn.dataset.path);
        btn.setAttribute("download", btn.dataset.path.split('/').pop());
        btn.innerHTML = btn.dataset.label || "📄 Download Document";
      }
    });
  });
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-basics.html" class="pagination-link" aria-label="Basics of R Programming">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Basics of R Programming</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-exploratory_analysis.html" class="pagination-link" aria-label="Exploratory Data Analysis">
        <span class="nav-page-text"><span class="chapter-title">Exploratory Data Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 Key Programming Concepts |  Analysing Quantitative Data with R  </title>
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="5 Key Programming Concepts |  Analysing Quantitative Data with R  ">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 Key Programming Concepts |  Analysing Quantitative Data with R  ">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Lexend-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/font-awesome-6.5.2/js/script.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.33/datatables.js"></script><link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
<meta name="description" content="Chapter script Chapter markdown Chapter exercises Chapter data  5.1 Content To make the data analysis more efficient, it is crucial to understand some of the crucial programming concepts. In the...">
<meta property="og:description" content="Chapter script Chapter markdown Chapter exercises Chapter data  5.1 Content To make the data analysis more efficient, it is crucial to understand some of the crucial programming concepts. In the...">
<meta name="twitter:description" content="Chapter script Chapter markdown Chapter exercises Chapter data  5.1 Content To make the data analysis more efficient, it is crucial to understand some of the crucial programming concepts. In the...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> Analysing Quantitative Data with R <br></p></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="accessibility.html">Accessibility</a></li>
<li class="book-part">THE BASICS</li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="basics.html"><span class="header-section-number">2</span> Basics of R Programming</a></li>
<li><a class="" href="datastructures.html"><span class="header-section-number">3</span> Data structures</a></li>
<li><a class="" href="exploratory.html"><span class="header-section-number">4</span> Exploratory Data Analysis</a></li>
<li class="book-part">ADVANCED DATA MANIPULATION</li>
<li><a class="active" href="programming.html"><span class="header-section-number">5</span> Key Programming Concepts</a></li>
<li><a class="" href="dplyr.html"><span class="header-section-number">6</span> Data Manipulation</a></li>
<li><a class="" href="visualization.html"><span class="header-section-number">7</span> Data Visualization</a></li>
<li class="book-part">DATA ANALYSIS</li>
<li><a class="" href="association.html"><span class="header-section-number">8</span> Statistical Inference and Association</a></li>
<li><a class="" href="ols.html"><span class="header-section-number">9</span> Linear Regression</a></li>
<li><a class="" href="logit.html"><span class="header-section-number">10</span> Logistic Regression</a></li>
<li class="book-part">ADVANCED TOPICS</li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">11</span> R Markdown</a></li>
<li><a class="" href="course-summary.html"><span class="header-section-number">12</span> Course summary</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><script src="sidebar-link.js"></script><div id="programming" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Key Programming Concepts<a class="anchor" aria-label="anchor" href="#programming"><i class="fas fa-link"></i></a>
</h1>
<button class="btn btn-default" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/plain;base64,IycgIyAoUEFSVCkgQURWQU5DRUQgREFUQSBNQU5JUFVMQVRJT04gCgojJyAKIycgIyBLZXkgUHJvZ3JhbW1pbmcgQ29uY2VwdHMgCgojJyAKIycgCiMnIAojJyAKIycgCiMnIAojJyAjIyBDb250ZW50CiMnIAojJyBUbyBtYWtlIHRoZSBkYXRhIGFuYWx5c2lzIG1vcmUgZWZmaWNpZW50LCBpdCBpcyBjcnVjaWFsIHRvIHVuZGVyc3RhbmQgc29tZSBvZiB0aGUgY3J1Y2lhbCBwcm9ncmFtbWluZyBjb25jZXB0cy4gSW4gdGhlIGZpcnN0IHBhcnQgb2YgdGhpcyBzZWN0aW9uIHdlIGRpc2N1c3MgZm9yIGxvb3BzIGFuZCBpZiBzdGF0ZW1lbnRzLiBUaGVzZSBhcmUgc28tY2FsbGVkICJjb250cm9sIGZsb3cgc3RhdGVtZW50cyIsIHdoaWNoIGFyZSBjb21tb24gdG8gYWxtb3N0IGFsbCBwcm9ncmFtbWluZyBsYW5ndWFnZXMuIFRoZSBzZWNvbmQgcGFydCB3aWxsIGRpc2N1c3MgdGhlIGNyZWF0aW9uIGFuZCBiYXNpYyB1c2FnZSBvZiBmdW5jdGlvbnMuIEZpbmFsbHksIHRoZSB0aGlyZCBwYXJ0IHdpbGwgZ28gdGhyb3VnaCB0aGUgYHNhcHBseSgpYCBmdW5jdGlvbiBmYW1pbHksIGEgY29tbW9uIHRvb2wgdXNlZCBpbiBSIHRvIGFwcGx5IGZ1bmN0aW9ucyBvdmVyIG9iamVjdHMgbXVsdGlwbGUgdGltZXMuIAojJyAKIycgIyMjIENvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzIAoKIycgCiMnICMjIyBGb3IgbG9vcHMgCgojJyAKIycgRm9yIGxvb3BzIGFyZSBlc3NlbnRpYWxseSBhIHdheSBvZiB0ZWxsaW5nIHRoZSBwcm9ncmFtbWluZyBsYW5ndWFnZSAicGVyZm9ybSB0aGUgb3BlcmF0aW9ucyBJIGFzayB5b3UgdG8gZG8gTiB0aW1lcyIuIEEgZm9yIGxvb3AgaW4gUiBiZWdpbm5zIHdpdGggYW4gYGZvcigpYCBzdGF0ZW1lbnQsIHdoaWNoIGlzIGZvbGxvd2VkIGJ5IGFuIG9wZW5pbmcgY3VybHkgYnJhY2UgYHtgIGluIHRoZSBzYW1lIGxpbmUgLSB0aGlzIGlzIGVzZW50aWFsbHkgKm9wZW5pbmcgdGhlIGZvci1sb29wKi4gQWZ0ZXIgdGhpcywgdXN1YWxseSBpbiBhIG5ldyBsaW5lLCB5b3UgcGxhY2UgdGhlIGNvZGUgd2hpY2ggeW91IHdhbnQgdG8gZXhlY3V0ZS4gVGhlbiwgaW4gdGhlIGxhc3QgbGluZSB5b3UgKmNsb3NlIHRoZSBmb3IgbG9vcCogYnkgYW5vdGhlciBjdXJseSBicmFjZSBgfWAuIFlvdSBjYW4gZXhlY3V0ZSB0aGUgZm9yIGxvb3AgYnkgcGxhY2luZyB0aGUgY3Vyc29yIGVpdGhlciBvbiB0aGUgZm9yIHN0YXRlbWVudCAoZmlyc3QgbGluZSkgb3IgdGhlIGNsb3NpbmcgYnJhY2UgKGxhc3QgbGluZSkgYW5kIGV4ZWN1dGluZyBpdCBhcyBhbnkgb3RoZXIgY29kZS4gQmVsb3csIHlvdSBjYW4gc2VlIHRoZSBmb3IgbG9vcCBwcmludGluZyB0aGUgc3RyaW5nIGAiSGVsbG8gd29ybGQhImAgNSB0aW1lcwojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmb3IoaSBpbiAxOjUpIHsKICBwcmludCgiSGVsbG8gd29ybGQiKQp9CgojJyAKIycgVGhlIGBpYCBpbiB0aGUgZm9yIHN0YXRlbWVudHMgaXMgdGhlIHZhcmlhYmxlIHRoYXQgd2lsbCBzZXF1ZW50aWFsbHkgdGFrZSBhbGwgdGhlIHZhbHVlcyBvZiB0aGUgb2JqZWN0ICh1c3VhbGx5IGEgdmVjdG9yKSBzcGVjaWZpZWQgb24gdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgYGluYCBrZXl3b3JkLiBJbiBtYWpvcml0eSBvZiB0aGUgY2FzZXMsIHRoZSBvYmplY3QgaXMgYSBzZXF1ZW5jZSBvZiBpbnRlZ2VycywgYXMgaW4gdGhlIGV4YW1wbGUgYmVsb3csIHdoZXJlIGBpYCB0YWtlcyB0aGUgdmFsdWVzIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgdmVjdG9yIGAxOjVgIGFuZCBwcmludHMgaXQuCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZvcihpIGluIDE6NSkgewogIHByaW50KGkpCn0KCiMnIAojJyBBIGZvciBsb29wIGNvdWxkIGJlIHVzZWQgdG8gYWRkIGEgY29uc3RhbnQgdG8gZWFjaCBlbGVtZW50IG9mIGEgdmVjdG9yOgojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp4IDwtIGMoNCwgNSwgMSwgMiwgOSwgOCwgMCwgNSwgMykKeAojZm9yIGFsbCBpbnRlZ2VycyBiZXR3ZWVuIDEgYW5kIGxlbmd0aCBvZiB2ZWN0b3IgeDoKZm9yKGkgaW4gMTpsZW5ndGgoeCkpIHsgCiAgeFtpXSA8LSB4W2ldICsgNQp9CngKCiMnIAojJyBIb3dldmVyLCBpbiBSIHRoaXMgaXMgcmVkdW5kYW50LCBiZWNhdXNlIG9mICoqdmVjdG9yaXphdGlvbioqIChzZWUgdGhlIFtzZWN0aW9uIG9uIHZlY3RvcnNdKCN2ZWN0b3JzKSBmcm9tIGNoYXB0ZXIgMikuIFRoZSBhYm92ZSBzdGF0ZW1lbnQgb3MgZXF1aXZhbGVudCB0bzoKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KeCA8LSBjKDQsIDUsIDEsIDIsIDksIDgsIDAsIDUsIDMpCnggKyA1CgojJyAKIycgVGhpcyBpcyBub3Qgb25seSBzaW1wbGVyLCBidXQgYWxzbyBtb3JlIGVmZmljaWVudC4gCiMnIAojJyBBbm90aGVyLCBtb3JlIHByYWN0aWNhbCBhcGxpY2F0aW9uIG9mIHRoZSBmb3IgbG9vcCBjb3VsZCBleGFtaW5lIGFsbCBjb2x1bW5zIG9mIGEgZGF0YSBmcmFtZSBmb3IgbWlzc2luZyB2YWx1ZXMsIHNvIHRoYXQ6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRldiA8LSByZWFkLmNzdigiZGF0YS91bl9kYXRhL2RldjIwMTguY3N2IiwKICAgICAgICAgICAgICAgIHN0cmluZ3NBc0ZhY3RvcnMgPSBGQUxTRSkKbWlzc2luZyA8LSBudW1lcmljKCkgI2NyZWF0ZSBlbXB0eSBudW1lcmljIHZlY3Rvcgpmb3IgKGkgaW4gMTpsZW5ndGgoZGV2KSl7CiAgbWlzc2luZ1tpXSA8LSBzdW0oaXMubmEoZGV2WyxpXSkpICNnZXQgc3VtIG9mIG1pc3NpbmcgZm9yIGl0aCBjb2x1bW4KICBuYW1lcyhtaXNzaW5nKVtpXSA8LSBuYW1lcyhkZXYpW2ldICNuYW1lIGl0IHdpdGggaXRoIGNvbHVtbiBuYW1lCn0KbWlzc2luZwoKIycgCiMnIEZyb20gdGhpcywgd2UgY2FuIHNlZSB0aGF0IHRoZXJlIGFyZSAwIG1pc2lzbmcgdmFsdWVzIGluIHRoZSBjb3VudHJ5IG5hbWUsIDEgbWlzc2luZyB2YWx1ZSBpbiB0aGUgZXhwZWN0ZWQgeWVhcnMgb2Ygc2Nob29saW5nIHZhcmlhYmxlIGFuZCwgMyBtaXNzaW5nIHZhbHVlcyBpbiBnbmkgYW5kIGxpZmUgZXhwZWN0YW5jeSBhbmQgNSBtaXNzaW5nIHZhbHVlcyBpbiBtZWFuIHllYXJzIG9mIHNjaG9vbGluZy4KIycgCiMnIAojJyAKIycgV2hpbGUgdGhpcyBpcyBhIGJpdCBtb3JlIHVzZWZ1bCB0aGFuIHRoZSBwcmV2aW91cyBleGFtcGxlLCBSIHN0aWxsIG9mZmVycyBhIHNob3J0aGFuZCBtZXRob2QgZm9yIHN1Y2ggcHJvYmxlbXMsIHdoaWNoIGlzIGRpc2N1c3NlZCBpbiBtb3JlIGRldGFpbCBpbiB0aGUgW2xhc3QgcGFydCBvZiB0aGlzIGNoYXB0ZXJdKCNhcHBseS1mYW1pbHkpLiBJbiBnZW5lcmFsLCBkdWUgdG8gdGhlIHBoZW5vbWVuYSBvZiB2ZWN0b3JpemF0aW9uLCBmb3IgbG9vcHMgYXJlIHJhcmVseSB1c2VkIGluIHNpbXBsZSBkYXRhIGFuYWx5c2lzIGluIFIuIEhvd2V2ZXIsIHRoZXkgYXJlIGEgY29yZSBlbGVtZW50IG9mIHByb2dyYW1taW5nIGFzIHN1Y2gsIHRoZXJlZm9yZSBpdCdzIGltcG9ydGFudCB0byB1bmRlcnN0YW5kIHRoZW0uIEluIGZhY3QsIHZlY3Rvcml6YXRpb24gaXMgbWFkZSBwb3NzaWJsZSBvbmx5IGJlY2F1c2Ugb2YgZm9yIGxvb3BzIGJlaW5nIHVzZWQgYnkgUiBpbiB0aGUgYmFja2dyb3VuZCAtIHNpbXBseSB0aGVpciBmYXN0ZXIgYW5kIG1vcmUgZWZmaWNpZW50IHZlcnNpb25zLgojJyAKIycgCiMnICMjIyBJZiBzdGF0ZW1lbnRzIAoKIycgCiMnIElmIHN0YXRlbWVudHMgYXJlIGFub3RoZXIgY3J1Y2lhbCBwcm9ncmFtbWluZyBjb25jZXB0LiBUaGV5IGVzc2VudGlhbGx5IGFsbG93IHBlcmZvcm1pbmcgY29tcHV0YXRpb24gKmNvbmRpdGlvbmFsbHkqIG9uIGEgbG9naWNhbCBzdGF0ZW1lbnQuIEluIG90aGVyIHdvcmRzLCBkZXBlbmRpbmcgb24gYSBbbG9naWNhbCBleHByZXNzaW9uXShsb2dpY2FsLXZhbHVlcy1hbmQtb3BlcmF0b3JzKSBhbiBvcGVyYXRpb24gaXMgcGVyZm9ybWVkIG9yIG5vdC4gSWYgbG9vcHMgaW4gUiBhcmUgY29uc3RydWN0ZWQgaW4gdGhlIGZvbGxvd2luZyB3YXk6CiMnIAojJyAKIycgCiMnIAojJyBXaGVyZSBgbG9naWNhbF9leHByZXNzaW9uYCBtdXN0IGFuIGV4cHJlc3Npb24gdGhhdCBldmFsdWF0ZXMgdG8gYSBsb2dpY2FsIHZhbHVlLCBmb3IgZXhhbXBsZSBgWCA+IDVgLCBgY291bnRyeSA9PSAiRnJhbmNlImAgb3IgYGlzLm5hKHgpYC4gYG9wZXJhdGlvbnNgIGFyZSBwZXJmb3JtZWQgaWYgYW5kIG9ubHkgaWYgdGhlIGBsb2dpY2FsX2V4cHJlc3Npb25gIGV2YWx1YXRlcyB0byBgVFJVRWAuIFRoZSBzaW1wbGVzIHBvc3NpYmxlIGV4YW1wbGUgd291bGQgYmUKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KeCA8LSAyCmlmICh4ID4gMCkgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIDAiKQp9Cgp4IDwtIC0yCmlmICh4ID4gMCkgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIDAiKQp9CgojJyAKIycgCiMnIElmIGlzIG5hdHVyYWxseSBjb21wbGVtZW50ZWQgYnkgdGhlIGBlbHNlYCBjbGF1c2UsIGkuZS4gdGhlIG9wZXJhdGlvbnMgdGhhdCBzaG91bGQgYmUgcGVyZm9ybWVkIG90aGVyd2lzZS4gVGhlIGdlbmVyYWwgZm9ybSBvZiBzdWNoIHN0YXRlbWVudCBpczoKIycgCiMnIAojJyAKIycgCiMnIEluIHRoaXMgY2FzZSwgUiBmaXJzdCBjaGVja3MgaWYgdGhlIGBsb2dpY2FsX2V4cHJlc3Npb25gIGV2YWx1YXRlcyB0byBgVFJVRWAsIGFuZCBpZiBpdCBkb2Vzbid0LCBwZXJmb3JtcyB0aGUgYG90aGVyX29wZXJhdGlvbnNgLiBGb3IgZXhhbXBsZToKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KeCA8LSAtMgppZiAoeCA+IDApIHsKICBwcmludCgidGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiAwIikKfSBlbHNlIHsKICBwcmludCgidGhlIHZhbHVlIGlzIGxlc3Mgb3IgZXF1YWwgdGhhbiAwIikKfQoKIycgCiMnIEZpbmFsbHksIGBlbHNlIGlmYCBhbGxvd3MgdG8gcHJvdmlkZSBhbm90aGVyIHN0YXRlbWVudCB0byBiZSBldmFsdWF0ZWQuIFRoZSBnZW5lcmFsIGZvcm0gb2Ygc3VjaCBzdGF0ZW1lbnQgd291bGQgYmU6CiMnIAojJyAKIycgCiMnIAojJyBIZXJlLCBSIGZpcnN0IGNoZWNrcyB0aGUgYGxvZ2ljYWxfc3RhdGVtZW50YCwgaWYgaXQncyBgRkFMU0VgIHRoZW4gaXQgcHJvY2VlZHMgdG8gY2hlY2sgdGhlIGBvdGhlcl9sb2dpY2FsX3N0YXRlbWVudGAuIElmIHRoZSBzZWNvbmQgb25lIGlzIGBUUlVFYCBpZiBwZXJmb3JtcyB0aGUgYG90aGVyX29wZXJhdGlvbmAgYW5kIGlmIGl0J3MgYEZBTFNFYCBpdCBwcm9jZWVkcyB0byBwZXJmb3JtIHRoZSBgeWV0X2Fub3RoZXJfb3BlcmF0aW9uYC4gQW4gZXh0ZW5zaW9uIG9mIHRoZSBwcmV2aW91cyBleGFtcGxlOgojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp4IDwtIDIKaWYgKHggPiAwKSB7CiAgcHJpbnQoIlRoZSB2YWx1ZSBpcyBwb3NpdGl2ZSIpCn0gZWxzZSBpZiAoeCA8IDApIHsKICBwcmludCgiVGhlIHZhbHVlIGlzIG5lZ2F0aXZlIikgCn0gZWxzZSB7CiAgcHJpbnQoIlRoZSB2YWx1ZSBpcyAwIikKfQoKIycgCiMnIElGLUVMU0Ugc3RhdG1lbnRzIGNhbiBiZSB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgcmVwbGFjZSB2YWx1ZXMuIEZvciBleGFtcGxlLCBzdXBwb3NlIHRoYXQgd2Ugd2FudCB0byBjcmVhdGUgYSB2YXJpYWJsZSB0aGF0IGlzIDEgd2hlbiBjb3VudHJ5IGlzIEZyYW5jZSBhbmQgMCBvdGhlcndpc2UuIFdlIGNvdWxkIGRvIHRoYXQgYnk6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmRldiRmcmFuY2UgPC0gMApmb3IgKGkgaW4gMTpucm93KGRldikpIHsKICBpZiAoZGV2JGNvdW50cnlbaV0gPT0gIkZyYW5jZSIpIHsKICAgIGRldiRmcmFuY2VbaV0gPC0gMQogIH0KfQoKZGV2JGZyYW5jZVtkZXYkY291bnRyeSA9PSAiRnJhbmNlIl0KCiMnIAojJyBBZ2FpbiwgYmVjYXVzZSBvZiB2ZWN0b3JpemF0aW9uLCBSIG9mZmVycyBhIHNob3J0aGFuZCBmb3IgdGhpcywgdGhyb3VnaCB0aGUgYGlmZWxzZSgpYCBmdW5jdGlvbjoKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGV2JGZyYW5jZSA8LSBpZmVsc2UoZGV2JGNvdW50cnkgPT0gIkZyYW5jZSIsIDEsIDApCmRldiRmcmFuY2VbZGV2JGNvdW50cnkgPT0gIkZyYW5jZSJdCgojJyAKIycgCiMnIFdoZW4geW91IGxvb2sgYXQgdGhlIGRvY3VtZW50YXRpb24gIGA/aWZlbHNlYCwgeW91IGNhbiBzZWUgdGhhdCBpdCB0YWtlcyB0aHJlZSBhcmd1bWVudHMgLSBgdGVzdGAsIGB5ZXNgIGFuZCBgbm9gLiBUaGUgYHRlc3RgIGFyZ3VtZW50IGlzIHRoZSBsb2dpY2FsIGNvbmRpdGlvbiAtIHNhbWUgYXMgYGxvZ2ljYWxfc3RhdGVtZW50YCBpbiB0aGUgYGlmYCwgd2l0aCB0aGUgc21hbGwgc3VidGxlIGRpZmZlcmVuY2UgdGhhdCBpdCBjYW4gZXZhbHVhdGUgdG8gYSBsb2dpY2FsIHZlY3RvciByYXRoZXIgdGhhbiBvbmUgc2luZ2xlIGxvZ2ljYWwgdmFsdWUuIFRoZSBgeWVzYCBhcmd1bWVudCBpcyB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGZ1bmN0aW9uIGlmIHRoZSBgdGVzdGAgaXMgYFRSVUVgIGFuZCB0aGUgYG5vYCBhcmd1bWVudCBpcyByZXR1cm5lZCB3aGVuIGB0ZXN0YCBpcyBgRkFMU0VgLiBZb3UgY2FuIGZ1bGx5IHNlZSB0aGlzIGluIHRoZSBleGFtcGxlIGJlbG93OgojJyAKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KaWZlbHNlKGMoVFJVRSwgRkFMU0UsIEZBTFNFLCBUUlVFKSwgInllcyIsICJubyIpCmlmZWxzZShjKFRSVUUsIEZBTFNFLCBGQUxTRSwgVFJVRSksIDEsIDApCgojJyAKIycgCiMnICMjIyBGdW5jdGlvbnMgCgojJyAKIycgUiBpcyBrbm93biBhcyBhICpmdW5jdGlvbmFsIHByb2dyYW1taW5nIGxhbmd1YWdlKiAtIGFzIHlvdSBoYXZlIGFscmVhZHkgc2VlbiwgYWxtb3N0IGFsbCBvZiB0aGUgb3BlcmF0aW9ucyBwZXJmb3JtZWQgYXJlIGRvbmUgdXNpbmcgZnVuY3Rpb25zLiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGNyZWF0ZSBvdXIgb3duLCBjdXN0b20gZnVuY3Rpb25zIGJ5IGNvbWJpbmluZyBvdGhlciBmdW5jdGlvbnMgYW5kIGRhdGEgc3RydWN0dXJlcy4gVGhpcyBpcyBkb25lIHVzaW5nIHRoZSBgZnVuY3Rpb24oKWAga2V5d29yZC4gVGhlIGdlbmVyYWwgc3ludGF4IG9mIGEgZnVuY3Rpb24gbG9va3MgYXMgZm9sbG93czoKIycgCiMnIAojJyAKIycgCiMnIEFzIHdpdGggYW55IFIgb2JqZWN0LCB5b3UgY2FuIHVzZSBhbG1vc3QgYW55IG5hbWUgaW5zdGVhZCBvZiBgZnVuY3Rpb25fbmFtZWAuIEFyZ3VtZW50cyBhcmUgc2VwYXJldGVkIGJ5IGNvbW1hcyAoaW4gdGhlIGFib3ZlIGV4YW1wbGUgYGFyZzFgLCBgYXJnMmApIC0gdGhlc2UgYXJlIHRoZSBvYmplY3RzIHlvdSBwYXNzIHRvIHlvdXIgZnVuY3Rpb24gb24gd2hpY2ggeW91IHBlcmZvcm0gc29tZSBhcmJpdHJhcnkgYG9wZXJhdGlvbnNgLiBBZ2FpbiwgdGhlIGFyZ3VtZW50cyBjYW4gaGF2ZSBhcmJpdHJhcnkgbmFtZXMsIGJ1dCB5b3UgbmVlZCB0byB1c2UgdGhlbSB3aXRoaW4gdGhlIGZ1bmN0aW9uIGNvbnNpc3RlbnRseS4gRmluYWxseSwgbW9zdCBvZiB0aGUgZnVuY3Rpb25zIHJldHVybiBhIHZhbHVlIC0gdGhpcyBpcyB0aGUgbGFzdCBvYmplY3QgY2FsbGVkIHdpdGhpbiB0aGUgZnVuY3Rpb24gKGBvdXRwdXRgIGluIHRoZSBhYm92ZSBleGFtcGxlKS4KIycgCiMnIEFmdGVyIGNyZWF0aW5nIHRoZSBmdW5jdGlvbiB3ZSBjYW4gcnVuIGl0LCBleGFjdGx5IHRoZSBzYW1lIHdheSBhcyB3ZSB3b3VsZCB3aXRoIGFueSBvZiBSJ3MgYnVpbHQtaW4gZnVuY3Rpb25zLiBBIHNpbXBsZSBleGFtcGxlIGNvdWxkIHJldHVybiB0aGUgbnVtYmVyIG9mIG1pc3NpbmcgdmFsdWVzIGluIGFuIG9iamVjdDoKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KY291bnRfbmEgPC0gZnVuY3Rpb24oeCkgewogIHN1bShpcy5uYSh4KSkKfQoKY291bnRfbmEoZGV2JG15cykKCiMnIAojJyBXZSBjb3VsZCBhbHNvIGltcGxlbWVudCBvdXIgb3duIHN1bW1hcnkgc3RhdGlzdGljcyBmdW5jdGlvbiwgc2ltaWxhciB0byBgZGVzY3JpYmUoKWAgZGlzY3Vzc2VkIGluIFt0aGUgcHJldmlvdXMgY2hhcHRlcl0oI2V4cGxvcmF0b3J5KToKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Kc3VtbWFyeV9zdGF0cyA8LSBmdW5jdGlvbih4KSB7CiAgaWYgKGlzLm51bWVyaWMoeCkpIHsKICAgIGxpc3QoTWVhbiA9IG1lYW4oeCwgbmEucm0gPSBUUlVFKSwgCiAgICAgICAgICAgICAgICBTRCA9IHNkKHgsIG5hLnJtID0gVFJVRSksIAogICAgICAgICAgICAgICAgSVFSID0gSVFSKHgsIG5hLnJtID0gVFJVRSkpCiAgfSBlbHNlIGlmIChpcy5jaGFyYWN0ZXIoeCkpIHsKICAgIGxpc3QoTGVuZ3RoID0gbGVuZ3RoKHgpLCAKICAgICAgICAgICAgICAgICAgTWVhbl9OY2hhciA9IG1lYW4obmNoYXIoeCkpKQogIH0gZWxzZSBpZiAoaXMuZmFjdG9yKHgpKSB7CiAgbGlzdChMZW5ndGggPSBsZW5ndGgoeCksIAogICAgICAgTmxldmVscyAgPSBsZW5ndGgobGV2ZWxzKHgpKSkKICB9Cn0KCiMnIAojJyBMZXQncyB3YWxrIHRocm91Z2ggdGhlIGFib3ZlIGZ1bmN0aW9uIEdpdmVuIGEgdmVjdG9yIGB4YCwgdGhlIGZ1bmN0aW9uIDoKIycgMS4gQ2hlY2tzIHdoZXRoZXIgYHhgIGlzIGEgbnVtZXJpYyB2ZWN0b3IuIElmIHNvLCByZXR1cm5zIGEgbGlzdCBvZiBpdCdzIG1lYW4sIHN0YW5kYXJkIGRldmlhdGlvbiBhbmQgaW50ZXJxdWFydGlsZSByYW5nZS4KIycgMi4gRWxzZSwgY2hlY2tzIGlmIGB4YCBpcyBhIGNoYXJhY3RlciB2ZWN0b3IuIElmIHNvLCByZXR1cm5zIGEgbGlzdCBjb250YWlubmcgaXRzIGxlbmd0aCBhbmQgYXZlcmFnZSBudW1iZXIgb2YgY2hhcmFjdGVycy4KIycgMy4gRWxzZSwgY2hlY2tzIGlmIGB4YCBpcyBhIGZhY3Rvci4gSWYgc28gcmV0dXJucyBhIGxpc3QgY29udGFpbmluZyBpdHMgbGVuZ3RoIGFuZCBhdmVyYWdlIG51bWJlciBvZiBjaGFyYWN0ZXIuCiMnIAojJyBXZSBjYW4gc2VlIGhvdyBpdCB3b3JrcyBiZWxvdzoKIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Kc3VtbWFyeV9zdGF0cyhjKDEsIDIsIDMsIDEwKSkKc3VtbWFyeV9zdGF0cyhkZXYkY291bnRyeSkKc3VtbWFyeV9zdGF0cyhhcy5mYWN0b3IoZGV2JGNvdW50cnkpKQoKIycgCiMnIAojJyAjIyMjIEtleXdvcmQgYXJndW1lbnRzIAoKIycgCiMnIE1hbnkgb2YgdGhlIGZ1bmN0aW9ucyB1c2VkIGluIFIgY29tZSB3aXRoIHNvLWNhbGxlZCAqZGVmYXVsdCogYXJndW1lbnRzIC0gdGhpcyB3YXMgYWxyZWFkeSBtZW50aW9uZWQgaW4gW3NvcnRpbmddKCNzb3J0aW5nKS4gV2hlbiBkZWZpbmluZyBvdXIgb3duIGZ1bmN0aW9ucywgd2UgY2FuIG1ha2UgdXNlIG9mIHRoYXQgZnVuY3Rpb25hbGl0eSBhcyB3ZWxsLiBGb3IgZXhhbXBsZSwgdGhlIGBjb3VudF9uYWAgZXhhbXBsZSBjYW4gYmUgbW9kaWZpZWQgaW4gdGhlIGZvbGxvd2luZyB3YXk6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvdW50X25hIDwtIGZ1bmN0aW9uKHgsIHByb3BvcnRpb24gPSBUUlVFKSB7CiAgbnVtX25hIDwtIHN1bShpcy5uYSh4KSkKICBpZiAocHJvcG9ydGlvbiA9PSBUUlVFKSB7CiAgICBudW1fbmEvbGVuZ3RoKHgpCiAgfSBlbHNlIHsKICAgIG51bV9uYQogIH0KfQoKIycgCiMnIFRoZSBgcHJvcG9ydGlvbmAgYXJndW1lbnQgY29udHJvbHMgd2hldGhlciB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgbnVtYmVyIG9mIE5BcyBhcyB2YWx1ZSBvciBhcyBwcm9wb3J0aW9uIG9mIHRoZSBlbnRpcmUgdmVjdG9yOgojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb3VudF9uYShkZXYkZ25pKQpjb3VudF9uYShkZXYkZ25pLCBwcm9wb3J0aW9uID0gVFJVRSkgI3NhbWUgYXMgYWJvdmUKY291bnRfbmEoZGV2JGduaSwgcHJvcG9ydGlvbiA9IEZBTFNFKQoKIycgCiMnIAojJyBUaGVyZSBhcmUgY291cGxlIG9mIHJlYXNvbnMgd2h5IGZ1bmN0aW9ucyBhcmUgZnJlcXVlbnRseSBhcHBsaWVkIHdoZW4gYW5hbHl6aW5nIGRhdGE6CiMnIDEuICpUbyBhdm9pZCByZXBldGl0aW9uKiAtIG9mdGVuLCB5b3UgbmVlZCB0byBwZXJmb3JtIHRoZSBzYW1lIG9wZXJhdGlvbiByZXBlYXRlZGx5IC0gc29tZXRpbWVzIG9uIGEgZGF0YWZyYW1lIHdpdGggdGVucyBvciBodW5kZXJkcyBvZiBjb2x1bW5zIG9yIGV2ZW4gbXVsdGlwbGUgZGF0YSBmcmFtZXMuIFRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgY29kZSBvdmVyIGFuZCBvdmVyIGFnYWluICh3aGljaCBhbHdheXMgaW5jcmVhc2VzIHRoZSBjaGFuY2Ugb2YgYW4gZXJyb3Igb2NjdXJpbmcpLgojJyAyLiAqVG8gZW5oYW5jZSBjbGFyaXR5KiAtIHdoZW4geW91IHBlcmZvcm0gYSBsb25nIGFuZCBjb21wbGljYXRlZCBzZXJpZXMgb2Ygb3BlcmF0aW9ucyBvbiBhIGRhdGFzZXQsIGl0J3Mgb2Z0ZW4gbXVjaCBlYXNpZXIgdG8gYnJlYWsgaXQgZG93biBpbnRvIGZ1bmN0aW9ucy4gVGhlbiB3aGVuIHlvdSBuZWVkIHRvIGNvbWUgYmFjayB0byB5b3VyIGNvZGUgYWZ0ZXIgYSBsb25nIHRpbWUsIGl0IGlzIG9mdGVuIG11Y2ggZWFzaWVyIHRvIHNlZSBgcmVjb2RlX21pc3NpbmdfdmFsdWVzKGRhdGEpYCBhcHBlYXIgaW4geW91ciBjb2RlLCB3aXRoIHRoZSBgcmVjb3JkX21pc3NpbmdfdmFsdWVzYCBmdW5jdGlvbiBkZWZpbmVkIHNvbWV3aGVyZSBlbHNlLCBhcyB5b3UgZG9uJ3QgbmVlZCB0byBnbyB0aHJvdWdoIHlvdXIgY29kZSBzdGVwIGJ5IHN0ZXAsIGJ1dCBvbmx5IHVuZGVyc3RhbmQgd2hhdCBwYXJ0aWN1bGFyIGZ1bmN0aW9ucyByZXR1cm4uCiMnIDMgKlRvIGltcHJvdmUgcGVyZm9ybWFuY2UqIC0gd2hpbGUgbW9zdCBvZiB0aGUgb3BlcmF0aW9ucyB3ZSd2ZSBzZWVuIGluIFIgdGFrZSBmcmFjdGlvbnMgb2Ygc2Vjb25kcywgbGFyZ2VyIGRhdGEgY2FuIG9mdGVuIGxlYWQgdG8gbG9uZ2VyIGNvbXB1dGF0aW9uIHRpbWVzLiBGdW5jdGlvbnMgY2FuIGJlIGNvbWJpbmVkIHdpdGggb3RoZXIgdG9vbHMgdG8gbWFrZSBjb21wdXRhdGlvbiBtb3JlIGVsZWdhbnQgYW5kIHF1aWNrZXIgLSBzb21lIG9mIHRoZXNlIG1ldGhvZHMgYXJlIGRpc2N1c3NlZCBpbiB0aGUgbmV4dCBzZWN0aW9uLgojJyAKIycgCiMnICMjIyBTYXBwbHkgCgojJyAKIycgUmVjYWxsIHRoZSBjb2RlIHdlIHVzZWQgdG8gY2hlY2sgZWFjaCBjb2x1bW4gb2Ygb3VyIGRhdGEgZnJhbWUgZm9yIG1pc3NpbmduZXNzIGluIHRoZSBbZm9yIGxvb3BzIHNlY3Rpb25dKGZvci1sb29wcyk6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCm1pc3NpbmcgPC0gbnVtZXJpYygpICNjcmVhdGUgZW1wdHkgbnVtZXJpYyB2ZWN0b3IKZm9yIChpIGluIDE6bGVuZ3RoKGRldikpewogIG1pc3NpbmdbaV0gPC0gc3VtKGlzLm5hKGRldlssaV0pKSAjZ2V0IHN1bSBvZiBtaXNzaW5nIGZvciBpdGggY29sdW1uCiAgbmFtZXMobWlzc2luZylbaV0gPC0gbmFtZXMoZGV2KVtpXSAjbmFtZSBpdCB3aXRoIGl0aCBjb2x1bW4gbmFtZQp9CgojJyAKIycgV2UgY291bGQgcmUtd3JpdGUgaXQgdXNpbmcgb3VyIG5ldyBrbm93bGVkZ2Ugb2YgZnVuY3Rpb25zLCBzdWNoIHRoYXQ6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvdW50X25hIDwtIGZ1bmN0aW9uKHgpIHsKICBzdW0oaXMubmEoeCkpCn0KCm1pc3NpbmcgPC0gbnVtZXJpYygpCmZvciAoaSBpbiAxOmxlbmd0aChkZXYpKSB7CiAgbWlzc2luZ1tpXSA8LSBjb3VudF9uYShkZXZbLGldKQogIG5hbWVzKG1pc3NpbmcpW2ldIDwtIG5hbWVzKGRldilbaV0KfQptaXNzaW5nCgojJyAKIycgV2hpbGUgdGhpcyBtYXkgbG9vayBhIGJpdCBtb3JlIGZhbmN5LCBpbiBmYWN0IG1vcmUgY29kZSB3YXMgdXNlZCB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uIGFuZCBpdCBkb2Vzbid0IGRpZmZlciB0b28gbXVjaCBpbiB0ZXJtcyBvZiBjbGFyaXR5LiBUaGUgZXhhY3Qgc2FtZSByZXN1bHQgY2FuIGJlIGFjaGlldmVkIHVzaW5nIHRoZSBgc2FwcGx5KClgIGZ1bmN0aW9uLiBgc2FwcGx5KClgIHRha2VzIHR3byBhcmd1bWVudHMgLSBhbiBSIG9iamVjdCwgc3VjaCBhcyBhIHZlY3RvciBhbmQgYSBkYXRhIGZyYW1lIGFuZCBhIGZ1bmN0aW9uLiBUaGVuLCBpdCBhcHBsaWVzIHRoZSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgdGhpcyBvYmplY3QgKGkuZS4gdmFsdWUgaW4gY2FzZSBvZiB2ZWN0b3JzLCBjb2x1bW4vdmFyaWFibGUgaW4gY2FzZSBvZiBkYXRhIGZyYW1lcykuIAojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpzYXBwbHkoZGV2LCBjb3VudF9uYSkKCiMnIAojJyBUaGUgcmVzdWx0IGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgaW4gdGhlIHByZXZpb3VzIGNhc2UuIGBzYXBwbHkoKWAgdXNlZCB0aGUgYGNvdW50X25hYCBmdW5jdGlvbiBvbiBlYWNoIGNvbHVtbnMgb2YgdGhlIGBkZXZgIGRhdGFzZXQuCiMnIAojJyBXaGVuIHVzaW5nIHNob3J0LCBzaW1wbGUgZnVuY3Rpb25zLCBgc2FwcGx5KClgIGNhbiBiZSBldmVuIG1vcmUgY29uY2lzZSwgYXMgd2UgY2FuIGRlZmluZWQgb3VyIGZ1bmN0aW9uIHdpdGhvdXQgZ2l2aW5nIGl0IGEgbmFtZS4gSW4gdGhlIGV4YW1wbGUgYmVsb3csIGluc3RlYWQgb2YgZGVmaW5pbmcgYGNvdW50X25hYCBzZXBhcmF0ZWx5LCB3ZSBkZWZpbmUgaXQgZGlyZWN0bHkgd2l0aGluIHRoZSBgc2FwcGx5KClgIGNhbGwgKGkuZS4gaW5zaWRlIHRoZSBwYXJlbnRoZXNlcykuIFRoaXMgeWllbGRzIHRoZSBzYW1lIHJlc3VsdC4gCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnNhcHBseShkZXYsIGZ1bmN0aW9uKHgpIHN1bShpcy5uYSh4KSkpCgojJyAKIycgCiMnIENvbnNpZGVyIHRoZSBmdW5jdGlvbiBiZWxvdy4gV2hhdCBkbyB5b3UgZXhwZWN0IGl0IHRvIHJldHVybj8gVHJ5IGdvaW5nIHRocm91Z2ggZWFjaCBlbGVtZW50IG9mIHRoZSBjb2RlIHNlcGFyYXRlbHkuIFlvdSBjYW4gY2hlY2sgaG93IHRoZSBgcm93U3Vtc2AgY29tbWFuZCB3b3JrcyBieSB0eXBpbmcgYD9yb3dTdW1zYCBpbnRvIHRoZSBSIGNvbnNvbGUuCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnF1YXJ0aWxlIDwtIGZ1bmN0aW9uKHgpIHsKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgYygwLjI1LCAwLjUsIDAuNzUpLCBuYS5ybSA9IFRSVUUpCiAgY29tcGFyaXNvbnMgPC0gc2FwcGx5KHF1YW50aWxlcywgZnVuY3Rpb24oeSkgeSA8PSB4KQogIHJvd1N1bXMoY29tcGFyaXNvbnMpICsgMQp9CgojJyAKIycgVGhlIGZ1bmN0aW9uIHRha2VzIGEgdmVjdG9yIGFzIGlucHV0IGFuZCBjb21wdXRlcyB0aHJlZSBxdWFudGlsZXMgb2YgaXRzIHZhbHVlcyAtIDI1JSwgNTAlLCA3NSUuIFlvdSBtYXkgcmVjYWxsIGZyb20gdGhlIFtwcmV2aW91cyBjaGFwdGVyXSgjZXhwbG9yYXRvcnkpIHRoYXQgcXVhbnRpbGVzIGFyZSBjdXQgcG9pbnRzIHRoYXQgZGl2aWRlIGEgdmFyaWFibGUgaW50byByYW5nZXMgb2YgZXF1YWwgcHJvcG9ydGlvbnMgaW4gdGhlIGRhdGEgc2V0LiBUaGUgcmVzdWx0aW5nIGBxdWFudGlsZXNgIHZlY3RvciBjb25zaXN0cyBvZiB0aHJlZSB2YWx1ZXMsIGNvcnJlc3BvbmRpbmcgd2l0aCB0aHJlIHRocmVlIHF1YW50aWxlcy4gV2UgdGhlbiB1c2UgYHNhcHBseWAgb24gdGhlc2UgdGhyZWUgdmFsdWVzIHRvIGNvbXBhcmUgZWFjaCBvZiB0aGVtIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBgeGAgdmVjdG9yLiBBcyBhIHJlc3VsdCwgd2Ugb2J0YWluIGEgMyB4IG4gYXJyYXksIHdoZXJlIG4gaXMgbGVuZ3RoIG9mIGB4YC4gRm9yIGVhY2ggb2YgdGhlIHZhbHVlcyBvZiBgeGAgd2UgZ2V0IHRocmVlIGxvZ2ljYWwgdmFsdWVzLiBFYWNoIG9mIHRoZW0gaXMgYFRSVUVgIHdoZW4gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgb2YgeCB3YXMgbGFyZ2VyIHRoYW4gdGhlIHF1YW50aWxlIGFuZCBgRkFMU0VgIGlmIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIG9mIHggd2FzIGxvd2VyIHRoYW4gdGhlIHF1YW50aWxlLiBXZSBjYW4gdGhlbiBzdW0gdGhlIHJlc3VsdHMgYnkgcm93LCB1c2luZyBgcm93U3Vtc2AuIE91ciBmaW5hbCByZXN1bHQgaXMgYSB2ZWN0b3Igd2l0aCB2YWx1ZXMgb2YgMCwgMSBhbmQgMi4gSXRzIHZhbHVlIGlzIDAgaWYgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgb2YgeCB3YXMgbGVzcyB0aGFuIGFsbCBxdWFydGlsZXMsIDEgaWYgaXQgd2FzIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiB0aGUgLjI1LCAyIGlmIGl0IHdhcyBncmVhdGVyIG9yIGVxdWFsIHRoYW4gMC41IGFuZCAzIGlmIGl0IHdhcyBncmVhdGVyIG9yIGVxdWFsIHRoYW4gYWxsIG9mIHRoZW0uIFdlIHRoZW4gZmluYWxseSBhZGQgMSB0byBlYWNoLCBzbyB0aGF0IHRoZXkgY29ycmVzcG9uZCB0byB0cnVlIHF1YXJ0aWxlIG51bWJlcnMgKDFzdCBxdWFydGlsZSwgcmF0aGVyIHRoYW4gMHRoIHF1YXJ0aWxlLCBldGMpLgojJyAKIycgV2UgY2FuIHRoZW4gdXNlIHRoZSBgc3BsaXRgIGZ1bmN0aW9uLCB3aGljaCB0YWtlcyBhIGRhdGEgZnJhbWUgYW5kIGEgdmVjdG9yIGFzIGlucHV0IGFuZCBzcGxpdHMgdGhlIGRhdGEgZnJhbWUgaW50byBzZXZlcmFsIHBhcnRzLCBlYWNoIHdpdGggdGhlIHNhbWUgdmFsdWUgb2YgdGhlIHNwbGl0dGluZyB2YXJpYWJsZS4gQXMgYSByZXN1bHQsIHdlIG9idGFpbiBgZGV2X3NwbGl0YCBkYXRhc2V0LCB3aGljaCBzdG9yZXMgNCBkYXRhIGZyYW1lcywgZWFjaCBvbmx5IHdpdGggY291bnRyaWVzIGluIHRoZSByZXNwZWN0aXZlIHF1YW50aWxlIG9mIGV4cGVjdGVkIHllYXJzIG9mIHNjaG9vbGluZy4KIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZGV2X3NwbGl0IDwtIHNwbGl0KGRldiwgcXVhcnRpbGUoZGV2JGV5cykpCmhlYWQoZGV2X3NwbGl0W1sxXV0pCgojJyAKIycgWW91IGNhbiB0aGVuIGxvb2sgYXQgZGVzY3JpcHRpdmUgc3RhdGlzdGljcyBvZiBlYWNoIG9mIHRoZSBxdWFydGlsZXMgdXNpbmc6CiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnNhcHBseShkZXZfc3BsaXQsIHN1bW1hcnkpCgojJyAKIycgCiMnIFdoaWxlIHdvcmtpbmcgYW4gUiBhbmQgbG9va2luZyBmb3IgaGVscCBvbmxpbmUsIHlvdSBtYXkgc3R1bWJsZSB1cG9uIG90aGVyIHZhcmlhbnRzIG9mIHRoZSBgc2FwcGx5KClgIGZ1bmN0aW9ucy4gRXNzZW50aWFsbHksIGFsbCBSIGZ1bmN0aW9ucyB3aXRoIGBhcHBseWAgaW4gdGhlaXIgbmFtZSBzZXJ2ZSB0aGUgc2FtZSBwdXJwb3NlIC0gYXBwbHlpbmcgYSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgYW4gb2JqZWN0LiBgbGFwcGx5KClgIGlzIGEgbGVzcyB1c2VyIGZyaWVuZHkgdmVyc2lvbiBvZiBgc2FwcGx5KClgLCB3aGljaCBhbHdheXMgcmV0dXJucyBhIGxpc3QsIG5vdCBhIHZlY3Rvci4gYHZhcHBseSgpYCBmb3JjZXMgdGhlIHVzZXIgdG8gZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRoZSBvdXRwdXQsIHdoaWNoIG1ha2VzIGl0cyBiZWhhdmlvdXIgbW9yZSBwcmVkaWN0aWJsZSBhbmQgc2xpZ2h0bHkgZmFzdGVyLiBgdGFwcGx5KClgIGFwcGxpZXMgdGhlIGZ1bmN0aW9uIHRvIGRhdGEgZnJhbWUgYnkgZ3JvdXAgZGV0ZXJtaW5lZCBieSBhbm90aGVyIHZhcmlhYmxlIC0gYSBzaW1pbGFyIHByb2NlZHVyZSB0byB3aGF0IHdlIGRpZCB1c2luZyBgc3BsaXQoKWAgYW5kIGBzYXBwbHkoKWAsIGJ1dCBpbiBsZXNzIHN0ZXBzLgojJyAKIycgCiMnIAojJyAKIycgCiMnIAoA');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = '05-key_programming_concepts.R';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() =&gt; {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  "><i class="fa fa-save"></i> Chapter script</button>
<button class="btn btn-default" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/x-markdown;base64,LS0tCm91dHB1dDogaHRtbF9kb2N1bWVudAotLS0KIyAoUEFSVCkgQURWQU5DRUQgREFUQSBNQU5JUFVMQVRJT04gey19CgojIEtleSBQcm9ncmFtbWluZyBDb25jZXB0cyB7I3Byb2dyYW1taW5nfQoKCgoKCgojIyBDb250ZW50CgpUbyBtYWtlIHRoZSBkYXRhIGFuYWx5c2lzIG1vcmUgZWZmaWNpZW50LCBpdCBpcyBjcnVjaWFsIHRvIHVuZGVyc3RhbmQgc29tZSBvZiB0aGUgY3J1Y2lhbCBwcm9ncmFtbWluZyBjb25jZXB0cy4gSW4gdGhlIGZpcnN0IHBhcnQgb2YgdGhpcyBzZWN0aW9uIHdlIGRpc2N1c3MgZm9yIGxvb3BzIGFuZCBpZiBzdGF0ZW1lbnRzLiBUaGVzZSBhcmUgc28tY2FsbGVkICJjb250cm9sIGZsb3cgc3RhdGVtZW50cyIsIHdoaWNoIGFyZSBjb21tb24gdG8gYWxtb3N0IGFsbCBwcm9ncmFtbWluZyBsYW5ndWFnZXMuIFRoZSBzZWNvbmQgcGFydCB3aWxsIGRpc2N1c3MgdGhlIGNyZWF0aW9uIGFuZCBiYXNpYyB1c2FnZSBvZiBmdW5jdGlvbnMuIEZpbmFsbHksIHRoZSB0aGlyZCBwYXJ0IHdpbGwgZ28gdGhyb3VnaCB0aGUgYHNhcHBseSgpYCBmdW5jdGlvbiBmYW1pbHksIGEgY29tbW9uIHRvb2wgdXNlZCBpbiBSIHRvIGFwcGx5IGZ1bmN0aW9ucyBvdmVyIG9iamVjdHMgbXVsdGlwbGUgdGltZXMuIAoKIyMjIENvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzIHstfQoKIyMjIEZvciBsb29wcyB7LX0KCkZvciBsb29wcyBhcmUgZXNzZW50aWFsbHkgYSB3YXkgb2YgdGVsbGluZyB0aGUgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UgInBlcmZvcm0gdGhlIG9wZXJhdGlvbnMgSSBhc2sgeW91IHRvIGRvIE4gdGltZXMiLiBBIGZvciBsb29wIGluIFIgYmVnaW5ucyB3aXRoIGFuIGBmb3IoKWAgc3RhdGVtZW50LCB3aGljaCBpcyBmb2xsb3dlZCBieSBhbiBvcGVuaW5nIGN1cmx5IGJyYWNlIGB7YCBpbiB0aGUgc2FtZSBsaW5lIC0gdGhpcyBpcyBlc2VudGlhbGx5ICpvcGVuaW5nIHRoZSBmb3ItbG9vcCouIEFmdGVyIHRoaXMsIHVzdWFsbHkgaW4gYSBuZXcgbGluZSwgeW91IHBsYWNlIHRoZSBjb2RlIHdoaWNoIHlvdSB3YW50IHRvIGV4ZWN1dGUuIFRoZW4sIGluIHRoZSBsYXN0IGxpbmUgeW91ICpjbG9zZSB0aGUgZm9yIGxvb3AqIGJ5IGFub3RoZXIgY3VybHkgYnJhY2UgYH1gLiBZb3UgY2FuIGV4ZWN1dGUgdGhlIGZvciBsb29wIGJ5IHBsYWNpbmcgdGhlIGN1cnNvciBlaXRoZXIgb24gdGhlIGZvciBzdGF0ZW1lbnQgKGZpcnN0IGxpbmUpIG9yIHRoZSBjbG9zaW5nIGJyYWNlIChsYXN0IGxpbmUpIGFuZCBleGVjdXRpbmcgaXQgYXMgYW55IG90aGVyIGNvZGUuIEJlbG93LCB5b3UgY2FuIHNlZSB0aGUgZm9yIGxvb3AgcHJpbnRpbmcgdGhlIHN0cmluZyBgIkhlbGxvIHdvcmxkISJgIDUgdGltZXMKCmBgYHtyfQpmb3IoaSBpbiAxOjUpIHsKICBwcmludCgiSGVsbG8gd29ybGQiKQp9CmBgYAoKVGhlIGBpYCBpbiB0aGUgZm9yIHN0YXRlbWVudHMgaXMgdGhlIHZhcmlhYmxlIHRoYXQgd2lsbCBzZXF1ZW50aWFsbHkgdGFrZSBhbGwgdGhlIHZhbHVlcyBvZiB0aGUgb2JqZWN0ICh1c3VhbGx5IGEgdmVjdG9yKSBzcGVjaWZpZWQgb24gdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgYGluYCBrZXl3b3JkLiBJbiBtYWpvcml0eSBvZiB0aGUgY2FzZXMsIHRoZSBvYmplY3QgaXMgYSBzZXF1ZW5jZSBvZiBpbnRlZ2VycywgYXMgaW4gdGhlIGV4YW1wbGUgYmVsb3csIHdoZXJlIGBpYCB0YWtlcyB0aGUgdmFsdWVzIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgdmVjdG9yIGAxOjVgIGFuZCBwcmludHMgaXQuCgpgYGB7cn0KZm9yKGkgaW4gMTo1KSB7CiAgcHJpbnQoaSkKfQpgYGAKCkEgZm9yIGxvb3AgY291bGQgYmUgdXNlZCB0byBhZGQgYSBjb25zdGFudCB0byBlYWNoIGVsZW1lbnQgb2YgYSB2ZWN0b3I6CgpgYGB7cn0KeCA8LSBjKDQsIDUsIDEsIDIsIDksIDgsIDAsIDUsIDMpCngKI2ZvciBhbGwgaW50ZWdlcnMgYmV0d2VlbiAxIGFuZCBsZW5ndGggb2YgdmVjdG9yIHg6CmZvcihpIGluIDE6bGVuZ3RoKHgpKSB7IAogIHhbaV0gPC0geFtpXSArIDUKfQp4CmBgYAoKSG93ZXZlciwgaW4gUiB0aGlzIGlzIHJlZHVuZGFudCwgYmVjYXVzZSBvZiAqKnZlY3Rvcml6YXRpb24qKiAoc2VlIHRoZSBbc2VjdGlvbiBvbiB2ZWN0b3JzXSgjdmVjdG9ycykgZnJvbSBjaGFwdGVyIDIpLiBUaGUgYWJvdmUgc3RhdGVtZW50IG9zIGVxdWl2YWxlbnQgdG86CgpgYGB7cn0KeCA8LSBjKDQsIDUsIDEsIDIsIDksIDgsIDAsIDUsIDMpCnggKyA1CmBgYAoKVGhpcyBpcyBub3Qgb25seSBzaW1wbGVyLCBidXQgYWxzbyBtb3JlIGVmZmljaWVudC4gCgpBbm90aGVyLCBtb3JlIHByYWN0aWNhbCBhcGxpY2F0aW9uIG9mIHRoZSBmb3IgbG9vcCBjb3VsZCBleGFtaW5lIGFsbCBjb2x1bW5zIG9mIGEgZGF0YSBmcmFtZSBmb3IgbWlzc2luZyB2YWx1ZXMsIHNvIHRoYXQ6CgpgYGB7cn0KZGV2IDwtIHJlYWQuY3N2KCJkYXRhL3VuX2RhdGEvZGV2MjAxOC5jc3YiLAogICAgICAgICAgICAgICAgc3RyaW5nc0FzRmFjdG9ycyA9IEZBTFNFKQptaXNzaW5nIDwtIG51bWVyaWMoKSAjY3JlYXRlIGVtcHR5IG51bWVyaWMgdmVjdG9yCmZvciAoaSBpbiAxOmxlbmd0aChkZXYpKXsKICBtaXNzaW5nW2ldIDwtIHN1bShpcy5uYShkZXZbLGldKSkgI2dldCBzdW0gb2YgbWlzc2luZyBmb3IgaXRoIGNvbHVtbgogIG5hbWVzKG1pc3NpbmcpW2ldIDwtIG5hbWVzKGRldilbaV0gI25hbWUgaXQgd2l0aCBpdGggY29sdW1uIG5hbWUKfQptaXNzaW5nCmBgYAoKRnJvbSB0aGlzLCB3ZSBjYW4gc2VlIHRoYXQgdGhlcmUgYXJlIDAgbWlzaXNuZyB2YWx1ZXMgaW4gdGhlIGNvdW50cnkgbmFtZSwgMSBtaXNzaW5nIHZhbHVlIGluIHRoZSBleHBlY3RlZCB5ZWFycyBvZiBzY2hvb2xpbmcgdmFyaWFibGUgYW5kLCAzIG1pc3NpbmcgdmFsdWVzIGluIGduaSBhbmQgbGlmZSBleHBlY3RhbmN5IGFuZCA1IG1pc3NpbmcgdmFsdWVzIGluIG1lYW4geWVhcnMgb2Ygc2Nob29saW5nLgoKCgpXaGlsZSB0aGlzIGlzIGEgYml0IG1vcmUgdXNlZnVsIHRoYW4gdGhlIHByZXZpb3VzIGV4YW1wbGUsIFIgc3RpbGwgb2ZmZXJzIGEgc2hvcnRoYW5kIG1ldGhvZCBmb3Igc3VjaCBwcm9ibGVtcywgd2hpY2ggaXMgZGlzY3Vzc2VkIGluIG1vcmUgZGV0YWlsIGluIHRoZSBbbGFzdCBwYXJ0IG9mIHRoaXMgY2hhcHRlcl0oI2FwcGx5LWZhbWlseSkuIEluIGdlbmVyYWwsIGR1ZSB0byB0aGUgcGhlbm9tZW5hIG9mIHZlY3Rvcml6YXRpb24sIGZvciBsb29wcyBhcmUgcmFyZWx5IHVzZWQgaW4gc2ltcGxlIGRhdGEgYW5hbHlzaXMgaW4gUi4gSG93ZXZlciwgdGhleSBhcmUgYSBjb3JlIGVsZW1lbnQgb2YgcHJvZ3JhbW1pbmcgYXMgc3VjaCwgdGhlcmVmb3JlIGl0J3MgaW1wb3J0YW50IHRvIHVuZGVyc3RhbmQgdGhlbS4gSW4gZmFjdCwgdmVjdG9yaXphdGlvbiBpcyBtYWRlIHBvc3NpYmxlIG9ubHkgYmVjYXVzZSBvZiBmb3IgbG9vcHMgYmVpbmcgdXNlZCBieSBSIGluIHRoZSBiYWNrZ3JvdW5kIC0gc2ltcGx5IHRoZWlyIGZhc3RlciBhbmQgbW9yZSBlZmZpY2llbnQgdmVyc2lvbnMuCgoKIyMjIElmIHN0YXRlbWVudHMgey19CgpJZiBzdGF0ZW1lbnRzIGFyZSBhbm90aGVyIGNydWNpYWwgcHJvZ3JhbW1pbmcgY29uY2VwdC4gVGhleSBlc3NlbnRpYWxseSBhbGxvdyBwZXJmb3JtaW5nIGNvbXB1dGF0aW9uICpjb25kaXRpb25hbGx5KiBvbiBhIGxvZ2ljYWwgc3RhdGVtZW50LiBJbiBvdGhlciB3b3JkcywgZGVwZW5kaW5nIG9uIGEgW2xvZ2ljYWwgZXhwcmVzc2lvbl0obG9naWNhbC12YWx1ZXMtYW5kLW9wZXJhdG9ycykgYW4gb3BlcmF0aW9uIGlzIHBlcmZvcm1lZCBvciBub3QuIElmIGxvb3BzIGluIFIgYXJlIGNvbnN0cnVjdGVkIGluIHRoZSBmb2xsb3dpbmcgd2F5OgoKCgoKV2hlcmUgYGxvZ2ljYWxfZXhwcmVzc2lvbmAgbXVzdCBhbiBleHByZXNzaW9uIHRoYXQgZXZhbHVhdGVzIHRvIGEgbG9naWNhbCB2YWx1ZSwgZm9yIGV4YW1wbGUgYFggPiA1YCwgYGNvdW50cnkgPT0gIkZyYW5jZSJgIG9yIGBpcy5uYSh4KWAuIGBvcGVyYXRpb25zYCBhcmUgcGVyZm9ybWVkIGlmIGFuZCBvbmx5IGlmIHRoZSBgbG9naWNhbF9leHByZXNzaW9uYCBldmFsdWF0ZXMgdG8gYFRSVUVgLiBUaGUgc2ltcGxlcyBwb3NzaWJsZSBleGFtcGxlIHdvdWxkIGJlCgpgYGB7cn0KeCA8LSAyCmlmICh4ID4gMCkgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIDAiKQp9Cgp4IDwtIC0yCmlmICh4ID4gMCkgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIDAiKQp9CmBgYAoKCklmIGlzIG5hdHVyYWxseSBjb21wbGVtZW50ZWQgYnkgdGhlIGBlbHNlYCBjbGF1c2UsIGkuZS4gdGhlIG9wZXJhdGlvbnMgdGhhdCBzaG91bGQgYmUgcGVyZm9ybWVkIG90aGVyd2lzZS4gVGhlIGdlbmVyYWwgZm9ybSBvZiBzdWNoIHN0YXRlbWVudCBpczoKCgoKCkluIHRoaXMgY2FzZSwgUiBmaXJzdCBjaGVja3MgaWYgdGhlIGBsb2dpY2FsX2V4cHJlc3Npb25gIGV2YWx1YXRlcyB0byBgVFJVRWAsIGFuZCBpZiBpdCBkb2Vzbid0LCBwZXJmb3JtcyB0aGUgYG90aGVyX29wZXJhdGlvbnNgLiBGb3IgZXhhbXBsZToKCmBgYHtyfQp4IDwtIC0yCmlmICh4ID4gMCkgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIDAiKQp9IGVsc2UgewogIHByaW50KCJ0aGUgdmFsdWUgaXMgbGVzcyBvciBlcXVhbCB0aGFuIDAiKQp9CmBgYAoKRmluYWxseSwgYGVsc2UgaWZgIGFsbG93cyB0byBwcm92aWRlIGFub3RoZXIgc3RhdGVtZW50IHRvIGJlIGV2YWx1YXRlZC4gVGhlIGdlbmVyYWwgZm9ybSBvZiBzdWNoIHN0YXRlbWVudCB3b3VsZCBiZToKCgoKCkhlcmUsIFIgZmlyc3QgY2hlY2tzIHRoZSBgbG9naWNhbF9zdGF0ZW1lbnRgLCBpZiBpdCdzIGBGQUxTRWAgdGhlbiBpdCBwcm9jZWVkcyB0byBjaGVjayB0aGUgYG90aGVyX2xvZ2ljYWxfc3RhdGVtZW50YC4gSWYgdGhlIHNlY29uZCBvbmUgaXMgYFRSVUVgIGlmIHBlcmZvcm1zIHRoZSBgb3RoZXJfb3BlcmF0aW9uYCBhbmQgaWYgaXQncyBgRkFMU0VgIGl0IHByb2NlZWRzIHRvIHBlcmZvcm0gdGhlIGB5ZXRfYW5vdGhlcl9vcGVyYXRpb25gLiBBbiBleHRlbnNpb24gb2YgdGhlIHByZXZpb3VzIGV4YW1wbGU6CgpgYGB7cn0KeCA8LSAyCmlmICh4ID4gMCkgewogIHByaW50KCJUaGUgdmFsdWUgaXMgcG9zaXRpdmUiKQp9IGVsc2UgaWYgKHggPCAwKSB7CiAgcHJpbnQoIlRoZSB2YWx1ZSBpcyBuZWdhdGl2ZSIpIAp9IGVsc2UgewogIHByaW50KCJUaGUgdmFsdWUgaXMgMCIpCn0KYGBgCgpJRi1FTFNFIHN0YXRtZW50cyBjYW4gYmUgdXNlZCB0byBjb25kaXRpb25hbGx5IHJlcGxhY2UgdmFsdWVzLiBGb3IgZXhhbXBsZSwgc3VwcG9zZSB0aGF0IHdlIHdhbnQgdG8gY3JlYXRlIGEgdmFyaWFibGUgdGhhdCBpcyAxIHdoZW4gY291bnRyeSBpcyBGcmFuY2UgYW5kIDAgb3RoZXJ3aXNlLiBXZSBjb3VsZCBkbyB0aGF0IGJ5OgoKYGBge3J9CmRldiRmcmFuY2UgPC0gMApmb3IgKGkgaW4gMTpucm93KGRldikpIHsKICBpZiAoZGV2JGNvdW50cnlbaV0gPT0gIkZyYW5jZSIpIHsKICAgIGRldiRmcmFuY2VbaV0gPC0gMQogIH0KfQoKZGV2JGZyYW5jZVtkZXYkY291bnRyeSA9PSAiRnJhbmNlIl0KYGBgCgpBZ2FpbiwgYmVjYXVzZSBvZiB2ZWN0b3JpemF0aW9uLCBSIG9mZmVycyBhIHNob3J0aGFuZCBmb3IgdGhpcywgdGhyb3VnaCB0aGUgYGlmZWxzZSgpYCBmdW5jdGlvbjoKCmBgYHtyfQpkZXYkZnJhbmNlIDwtIGlmZWxzZShkZXYkY291bnRyeSA9PSAiRnJhbmNlIiwgMSwgMCkKZGV2JGZyYW5jZVtkZXYkY291bnRyeSA9PSAiRnJhbmNlIl0KYGBgCgoKV2hlbiB5b3UgbG9vayBhdCB0aGUgZG9jdW1lbnRhdGlvbiAgYD9pZmVsc2VgLCB5b3UgY2FuIHNlZSB0aGF0IGl0IHRha2VzIHRocmVlIGFyZ3VtZW50cyAtIGB0ZXN0YCwgYHllc2AgYW5kIGBub2AuIFRoZSBgdGVzdGAgYXJndW1lbnQgaXMgdGhlIGxvZ2ljYWwgY29uZGl0aW9uIC0gc2FtZSBhcyBgbG9naWNhbF9zdGF0ZW1lbnRgIGluIHRoZSBgaWZgLCB3aXRoIHRoZSBzbWFsbCBzdWJ0bGUgZGlmZmVyZW5jZSB0aGF0IGl0IGNhbiBldmFsdWF0ZSB0byBhIGxvZ2ljYWwgdmVjdG9yIHJhdGhlciB0aGFuIG9uZSBzaW5nbGUgbG9naWNhbCB2YWx1ZS4gVGhlIGB5ZXNgIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24gaWYgdGhlIGB0ZXN0YCBpcyBgVFJVRWAgYW5kIHRoZSBgbm9gIGFyZ3VtZW50IGlzIHJldHVybmVkIHdoZW4gYHRlc3RgIGlzIGBGQUxTRWAuIFlvdSBjYW4gZnVsbHkgc2VlIHRoaXMgaW4gdGhlIGV4YW1wbGUgYmVsb3c6CgoKYGBge3J9CmlmZWxzZShjKFRSVUUsIEZBTFNFLCBGQUxTRSwgVFJVRSksICJ5ZXMiLCAibm8iKQppZmVsc2UoYyhUUlVFLCBGQUxTRSwgRkFMU0UsIFRSVUUpLCAxLCAwKQpgYGAKCgojIyMgRnVuY3Rpb25zIHstfQoKUiBpcyBrbm93biBhcyBhICpmdW5jdGlvbmFsIHByb2dyYW1taW5nIGxhbmd1YWdlKiAtIGFzIHlvdSBoYXZlIGFscmVhZHkgc2VlbiwgYWxtb3N0IGFsbCBvZiB0aGUgb3BlcmF0aW9ucyBwZXJmb3JtZWQgYXJlIGRvbmUgdXNpbmcgZnVuY3Rpb25zLiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGNyZWF0ZSBvdXIgb3duLCBjdXN0b20gZnVuY3Rpb25zIGJ5IGNvbWJpbmluZyBvdGhlciBmdW5jdGlvbnMgYW5kIGRhdGEgc3RydWN0dXJlcy4gVGhpcyBpcyBkb25lIHVzaW5nIHRoZSBgZnVuY3Rpb24oKWAga2V5d29yZC4gVGhlIGdlbmVyYWwgc3ludGF4IG9mIGEgZnVuY3Rpb24gbG9va3MgYXMgZm9sbG93czoKCgoKCkFzIHdpdGggYW55IFIgb2JqZWN0LCB5b3UgY2FuIHVzZSBhbG1vc3QgYW55IG5hbWUgaW5zdGVhZCBvZiBgZnVuY3Rpb25fbmFtZWAuIEFyZ3VtZW50cyBhcmUgc2VwYXJldGVkIGJ5IGNvbW1hcyAoaW4gdGhlIGFib3ZlIGV4YW1wbGUgYGFyZzFgLCBgYXJnMmApIC0gdGhlc2UgYXJlIHRoZSBvYmplY3RzIHlvdSBwYXNzIHRvIHlvdXIgZnVuY3Rpb24gb24gd2hpY2ggeW91IHBlcmZvcm0gc29tZSBhcmJpdHJhcnkgYG9wZXJhdGlvbnNgLiBBZ2FpbiwgdGhlIGFyZ3VtZW50cyBjYW4gaGF2ZSBhcmJpdHJhcnkgbmFtZXMsIGJ1dCB5b3UgbmVlZCB0byB1c2UgdGhlbSB3aXRoaW4gdGhlIGZ1bmN0aW9uIGNvbnNpc3RlbnRseS4gRmluYWxseSwgbW9zdCBvZiB0aGUgZnVuY3Rpb25zIHJldHVybiBhIHZhbHVlIC0gdGhpcyBpcyB0aGUgbGFzdCBvYmplY3QgY2FsbGVkIHdpdGhpbiB0aGUgZnVuY3Rpb24gKGBvdXRwdXRgIGluIHRoZSBhYm92ZSBleGFtcGxlKS4KCkFmdGVyIGNyZWF0aW5nIHRoZSBmdW5jdGlvbiB3ZSBjYW4gcnVuIGl0LCBleGFjdGx5IHRoZSBzYW1lIHdheSBhcyB3ZSB3b3VsZCB3aXRoIGFueSBvZiBSJ3MgYnVpbHQtaW4gZnVuY3Rpb25zLiBBIHNpbXBsZSBleGFtcGxlIGNvdWxkIHJldHVybiB0aGUgbnVtYmVyIG9mIG1pc3NpbmcgdmFsdWVzIGluIGFuIG9iamVjdDoKCmBgYHtyfQpjb3VudF9uYSA8LSBmdW5jdGlvbih4KSB7CiAgc3VtKGlzLm5hKHgpKQp9Cgpjb3VudF9uYShkZXYkbXlzKQpgYGAKCldlIGNvdWxkIGFsc28gaW1wbGVtZW50IG91ciBvd24gc3VtbWFyeSBzdGF0aXN0aWNzIGZ1bmN0aW9uLCBzaW1pbGFyIHRvIGBkZXNjcmliZSgpYCBkaXNjdXNzZWQgaW4gW3RoZSBwcmV2aW91cyBjaGFwdGVyXSgjZXhwbG9yYXRvcnkpOgoKYGBge3J9CnN1bW1hcnlfc3RhdHMgPC0gZnVuY3Rpb24oeCkgewogIGlmIChpcy5udW1lcmljKHgpKSB7CiAgICBsaXN0KE1lYW4gPSBtZWFuKHgsIG5hLnJtID0gVFJVRSksIAogICAgICAgICAgICAgICAgU0QgPSBzZCh4LCBuYS5ybSA9IFRSVUUpLCAKICAgICAgICAgICAgICAgIElRUiA9IElRUih4LCBuYS5ybSA9IFRSVUUpKQogIH0gZWxzZSBpZiAoaXMuY2hhcmFjdGVyKHgpKSB7CiAgICBsaXN0KExlbmd0aCA9IGxlbmd0aCh4KSwgCiAgICAgICAgICAgICAgICAgIE1lYW5fTmNoYXIgPSBtZWFuKG5jaGFyKHgpKSkKICB9IGVsc2UgaWYgKGlzLmZhY3Rvcih4KSkgewogIGxpc3QoTGVuZ3RoID0gbGVuZ3RoKHgpLCAKICAgICAgIE5sZXZlbHMgID0gbGVuZ3RoKGxldmVscyh4KSkpCiAgfQp9CmBgYAoKTGV0J3Mgd2FsayB0aHJvdWdoIHRoZSBhYm92ZSBmdW5jdGlvbiBHaXZlbiBhIHZlY3RvciBgeGAsIHRoZSBmdW5jdGlvbiA6CjEuIENoZWNrcyB3aGV0aGVyIGB4YCBpcyBhIG51bWVyaWMgdmVjdG9yLiBJZiBzbywgcmV0dXJucyBhIGxpc3Qgb2YgaXQncyBtZWFuLCBzdGFuZGFyZCBkZXZpYXRpb24gYW5kIGludGVycXVhcnRpbGUgcmFuZ2UuCjIuIEVsc2UsIGNoZWNrcyBpZiBgeGAgaXMgYSBjaGFyYWN0ZXIgdmVjdG9yLiBJZiBzbywgcmV0dXJucyBhIGxpc3QgY29udGFpbm5nIGl0cyBsZW5ndGggYW5kIGF2ZXJhZ2UgbnVtYmVyIG9mIGNoYXJhY3RlcnMuCjMuIEVsc2UsIGNoZWNrcyBpZiBgeGAgaXMgYSBmYWN0b3IuIElmIHNvIHJldHVybnMgYSBsaXN0IGNvbnRhaW5pbmcgaXRzIGxlbmd0aCBhbmQgYXZlcmFnZSBudW1iZXIgb2YgY2hhcmFjdGVyLgoKV2UgY2FuIHNlZSBob3cgaXQgd29ya3MgYmVsb3c6CgpgYGB7cn0Kc3VtbWFyeV9zdGF0cyhjKDEsIDIsIDMsIDEwKSkKc3VtbWFyeV9zdGF0cyhkZXYkY291bnRyeSkKc3VtbWFyeV9zdGF0cyhhcy5mYWN0b3IoZGV2JGNvdW50cnkpKQpgYGAKCgojIyMjIEtleXdvcmQgYXJndW1lbnRzIHstfQoKTWFueSBvZiB0aGUgZnVuY3Rpb25zIHVzZWQgaW4gUiBjb21lIHdpdGggc28tY2FsbGVkICpkZWZhdWx0KiBhcmd1bWVudHMgLSB0aGlzIHdhcyBhbHJlYWR5IG1lbnRpb25lZCBpbiBbc29ydGluZ10oI3NvcnRpbmcpLiBXaGVuIGRlZmluaW5nIG91ciBvd24gZnVuY3Rpb25zLCB3ZSBjYW4gbWFrZSB1c2Ugb2YgdGhhdCBmdW5jdGlvbmFsaXR5IGFzIHdlbGwuIEZvciBleGFtcGxlLCB0aGUgYGNvdW50X25hYCBleGFtcGxlIGNhbiBiZSBtb2RpZmllZCBpbiB0aGUgZm9sbG93aW5nIHdheToKCmBgYHtyfQpjb3VudF9uYSA8LSBmdW5jdGlvbih4LCBwcm9wb3J0aW9uID0gVFJVRSkgewogIG51bV9uYSA8LSBzdW0oaXMubmEoeCkpCiAgaWYgKHByb3BvcnRpb24gPT0gVFJVRSkgewogICAgbnVtX25hL2xlbmd0aCh4KQogIH0gZWxzZSB7CiAgICBudW1fbmEKICB9Cn0KYGBgCgpUaGUgYHByb3BvcnRpb25gIGFyZ3VtZW50IGNvbnRyb2xzIHdoZXRoZXIgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhlIG51bWJlciBvZiBOQXMgYXMgdmFsdWUgb3IgYXMgcHJvcG9ydGlvbiBvZiB0aGUgZW50aXJlIHZlY3RvcjoKCmBgYHtyfQpjb3VudF9uYShkZXYkZ25pKQpjb3VudF9uYShkZXYkZ25pLCBwcm9wb3J0aW9uID0gVFJVRSkgI3NhbWUgYXMgYWJvdmUKY291bnRfbmEoZGV2JGduaSwgcHJvcG9ydGlvbiA9IEZBTFNFKQpgYGAKCgpUaGVyZSBhcmUgY291cGxlIG9mIHJlYXNvbnMgd2h5IGZ1bmN0aW9ucyBhcmUgZnJlcXVlbnRseSBhcHBsaWVkIHdoZW4gYW5hbHl6aW5nIGRhdGE6CjEuICpUbyBhdm9pZCByZXBldGl0aW9uKiAtIG9mdGVuLCB5b3UgbmVlZCB0byBwZXJmb3JtIHRoZSBzYW1lIG9wZXJhdGlvbiByZXBlYXRlZGx5IC0gc29tZXRpbWVzIG9uIGEgZGF0YWZyYW1lIHdpdGggdGVucyBvciBodW5kZXJkcyBvZiBjb2x1bW5zIG9yIGV2ZW4gbXVsdGlwbGUgZGF0YSBmcmFtZXMuIFRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgY29kZSBvdmVyIGFuZCBvdmVyIGFnYWluICh3aGljaCBhbHdheXMgaW5jcmVhc2VzIHRoZSBjaGFuY2Ugb2YgYW4gZXJyb3Igb2NjdXJpbmcpLgoyLiAqVG8gZW5oYW5jZSBjbGFyaXR5KiAtIHdoZW4geW91IHBlcmZvcm0gYSBsb25nIGFuZCBjb21wbGljYXRlZCBzZXJpZXMgb2Ygb3BlcmF0aW9ucyBvbiBhIGRhdGFzZXQsIGl0J3Mgb2Z0ZW4gbXVjaCBlYXNpZXIgdG8gYnJlYWsgaXQgZG93biBpbnRvIGZ1bmN0aW9ucy4gVGhlbiB3aGVuIHlvdSBuZWVkIHRvIGNvbWUgYmFjayB0byB5b3VyIGNvZGUgYWZ0ZXIgYSBsb25nIHRpbWUsIGl0IGlzIG9mdGVuIG11Y2ggZWFzaWVyIHRvIHNlZSBgcmVjb2RlX21pc3NpbmdfdmFsdWVzKGRhdGEpYCBhcHBlYXIgaW4geW91ciBjb2RlLCB3aXRoIHRoZSBgcmVjb3JkX21pc3NpbmdfdmFsdWVzYCBmdW5jdGlvbiBkZWZpbmVkIHNvbWV3aGVyZSBlbHNlLCBhcyB5b3UgZG9uJ3QgbmVlZCB0byBnbyB0aHJvdWdoIHlvdXIgY29kZSBzdGVwIGJ5IHN0ZXAsIGJ1dCBvbmx5IHVuZGVyc3RhbmQgd2hhdCBwYXJ0aWN1bGFyIGZ1bmN0aW9ucyByZXR1cm4uCjMgKlRvIGltcHJvdmUgcGVyZm9ybWFuY2UqIC0gd2hpbGUgbW9zdCBvZiB0aGUgb3BlcmF0aW9ucyB3ZSd2ZSBzZWVuIGluIFIgdGFrZSBmcmFjdGlvbnMgb2Ygc2Vjb25kcywgbGFyZ2VyIGRhdGEgY2FuIG9mdGVuIGxlYWQgdG8gbG9uZ2VyIGNvbXB1dGF0aW9uIHRpbWVzLiBGdW5jdGlvbnMgY2FuIGJlIGNvbWJpbmVkIHdpdGggb3RoZXIgdG9vbHMgdG8gbWFrZSBjb21wdXRhdGlvbiBtb3JlIGVsZWdhbnQgYW5kIHF1aWNrZXIgLSBzb21lIG9mIHRoZXNlIG1ldGhvZHMgYXJlIGRpc2N1c3NlZCBpbiB0aGUgbmV4dCBzZWN0aW9uLgoKCiMjIyBTYXBwbHkgey19CgpSZWNhbGwgdGhlIGNvZGUgd2UgdXNlZCB0byBjaGVjayBlYWNoIGNvbHVtbiBvZiBvdXIgZGF0YSBmcmFtZSBmb3IgbWlzc2luZ25lc3MgaW4gdGhlIFtmb3IgbG9vcHMgc2VjdGlvbl0oZm9yLWxvb3BzKToKCmBgYHtyfQptaXNzaW5nIDwtIG51bWVyaWMoKSAjY3JlYXRlIGVtcHR5IG51bWVyaWMgdmVjdG9yCmZvciAoaSBpbiAxOmxlbmd0aChkZXYpKXsKICBtaXNzaW5nW2ldIDwtIHN1bShpcy5uYShkZXZbLGldKSkgI2dldCBzdW0gb2YgbWlzc2luZyBmb3IgaXRoIGNvbHVtbgogIG5hbWVzKG1pc3NpbmcpW2ldIDwtIG5hbWVzKGRldilbaV0gI25hbWUgaXQgd2l0aCBpdGggY29sdW1uIG5hbWUKfQpgYGAKCldlIGNvdWxkIHJlLXdyaXRlIGl0IHVzaW5nIG91ciBuZXcga25vd2xlZGdlIG9mIGZ1bmN0aW9ucywgc3VjaCB0aGF0OgoKYGBge3J9CmNvdW50X25hIDwtIGZ1bmN0aW9uKHgpIHsKICBzdW0oaXMubmEoeCkpCn0KCm1pc3NpbmcgPC0gbnVtZXJpYygpCmZvciAoaSBpbiAxOmxlbmd0aChkZXYpKSB7CiAgbWlzc2luZ1tpXSA8LSBjb3VudF9uYShkZXZbLGldKQogIG5hbWVzKG1pc3NpbmcpW2ldIDwtIG5hbWVzKGRldilbaV0KfQptaXNzaW5nCmBgYAoKV2hpbGUgdGhpcyBtYXkgbG9vayBhIGJpdCBtb3JlIGZhbmN5LCBpbiBmYWN0IG1vcmUgY29kZSB3YXMgdXNlZCB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uIGFuZCBpdCBkb2Vzbid0IGRpZmZlciB0b28gbXVjaCBpbiB0ZXJtcyBvZiBjbGFyaXR5LiBUaGUgZXhhY3Qgc2FtZSByZXN1bHQgY2FuIGJlIGFjaGlldmVkIHVzaW5nIHRoZSBgc2FwcGx5KClgIGZ1bmN0aW9uLiBgc2FwcGx5KClgIHRha2VzIHR3byBhcmd1bWVudHMgLSBhbiBSIG9iamVjdCwgc3VjaCBhcyBhIHZlY3RvciBhbmQgYSBkYXRhIGZyYW1lIGFuZCBhIGZ1bmN0aW9uLiBUaGVuLCBpdCBhcHBsaWVzIHRoZSBmdW5jdGlvbiB0byBlYWNoIGVsZW1lbnQgb2YgdGhpcyBvYmplY3QgKGkuZS4gdmFsdWUgaW4gY2FzZSBvZiB2ZWN0b3JzLCBjb2x1bW4vdmFyaWFibGUgaW4gY2FzZSBvZiBkYXRhIGZyYW1lcykuIAoKYGBge3J9CnNhcHBseShkZXYsIGNvdW50X25hKQpgYGAKClRoZSByZXN1bHQgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyBpbiB0aGUgcHJldmlvdXMgY2FzZS4gYHNhcHBseSgpYCB1c2VkIHRoZSBgY291bnRfbmFgIGZ1bmN0aW9uIG9uIGVhY2ggY29sdW1ucyBvZiB0aGUgYGRldmAgZGF0YXNldC4KCldoZW4gdXNpbmcgc2hvcnQsIHNpbXBsZSBmdW5jdGlvbnMsIGBzYXBwbHkoKWAgY2FuIGJlIGV2ZW4gbW9yZSBjb25jaXNlLCBhcyB3ZSBjYW4gZGVmaW5lZCBvdXIgZnVuY3Rpb24gd2l0aG91dCBnaXZpbmcgaXQgYSBuYW1lLiBJbiB0aGUgZXhhbXBsZSBiZWxvdywgaW5zdGVhZCBvZiBkZWZpbmluZyBgY291bnRfbmFgIHNlcGFyYXRlbHksIHdlIGRlZmluZSBpdCBkaXJlY3RseSB3aXRoaW4gdGhlIGBzYXBwbHkoKWAgY2FsbCAoaS5lLiBpbnNpZGUgdGhlIHBhcmVudGhlc2VzKS4gVGhpcyB5aWVsZHMgdGhlIHNhbWUgcmVzdWx0LiAKCmBgYHtyfQpzYXBwbHkoZGV2LCBmdW5jdGlvbih4KSBzdW0oaXMubmEoeCkpKQpgYGAKCgpDb25zaWRlciB0aGUgZnVuY3Rpb24gYmVsb3cuIFdoYXQgZG8geW91IGV4cGVjdCBpdCB0byByZXR1cm4/IFRyeSBnb2luZyB0aHJvdWdoIGVhY2ggZWxlbWVudCBvZiB0aGUgY29kZSBzZXBhcmF0ZWx5LiBZb3UgY2FuIGNoZWNrIGhvdyB0aGUgYHJvd1N1bXNgIGNvbW1hbmQgd29ya3MgYnkgdHlwaW5nIGA/cm93U3Vtc2AgaW50byB0aGUgUiBjb25zb2xlLgoKYGBge3J9CnF1YXJ0aWxlIDwtIGZ1bmN0aW9uKHgpIHsKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgYygwLjI1LCAwLjUsIDAuNzUpLCBuYS5ybSA9IFRSVUUpCiAgY29tcGFyaXNvbnMgPC0gc2FwcGx5KHF1YW50aWxlcywgZnVuY3Rpb24oeSkgeSA8PSB4KQogIHJvd1N1bXMoY29tcGFyaXNvbnMpICsgMQp9CmBgYAoKVGhlIGZ1bmN0aW9uIHRha2VzIGEgdmVjdG9yIGFzIGlucHV0IGFuZCBjb21wdXRlcyB0aHJlZSBxdWFudGlsZXMgb2YgaXRzIHZhbHVlcyAtIDI1JSwgNTAlLCA3NSUuIFlvdSBtYXkgcmVjYWxsIGZyb20gdGhlIFtwcmV2aW91cyBjaGFwdGVyXSgjZXhwbG9yYXRvcnkpIHRoYXQgcXVhbnRpbGVzIGFyZSBjdXQgcG9pbnRzIHRoYXQgZGl2aWRlIGEgdmFyaWFibGUgaW50byByYW5nZXMgb2YgZXF1YWwgcHJvcG9ydGlvbnMgaW4gdGhlIGRhdGEgc2V0LiBUaGUgcmVzdWx0aW5nIGBxdWFudGlsZXNgIHZlY3RvciBjb25zaXN0cyBvZiB0aHJlZSB2YWx1ZXMsIGNvcnJlc3BvbmRpbmcgd2l0aCB0aHJlIHRocmVlIHF1YW50aWxlcy4gV2UgdGhlbiB1c2UgYHNhcHBseWAgb24gdGhlc2UgdGhyZWUgdmFsdWVzIHRvIGNvbXBhcmUgZWFjaCBvZiB0aGVtIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBgeGAgdmVjdG9yLiBBcyBhIHJlc3VsdCwgd2Ugb2J0YWluIGEgMyB4IG4gYXJyYXksIHdoZXJlIG4gaXMgbGVuZ3RoIG9mIGB4YC4gRm9yIGVhY2ggb2YgdGhlIHZhbHVlcyBvZiBgeGAgd2UgZ2V0IHRocmVlIGxvZ2ljYWwgdmFsdWVzLiBFYWNoIG9mIHRoZW0gaXMgYFRSVUVgIHdoZW4gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgb2YgeCB3YXMgbGFyZ2VyIHRoYW4gdGhlIHF1YW50aWxlIGFuZCBgRkFMU0VgIGlmIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIG9mIHggd2FzIGxvd2VyIHRoYW4gdGhlIHF1YW50aWxlLiBXZSBjYW4gdGhlbiBzdW0gdGhlIHJlc3VsdHMgYnkgcm93LCB1c2luZyBgcm93U3Vtc2AuIE91ciBmaW5hbCByZXN1bHQgaXMgYSB2ZWN0b3Igd2l0aCB2YWx1ZXMgb2YgMCwgMSBhbmQgMi4gSXRzIHZhbHVlIGlzIDAgaWYgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgb2YgeCB3YXMgbGVzcyB0aGFuIGFsbCBxdWFydGlsZXMsIDEgaWYgaXQgd2FzIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiB0aGUgLjI1LCAyIGlmIGl0IHdhcyBncmVhdGVyIG9yIGVxdWFsIHRoYW4gMC41IGFuZCAzIGlmIGl0IHdhcyBncmVhdGVyIG9yIGVxdWFsIHRoYW4gYWxsIG9mIHRoZW0uIFdlIHRoZW4gZmluYWxseSBhZGQgMSB0byBlYWNoLCBzbyB0aGF0IHRoZXkgY29ycmVzcG9uZCB0byB0cnVlIHF1YXJ0aWxlIG51bWJlcnMgKDFzdCBxdWFydGlsZSwgcmF0aGVyIHRoYW4gMHRoIHF1YXJ0aWxlLCBldGMpLgoKV2UgY2FuIHRoZW4gdXNlIHRoZSBgc3BsaXRgIGZ1bmN0aW9uLCB3aGljaCB0YWtlcyBhIGRhdGEgZnJhbWUgYW5kIGEgdmVjdG9yIGFzIGlucHV0IGFuZCBzcGxpdHMgdGhlIGRhdGEgZnJhbWUgaW50byBzZXZlcmFsIHBhcnRzLCBlYWNoIHdpdGggdGhlIHNhbWUgdmFsdWUgb2YgdGhlIHNwbGl0dGluZyB2YXJpYWJsZS4gQXMgYSByZXN1bHQsIHdlIG9idGFpbiBgZGV2X3NwbGl0YCBkYXRhc2V0LCB3aGljaCBzdG9yZXMgNCBkYXRhIGZyYW1lcywgZWFjaCBvbmx5IHdpdGggY291bnRyaWVzIGluIHRoZSByZXNwZWN0aXZlIHF1YW50aWxlIG9mIGV4cGVjdGVkIHllYXJzIG9mIHNjaG9vbGluZy4KCmBgYHtyfQpkZXZfc3BsaXQgPC0gc3BsaXQoZGV2LCBxdWFydGlsZShkZXYkZXlzKSkKaGVhZChkZXZfc3BsaXRbWzFdXSkKYGBgCgpZb3UgY2FuIHRoZW4gbG9vayBhdCBkZXNjcmlwdGl2ZSBzdGF0aXN0aWNzIG9mIGVhY2ggb2YgdGhlIHF1YXJ0aWxlcyB1c2luZzoKCmBgYHtyfQpzYXBwbHkoZGV2X3NwbGl0LCBzdW1tYXJ5KQpgYGAKCgpXaGlsZSB3b3JraW5nIGFuIFIgYW5kIGxvb2tpbmcgZm9yIGhlbHAgb25saW5lLCB5b3UgbWF5IHN0dW1ibGUgdXBvbiBvdGhlciB2YXJpYW50cyBvZiB0aGUgYHNhcHBseSgpYCBmdW5jdGlvbnMuIEVzc2VudGlhbGx5LCBhbGwgUiBmdW5jdGlvbnMgd2l0aCBgYXBwbHlgIGluIHRoZWlyIG5hbWUgc2VydmUgdGhlIHNhbWUgcHVycG9zZSAtIGFwcGx5aW5nIGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGFuIG9iamVjdC4gYGxhcHBseSgpYCBpcyBhIGxlc3MgdXNlciBmcmllbmR5IHZlcnNpb24gb2YgYHNhcHBseSgpYCwgd2hpY2ggYWx3YXlzIHJldHVybnMgYSBsaXN0LCBub3QgYSB2ZWN0b3IuIGB2YXBwbHkoKWAgZm9yY2VzIHRoZSB1c2VyIHRvIGRldGVybWluZSB0aGUgdHlwZSBvZiB0aGUgb3V0cHV0LCB3aGljaCBtYWtlcyBpdHMgYmVoYXZpb3VyIG1vcmUgcHJlZGljdGlibGUgYW5kIHNsaWdodGx5IGZhc3Rlci4gYHRhcHBseSgpYCBhcHBsaWVzIHRoZSBmdW5jdGlvbiB0byBkYXRhIGZyYW1lIGJ5IGdyb3VwIGRldGVybWluZWQgYnkgYW5vdGhlciB2YXJpYWJsZSAtIGEgc2ltaWxhciBwcm9jZWR1cmUgdG8gd2hhdCB3ZSBkaWQgdXNpbmcgYHNwbGl0KClgIGFuZCBgc2FwcGx5KClgLCBidXQgaW4gbGVzcyBzdGVwcy4KCiMjIFN1bW1hcnkKCi0qRm9yIGxvb3BzKiBhbGxvdyB0byBwZXJmb3JtIHRoZSBzYW1lIG9wZXJhdGlvbiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgcmFuZ2Ugb2YgdmFsdWVzIG9mIG9uZSB2YXJpYWJsZS4gVGhleSBhcmUgY29uc3RydWN0ZWQgdXNpbmcgYGZvcihpIGluIHZlY3RvcilgLiBUaGVpciB1c2UgaW4gUiBpcyByZWxhdGl2ZWx5IHJhcmUgZHVlIHRvIHZlY3Rvcml6YXRpb24uCgotKklmIHN0YXRlbWVudHMqIGNvbnRyb2wgd2hldGhlciBuYSBvcGVyYXRpb24gaXMgcGVyZm9ybWVkIGRlcGVuZGluZyBvbiB0aGUgdmFsdWUgb2YgYSBsb2dpY2FsIGNvbmRpdGlvbi4gVG8gY29uZGl0aW9uYWxseSBtb2RpZnkgdmFsdWVzIG9mIHZlY3RvcnMsIHVzZSBgaWZlbHNlKHRlc3QsIHllcywgbm8pYAoKLSpGdW5jdGlvbnMqIGNhbiBiZSBjcmVhdGVkIGJ5IHVzZXIgdG8gY29tYmluZSBtdWx0aXBsZSBvcGVyYXRpb25zIGludG8gc2hvcnRlciBwaWVjZXMgb2YgY29kZSwgd2hpY2ggYWxsb3dzIHRvIGF2b2lkIHJlcGV0aXRpb24uIFRoZXkgdGFrZSBvbmUgb3IgbWFueSBhcmd1bWVudHMgYW5kIHJldHVybiBvbmUgdmFsdWUuCgotYHNhcHBseSgpYCBpcyBhIGZ1bmN0aW9uIHVzZWQgZm9yIGFwcGx5aW5nIGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGEgdmVjdG9yIG9yIGVhY2ggY29sdW1uIG9mIGEgZGF0YSBmcmFtZS4gWW91IG1heSBmaW5kIG90aGVyIHZlcnNpb25zIG9mIGl0LCB3aXRoICphcHBseSogaW4gdGhlaXIgbmFtZSwgd2hpY2ggcGVyZm9ybSB0aGUgc2FtZSB0YXNrLCBidXQgd2l0aCBzbGlnaHQgYWx0ZXJhdGlvbi4KCgoKIyMjIEZ1bmN0aW9ucyBsaXN0IHstfQoKCgoKIyMgRXhlcmNpc2VzCgoxLiBTdXBwb3NlIHdlIHBhc3MgYSBkYXRhIGZyYW1lIHRvIHRoZSBgc3VtbWFyeV9zdGF0c2AgZnVuY3Rpb24uIFdoYXQgd291bGQgdGhlIGZ1bmN0aW9uIHJldHVybj8gV2h5PwoKCgoKCjIuIFVzZSB0aGUgYHN1bW1hcnlfc3RhdHNgIGZ1bmN0aW9uIHRvIHN1bW1hcml6ZSBlYWNoIHZhcmlhYmxlIGZyb20gdGhlIGBpcmlzYCBkYXRhc2V0LiBZb3UgY2FuIGxvYWQgaXQgdXNpbmcgYGRhdGEoaXJpcylgLgoKCgoKCjMuIFVzZSBhIGZvciBsb29wIHRvIGNyZWF0ZSBhIHNjYXR0ZXIgcGxvdCBvZiBgU2VwYWwuV2lkdGhgIGFuZCBgU2VwYWwubGVuZ3RoYCBhdHRyaWJ1dGVzIGZyb20gdGhlIGBpcmlzYCBkYXRhc2V0IHdpdGggZWFjaCBmbG93ZXIgc3BlY2llcyAoc3BlY2lmaWVkIGJ5IHRoZSBgU3BlY2llc2AgdmFyaWFibGUpIGhhdmluZyBhIGRpZmZlcmVudCBtYXJrZXIgYW5kIGNvbG9yLiBUbyBkbyB0aGF0LCB1c2UgdGhlIHNrZWxldG9uIGNvZGUgYmVsb3cuIAoKCgoKCgoKCjQuIENyZWF0ZSBmdW5jdGlvbiBjYWxsZWQgYGRldGVjdF9vdXRsaWVyc2AgdGhhdCB3aWxsIHRha2UgYSB2ZWN0b3IgYW5kIGEgcXVhbnRpbGUgdGhyZXNob2xkIGFzIGFuIGFyZ3VtZW50IGFuZCB3aWxsIHJldHVybiB0aGUgaW5kaWNlcyBvZiB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGNvbnNpZGVyZWQgb3V0bGllcnMgZ2l2ZW4gdGhpcyB0aHJlc2hvbGQgKGkuZS4gbGllIGFib3ZlIHRoZSBudGggcXVhbnRpbGUgb3IgYmVsb3cgMTAwIC0gbnRoIHF1YW50aWxlKS4KCgoKCjUuIEV4dGVuZCB0aGlzIGZ1bmN0aW9uIHNvIHRoYXQgaXQgcmV0dXJucyByb3dzIG9mIHRoZSBkYXRhIGZyYW1lIHRoYXQgY29udGFpbiBvdXRsaWVycyBpbiAqYW55KiBvZiB0aGUgKG51bWVyaWNhbCkgdmFyaWFibGVzLgoKCgoKNi4gQXBwbHkgdGhlIGZ1bmN0aW9uIGZyb20gdGhlIGFib3ZlIGV4ZXJjaXNlIHRvIHRoZSBgZGV2YCBkYXRhc2V0LiBXaGljaCBjb3VudHJpZXMgY2FuIGJlIGNvbnNpZGVyZWQgb3V0bGllcnM/CgoKCgo3LiBSZWNhbGwgdGhlIGBxdWFydGlsZWAgZnVuY3Rpb24gZnJvbSB0aGUgZXhhbXBsZXMgYWJvdmUuIENhbiB5b3UgZXh0ZW5kIGl0IHNvIHRoYXQ6IAoKYGBge3J9CnF1YXJ0aWxlIDwtIGZ1bmN0aW9uKHgpIHsKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgYygwLjI1LCAwLjUsIDAuNzUpLCBuYS5ybSA9IFRSVUUpCiAgY29tcGFyaXNvbnMgPC0gc2FwcGx5KHF1YW50aWxlcywgZnVuY3Rpb24oeSkgeSA8PSB4KQogIHJvd1N1bXMoY29tcGFyaXNvbnMpICsgMQp9CmBgYAoKCi0gaXQgc3BsaXRzIGEgdmFyaWFibGUgaW50byBhbiBhcmJpdGFyeSBudW1iZXIgb2YgcmFuZ2VzIHdpdGggZXF1YWwgcHJvcG9ydGlvbnMgKGZvciBleGFtcGxlIGludG8gW2RlY2lsZXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RlY2lsZSkpLgoKCgoKLSBpdCByZXR1cm5zIGEgc2Vuc2libGUgZGVmYXVsdCB3aGVuIGEgdmFsdWUgb2YgdGhlIHZlY3RvciBpcyBtaXNzaW5nLiBXaGF0IGNvdWxkIHN1Y2ggInNlbnNpYmxlIGRlZmF1bHQiIGJlPyBNYWtlIGl0IHRoZSBkZWZhdWx0IHZhbHVlIHdoZW4gc3BlY2lmeWluZyBmdW5jdGlvbiBhcmd1bWVudHMuCgoKCgotIFRyeSBhcHBseWluZyB5b3VyIG5ldyBmdW5jdGlvbiB0byB0aGUgYGRldmAgZGF0YXNldCBhbmQgc3BsaXR0aW5nIGl0IGludG8gcGFydHMgdXNpbmcgYHNwbGl0YC4gWW91IG1heSB0aGVuIGNvbXBhcmUgdGhlIGRlc2NyaXB0aXZlIHN0YXRpc3RpY3Mgb2YgZWFjaCBwYXJ0IHVzaW5nIHRoZSBgbGFwcGx5YCBmdW5jdGlvbi4KCgoKCipUaGUgc29sdXRpb25zIGZvciB0aGUgZXhlcmNpc2VzIHdpbGwgYmUgYXZhaWxhYmxlIGhlcmUgb24gYHIgY29uZmlnJGtleV9wcm9ncmFtbWluZ19jb25jZXB0c2AuKgoKCgoA');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = '05-key_programming_concepts.Rmd';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() =&gt; {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  "><i class="fa fa-save"></i> Chapter markdown</button>
<button class="btn btn-default" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/plain;base64,IycgIyMgRXhlcmNpc2VzCiMnIAojJyAxLiBTdXBwb3NlIHdlIHBhc3MgYSBkYXRhIGZyYW1lIHRvIHRoZSBgc3VtbWFyeV9zdGF0c2AgZnVuY3Rpb24uIFdoYXQgd291bGQgdGhlIGZ1bmN0aW9uIHJldHVybj8gV2h5PwojJyAKIycgCiMnIAojJyAKIycgCiMnIDIuIFVzZSB0aGUgYHN1bW1hcnlfc3RhdHNgIGZ1bmN0aW9uIHRvIHN1bW1hcml6ZSBlYWNoIHZhcmlhYmxlIGZyb20gdGhlIGBpcmlzYCBkYXRhc2V0LiBZb3UgY2FuIGxvYWQgaXQgdXNpbmcgYGRhdGEoaXJpcylgLgojJyAKIycgCiMnIAojJyAKIycgCiMnIDMuIFVzZSBhIGZvciBsb29wIHRvIGNyZWF0ZSBhIHNjYXR0ZXIgcGxvdCBvZiBgU2VwYWwuV2lkdGhgIGFuZCBgU2VwYWwubGVuZ3RoYCBhdHRyaWJ1dGVzIGZyb20gdGhlIGBpcmlzYCBkYXRhc2V0IHdpdGggZWFjaCBmbG93ZXIgc3BlY2llcyAoc3BlY2lmaWVkIGJ5IHRoZSBgU3BlY2llc2AgdmFyaWFibGUpIGhhdmluZyBhIGRpZmZlcmVudCBtYXJrZXIgYW5kIGNvbG9yLiBUbyBkbyB0aGF0LCB1c2UgdGhlIHNrZWxldG9uIGNvZGUgYmVsb3cuIAojJyAKIycgCiMnIAojJyAKIycgCiMnIAojJyAKIycgCiMnIDQuIENyZWF0ZSBmdW5jdGlvbiBjYWxsZWQgYGRldGVjdF9vdXRsaWVyc2AgdGhhdCB3aWxsIHRha2UgYSB2ZWN0b3IgYW5kIGEgcXVhbnRpbGUgdGhyZXNob2xkIGFzIGFuIGFyZ3VtZW50IGFuZCB3aWxsIHJldHVybiB0aGUgaW5kaWNlcyBvZiB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGNvbnNpZGVyZWQgb3V0bGllcnMgZ2l2ZW4gdGhpcyB0aHJlc2hvbGQgKGkuZS4gbGllIGFib3ZlIHRoZSBudGggcXVhbnRpbGUgb3IgYmVsb3cgMTAwIC0gbnRoIHF1YW50aWxlKS4KIycgCiMnIAojJyAKIycgCiMnIDUuIEV4dGVuZCB0aGlzIGZ1bmN0aW9uIHNvIHRoYXQgaXQgcmV0dXJucyByb3dzIG9mIHRoZSBkYXRhIGZyYW1lIHRoYXQgY29udGFpbiBvdXRsaWVycyBpbiAqYW55KiBvZiB0aGUgKG51bWVyaWNhbCkgdmFyaWFibGVzLgojJyAKIycgCiMnIAojJyAKIycgNi4gQXBwbHkgdGhlIGZ1bmN0aW9uIGZyb20gdGhlIGFib3ZlIGV4ZXJjaXNlIHRvIHRoZSBgZGV2YCBkYXRhc2V0LiBXaGljaCBjb3VudHJpZXMgY2FuIGJlIGNvbnNpZGVyZWQgb3V0bGllcnM/CiMnIAojJyAKIycgCiMnIAojJyA3LiBSZWNhbGwgdGhlIGBxdWFydGlsZWAgZnVuY3Rpb24gZnJvbSB0aGUgZXhhbXBsZXMgYWJvdmUuIENhbiB5b3UgZXh0ZW5kIGl0IHNvIHRoYXQ6IAojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpxdWFydGlsZSA8LSBmdW5jdGlvbih4KSB7CiAgcXVhbnRpbGVzIDwtIHF1YW50aWxlKHgsIGMoMC4yNSwgMC41LCAwLjc1KSwgbmEucm0gPSBUUlVFKQogIGNvbXBhcmlzb25zIDwtIHNhcHBseShxdWFudGlsZXMsIGZ1bmN0aW9uKHkpIHkgPD0geCkKICByb3dTdW1zKGNvbXBhcmlzb25zKSArIDEKfQoKIycgCiMnIAojJyAtIGl0IHNwbGl0cyBhIHZhcmlhYmxlIGludG8gYW4gYXJiaXRhcnkgbnVtYmVyIG9mIHJhbmdlcyB3aXRoIGVxdWFsIHByb3BvcnRpb25zIChmb3IgZXhhbXBsZSBpbnRvIFtkZWNpbGVzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZWNpbGUpKS4KIycgCiMnIAojJyAKIycgCiMnIC0gaXQgcmV0dXJucyBhIHNlbnNpYmxlIGRlZmF1bHQgd2hlbiBhIHZhbHVlIG9mIHRoZSB2ZWN0b3IgaXMgbWlzc2luZy4gV2hhdCBjb3VsZCBzdWNoICJzZW5zaWJsZSBkZWZhdWx0IiBiZT8gTWFrZSBpdCB0aGUgZGVmYXVsdCB2YWx1ZSB3aGVuIHNwZWNpZnlpbmcgZnVuY3Rpb24gYXJndW1lbnRzLgojJyAKIycgCiMnIAojJyAKIycgLSBUcnkgYXBwbHlpbmcgeW91ciBuZXcgZnVuY3Rpb24gdG8gdGhlIGBkZXZgIGRhdGFzZXQgYW5kIHNwbGl0dGluZyBpdCBpbnRvIHBhcnRzIHVzaW5nIGBzcGxpdGAuIFlvdSBtYXkgdGhlbiBjb21wYXJlIHRoZSBkZXNjcmlwdGl2ZSBzdGF0aXN0aWNzIG9mIGVhY2ggcGFydCB1c2luZyB0aGUgYGxhcHBseWAgZnVuY3Rpb24uCiMnIAojJyAKIycgCiMnIAojJyAqVGhlIHNvbHV0aW9ucyBmb3IgdGhlIGV4ZXJjaXNlcyB3aWxsIGJlIGF2YWlsYWJsZSBoZXJlIG9uIGByIGNvbmZpZyRrZXlfcHJvZ3JhbW1pbmdfY29uY2VwdHNgLioKIycgCiMnIAoA');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = '05-key_programming_concepts-exercises.R';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() =&gt; {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  "><i class="fa fa-save"></i> Chapter exercises</button>
<button class="btn btn-default" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/csv;base64,Y291bnRyeSxleXMsZ25pLGxleHAsbXlzCkFmZ2hhbmlzdGFuLDEwLjEsMTc0Niw2NC41LDMuOQpBbGJhbmlhLDE1LjIsMTIzMDAsNzguNSwxMC4xCkFsZ2VyaWEsMTQuNywxMzYzOSw3Ni43LDgKQW5kb3JyYSwxMy4zLDQ4NjQxLDgxLjgsMTAuMgpBbmdvbGEsMTEuOCw1NTU1LDYwLjgsNS4xCkFudGlndWEgYW5kIEJhcmJ1ZGEsMTIuNSwyMjIwMSw3Ni45LDkuMwpBcmdlbnRpbmEsMTcuNiwxNzYxMSw3Ni41LDEwLjYKQXJtZW5pYSwxMy4yLDkyNzcsNzQuOSwxMS44CkF1c3RyYWxpYSwyMi4xLDQ0MDk3LDgzLjMsMTIuNwpBdXN0cmlhLDE2LjMsNDYyMzEsODEuNCwxMi42CkF6ZXJiYWlqYW4sMTIuNCwxNTI0MCw3Mi45LDEwLjUKQmFoYW1hcywxMi44LDI4Mzk1LDczLjgsMTEuNQpCYWhyYWluLDE1LjMsNDAzOTksNzcuMiw5LjQKQmFuZ2xhZGVzaCwxMS4yLDQwNTcsNzIuMyw2LjEKQmFyYmFkb3MsMTUuMiwxNTkxMiw3OS4xLDEwLjYKQmVsYXJ1cywxNS40LDE3MDM5LDc0LjYsMTIuMwpCZWxnaXVtLDE5LjcsNDM4MjEsODEuNSwxMS44CkJlbGl6ZSwxMy4xLDcxMzYsNzQuNSw5LjgKQmVuaW4sMTIuNiwyMTM1LDYxLjUsMy44CkJodXRhbiwxMi4xLDg2MDksNzEuNSwzLjEKQm9saXZpYSAoUGx1cmluYXRpb25hbCBTdGF0ZSBvZiksMTQsNjg0OSw3MS4yLDkKQm9zbmlhIGFuZCBIZXJ6ZWdvdmluYSwxMy44LDEyNjkwLDc3LjMsOS43CkJvdHN3YW5hLDEyLjcsMTU5NTEsNjkuMyw5LjMKQnJhemlsLDE1LjQsMTQwNjgsNzUuNyw3LjgKQnJ1bmVpIERhcnVzc2FsYW0sMTQuNCw3NjM4OSw3NS43LDkuMQpCdWxnYXJpYSwxNC44LDE5NjQ2LDc0LjksMTEuOApCdXJraW5hIEZhc28sOC45LDE3MDUsNjEuMiwxLjYKQnVydW5kaSwxMS4zLDY2MCw2MS4yLDMuMQpDYWJvIFZlcmRlLDExLjksNjUxMyw3Mi44LDYuMgpDYW1ib2RpYSwxMS4zLDM1OTcsNjkuNiw0LjgKQ2FtZXJvb24sMTIuNywzMjkxLDU4LjksNi4zCkNhbmFkYSwxNi4xLDQzNjAyLDgyLjMsMTMuMwpDZW50cmFsIEFmcmljYW4gUmVwdWJsaWMsNy42LDc3Nyw1Mi44LDQuMwpDaGFkLDcuNSwxNzE2LDU0LDIuNApDaGlsZSwxNi41LDIxOTcyLDgwLDEwLjQKQ2hpbmEsMTMuOSwxNjEyNyw3Ni43LDcuOQpDb2xvbWJpYSwxNC42LDEyODk2LDc3LjEsOC4zCkNvbW9yb3MsMTEuMiwyNDI2LDY0LjEsNC45CkNvbmdvLDExLjYsNTgwNCw2NC4zLDYuNQpDb25nbyAoRGVtb2NyYXRpYyBSZXB1YmxpYyBvZiB0aGUpLDkuNyw4MDAsNjAuNCw2LjgKQ29zdGEgUmljYSwxNS40LDE0NzkwLDgwLjEsOC43CkNyb2F0aWEsMTUsMjMwNjEsNzguMywxMS40CkN1YmEsMTQuNCw3ODExLDc4LjcsMTEuOApDeXBydXMsMTQuNywzMzEwMCw4MC44LDEyLjEKQ3plY2hpYSwxNi44LDMxNTk3LDc5LjIsMTIuNwpDw7R0ZSBkJ0l2b2lyZSw5LjYsMzU4OSw1Ny40LDUuMgpEZW5tYXJrLDE5LjEsNDg4MzYsODAuOCwxMi42CkRqaWJvdXRpLDYuNSwzNjAxLDY2LjYsNApEb21pbmljYSwxMyw5MjQ1LDc4LjEsNy44CkRvbWluaWNhbiBSZXB1YmxpYywxNC4xLDE1MDc0LDczLjksNy45CkVjdWFkb3IsMTQuOSwxMDE0MSw3Ni44LDkKRWd5cHQsMTMuMSwxMDc0NCw3MS44LDcuMwpFbCBTYWx2YWRvciwxMiw2OTczLDczLjEsNi45CkVxdWF0b3JpYWwgR3VpbmVhLDkuMiwxNzc5Niw1OC40LDUuNgpFcml0cmVhLDUsMTcwOCw2NS45LDMuOQpFc3RvbmlhLDE2LjEsMzAzNzksNzguNiwxMwpFc3dhdGluaSAoS2luZ2RvbSBvZiksMTEuNCw5MzU5LDU5LjQsNi43CkV0aGlvcGlhLDguNywxNzgyLDY2LjIsMi44CkZpamksMTQuNCw5MTEwLDY3LjMsMTAuOQpGaW5sYW5kLDE5LjMsNDE3NzksODEuNywxMi40CkZyYW5jZSwxNS41LDQwNTExLDgyLjUsMTEuNApHYWJvbiwxMi45LDE1Nzk0LDY2LjIsOC4zCkdhbWJpYSw5LjUsMTQ5MCw2MS43LDMuNwpHZW9yZ2lhLDE1LjQsOTU3MCw3My42LDEyLjgKR2VybWFueSwxNy4xLDQ2OTQ2LDgxLjIsMTQuMQpHaGFuYSwxMS41LDQwOTksNjMuOCw3LjIKR3JlZWNlLDE3LjMsMjQ5MDksODIuMSwxMC41CkdyZW5hZGEsMTYuNiwxMjY4NCw3Mi40LDguOApHdWF0ZW1hbGEsMTAuNiw3Mzc4LDc0LjEsNi41Ckd1aW5lYSw5LDIyMTEsNjEuMiwyLjcKR3VpbmVhLUJpc3NhdSwxMC41LDE1OTMsNTgsMy4zCkd1eWFuYSwxMS41LDc2MTUsNjkuOCw4LjUKSGFpdGksOS41LDE2NjUsNjMuNyw1LjQKSG9uZHVyYXMsMTAuMiw0MjU4LDc1LjEsNi42CiJIb25nIEtvbmcsIENoaW5hIChTQVIpIiwxNi41LDYwMjIxLDg0LjcsMTIKSHVuZ2FyeSwxNS4xLDI3MTQ0LDc2LjcsMTEuOQpJY2VsYW5kLDE5LjIsNDc1NjYsODIuOSwxMi41CkluZGlhLDEyLjMsNjgyOSw2OS40LDYuNQpJbmRvbmVzaWEsMTIuOSwxMTI1Niw3MS41LDgKSXJhbiAoSXNsYW1pYyBSZXB1YmxpYyBvZiksMTQuNywxODE2Niw3Ni41LDEwCklyYXEsMTEuMSwxNTM2NSw3MC41LDcuMwpJcmVsYW5kLDE4LjgsNTU2NjAsODIuMSwxMi41CklzcmFlbCwxNiwzMzY1MCw4Mi44LDEzCkl0YWx5LDE2LjIsMzYxNDEsODMuNCwxMC4yCkphbWFpY2EsMTMuMSw3OTMyLDc0LjQsOS44CkphcGFuLDE1LjIsNDA3OTksODQuNSwxMi44CkpvcmRhbiwxMS45LDgyNjgsNzQuNCwxMC41CkthemFraHN0YW4sMTUuMywyMjE2OCw3My4yLDExLjgKS2VueWEsMTEuMSwzMDUyLDY2LjMsNi42CktpcmliYXRpLDExLjgsMzkxNyw2OC4xLDcuOQpLb3JlYSAoRGVtb2NyYXRpYyBQZW9wbGUncyBSZXAuIG9mKSwxMC44LE5BLDcyLjEsTkEKS29yZWEgKFJlcHVibGljIG9mKSwxNi40LDM2NzU3LDgyLjgsMTIuMgpLdXdhaXQsMTMuOCw3MTE2NCw3NS40LDcuMwpLeXJneXpzdGFuLDEzLjQsMzMxNyw3MS4zLDEwLjkKTGFvIFBlb3BsZSdzIERlbW9jcmF0aWMgUmVwdWJsaWMsMTEuMSw2MzE3LDY3LjYsNS4yCkxhdHZpYSwxNiwyNjMwMSw3NS4yLDEyLjgKTGViYW5vbiwxMS4zLDExMTM2LDc4LjksOC43Ckxlc290aG8sMTAuNywzMjQ0LDUzLjcsNi4zCkxpYmVyaWEsOS42LDEwNDAsNjMuNyw0LjcKTGlieWEsMTIuOCwxMTY4NSw3Mi43LDcuNgpMaWVjaHRlbnN0ZWluLDE0LjcsOTk3MzIsODAuNSwxMi41CkxpdGh1YW5pYSwxNi41LDI5Nzc1LDc1LjcsMTMKTHV4ZW1ib3VyZywxNC4yLDY1NTQzLDgyLjEsMTIuMgpNYWRhZ2FzY2FyLDEwLjQsMTQwNCw2Ni43LDYuMQpNYWxhd2ksMTEsMTE1OSw2My44LDQuNgpNYWxheXNpYSwxMy41LDI3MjI3LDc2LDEwLjIKTWFsZGl2ZXMsMTIuMSwxMjU0OSw3OC42LDYuOApNYWxpLDcuNiwxOTY1LDU4LjksMi40Ck1hbHRhLDE1LjksMzQ3OTUsODIuNCwxMS4zCk1hcnNoYWxsIElzbGFuZHMsMTIuNCw0NjMzLDczLjksMTAuOQpNYXVyaXRhbmlhLDguNSwzNzQ2LDY0LjcsNC42Ck1hdXJpdGl1cywxNSwyMjcyNCw3NC45LDkuNApNZXhpY28sMTQuMywxNzYyOCw3NSw4LjYKTWljcm9uZXNpYSAoRmVkZXJhdGVkIFN0YXRlcyBvZiksMTEuNSwzNzAwLDY3LjgsNy43Ck1vbGRvdmEgKFJlcHVibGljIG9mKSwxMS42LDY4MzMsNzEuOCwxMS42Ck1vbmdvbGlhLDE0LjIsMTA3ODQsNjkuNywxMC4yCk1vbnRlbmVncm8sMTUsMTc1MTEsNzYuOCwxMS40Ck1vcm9jY28sMTMuMSw3NDgwLDc2LjUsNS41Ck1vemFtYmlxdWUsOS43LDExNTQsNjAuMiwzLjUKTXlhbm1hciwxMC4zLDU3NjQsNjYuOSw1Ck5hbWliaWEsMTIuNiw5NjgzLDYzLjQsNi45Ck5hdXJ1LDExLjMsMTczMTMsTkEsTkEKTmVwYWwsMTIuMiwyNzQ4LDcwLjUsNC45Ck5ldGhlcmxhbmRzLDE4LDUwMDEzLDgyLjEsMTIuMgpOZXcgWmVhbGFuZCwxOC44LDM1MTA4LDgyLjEsMTIuNwpOaWNhcmFndWEsMTIuMiw0NzkwLDc0LjMsNi44Ck5pZ2VyLDYuNSw5MTIsNjIsMgpOaWdlcmlhLDkuNyw1MDg2LDU0LjMsNi41Ck5vcnRoIE1hY2Vkb25pYSwxMy41LDEyODc0LDc1LjcsOS43Ck5vcndheSwxOC4xLDY4MDU5LDgyLjMsMTIuNgpPbWFuLDE0LjcsMzcwMzksNzcuNiw5LjcKUGFraXN0YW4sOC41LDUxOTAsNjcuMSw1LjIKUGFsYXUsMTUuNiwxNjcyMCw3My43LDEyLjQKIlBhbGVzdGluZSwgU3RhdGUgb2YiLDEyLjgsNTMxNCw3My45LDkuMQpQYW5hbWEsMTIuOSwyMDQ1NSw3OC4zLDEwLjIKUGFwdWEgTmV3IEd1aW5lYSwxMCwzNjg2LDY0LjMsNC42ClBhcmFndWF5LDEyLjcsMTE3MjAsNzQuMSw4LjQKUGVydSwxMy44LDEyMzIzLDc2LjUsOS4yClBoaWxpcHBpbmVzLDEyLjcsOTU0MCw3MS4xLDkuNApQb2xhbmQsMTYuNCwyNzYyNiw3OC41LDEyLjMKUG9ydHVnYWwsMTYuMywyNzkzNSw4MS45LDkuMgpRYXRhciwxMi4yLDExMDQ4OSw4MC4xLDkuNwpSb21hbmlhLDE0LjMsMjM5MDYsNzUuOSwxMQpSdXNzaWFuIEZlZGVyYXRpb24sMTUuNSwyNTAzNiw3Mi40LDEyClJ3YW5kYSwxMS4yLDE5NTksNjguNyw0LjQKU2FpbnQgS2l0dHMgYW5kIE5ldmlzLDEzLjYsMjY3NzAsNzQuNiw4LjUKU2FpbnQgTHVjaWEsMTMuOSwxMTUyOCw3Ni4xLDguNQpTYWludCBWaW5jZW50IGFuZCB0aGUgR3JlbmFkaW5lcywxMy42LDExNzQ2LDcyLjQsOC42ClNhbW9hLDEyLjUsNTg4NSw3My4yLDEwLjYKU2FuIE1hcmlubywxNS4xLE5BLE5BLE5BClNhbyBUb21lIGFuZCBQcmluY2lwZSwxMi43LDMwMjQsNzAuMiw2LjQKU2F1ZGkgQXJhYmlhLDE3LDQ5MzM4LDc1LDkuNwpTZW5lZ2FsLDksMzI1Niw2Ny43LDMuMQpTZXJiaWEsMTQuOCwxNTIxOCw3NS44LDExLjIKU2V5Y2hlbGxlcywxNS41LDI1MDc3LDczLjMsOS43ClNpZXJyYSBMZW9uZSwxMC4yLDEzODEsNTQuMywzLjYKU2luZ2Fwb3JlLDE2LjMsODM3OTMsODMuNSwxMS41ClNsb3Zha2lhLDE0LjUsMzA2NzIsNzcuNCwxMi42ClNsb3ZlbmlhLDE3LjQsMzIxNDMsODEuMiwxMi4zClNvbG9tb24gSXNsYW5kcywxMC4yLDIwMjcsNzIuOCw1LjUKU291dGggQWZyaWNhLDEzLjcsMTE3NTYsNjMuOSwxMC4yClNvdXRoIFN1ZGFuLDUsMTQ1NSw1Ny42LDQuOApTcGFpbiwxNy45LDM1MDQxLDgzLjQsOS44ClNyaSBMYW5rYSwxNCwxMTYxMSw3Ni44LDExLjEKU3VkYW4sNy43LDM5NjIsNjUuMSwzLjcKU3VyaW5hbWUsMTIuOSwxMTkzMyw3MS42LDkuMQpTd2VkZW4sMTguOCw0Nzk1NSw4Mi43LDEyLjQKU3dpdHplcmxhbmQsMTYuMiw1OTM3NSw4My42LDEzLjQKU3lyaWFuIEFyYWIgUmVwdWJsaWMsOC44LDI3MjUsNzEuOCw1LjEKVGFqaWtpc3RhbiwxMS40LDM0ODIsNzAuOSwxMC43ClRhbnphbmlhIChVbml0ZWQgUmVwdWJsaWMgb2YpLDgsMjgwNSw2NSw2ClRoYWlsYW5kLDE0LjcsMTYxMjksNzYuOSw3LjcKVGltb3ItTGVzdGUsMTIuNCw3NTI3LDY5LjMsNC41ClRvZ28sMTIuNiwxNTkzLDYwLjgsNQpUb25nYSwxNC4zLDU3ODMsNzAuOCwxMS4yClRyaW5pZGFkIGFuZCBUb2JhZ28sMTMsMjg0OTcsNzMuNCwxMQpUdW5pc2lhLDE1LjEsMTA2NzcsNzYuNSw3LjIKVHVya2V5LDE2LjQsMjQ5MDUsNzcuNCw3LjcKVHVya21lbmlzdGFuLDEwLjksMTY0MDcsNjguMSw5LjgKVHV2YWx1LDEyLjMsNTQwOSxOQSxOQQpVZ2FuZGEsMTEuMiwxNzUyLDYzLDYuMQpVa3JhaW5lLDE1LjEsNzk5NCw3MiwxMS4zClVuaXRlZCBBcmFiIEVtaXJhdGVzLDEzLjYsNjY5MTIsNzcuOCwxMQpVbml0ZWQgS2luZ2RvbSwxNy40LDM5NTA3LDgxLjIsMTMKVW5pdGVkIFN0YXRlcywxNi4zLDU2MTQwLDc4LjksMTMuNApVcnVndWF5LDE2LjMsMTk0MzUsNzcuOCw4LjcKVXpiZWtpc3RhbiwxMiw2NDYyLDcxLjYsMTEuNQpWYW51YXR1LDExLjQsMjgwOCw3MC4zLDYuOApWZW5lenVlbGEgKEJvbGl2YXJpYW4gUmVwdWJsaWMgb2YpLDEyLjgsOTA3MCw3Mi4xLDEwLjMKVmlldCBOYW0sMTIuNyw2MjIwLDc1LjMsOC4yClllbWVuLDguNywxNDMzLDY2LjEsMy4yClphbWJpYSwxMi4xLDM1ODIsNjMuNSw3LjEKWmltYmFid2UsMTAuNSwyNjYxLDYxLjIsOC4zClN1Yi1TYWhhcmFuIEFmcmljYSwxMCwzNDQzLDYxLjIsNS43ClNvbWFsaWEsTkEsTkEsNTcuMSxOQQo=');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = 'dev2018.csv';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() =&gt; {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  "><i class="fa fa-save"></i> Chapter data</button>
<div id="content-3" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Content<a class="anchor" aria-label="anchor" href="#content-3"><i class="fas fa-link"></i></a>
</h2>
<p>To make the data analysis more efficient, it is crucial to understand some of the crucial programming concepts. In the first part of this section we discuss for loops and if statements. These are so-called “control flow statements”, which are common to almost all programming languages. The second part will discuss the creation and basic usage of functions. Finally, the third part will go through the <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> function family, a common tool used in R to apply functions over objects multiple times.</p>
<div id="control-flow-statements" class="section level3 unnumbered">
<h3>Control flow statements<a class="anchor" aria-label="anchor" href="#control-flow-statements"><i class="fas fa-link"></i></a>
</h3>
</div>
<div id="for-loops" class="section level3 unnumbered">
<h3>For loops<a class="anchor" aria-label="anchor" href="#for-loops"><i class="fas fa-link"></i></a>
</h3>
<p>For loops are essentially a way of telling the programming language “perform the operations I ask you to do N times”. A for loop in R beginns with an <code>for()</code> statement, which is followed by an opening curly brace <code>{</code> in the same line - this is esentially <em>opening the for-loop</em>. After this, usually in a new line, you place the code which you want to execute. Then, in the last line you <em>close the for loop</em> by another curly brace <code>}</code>. You can execute the for loop by placing the cursor either on the for statement (first line) or the closing brace (last line) and executing it as any other code. Below, you can see the for loop printing the string <code>"Hello world!"</code> 5 times</p>
<div class="sourceCode" id="cb397"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Hello world"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>[1] "Hello world"
[1] "Hello world"
[1] "Hello world"
[1] "Hello world"
[1] "Hello world"</code></pre>
<p>The <code>i</code> in the for statements is the variable that will sequentially take all the values of the object (usually a vector) specified on the right hand side of the <code>in</code> keyword. In majority of the cases, the object is a sequence of integers, as in the example below, where <code>i</code> takes the values of each element of the vector <code>1:5</code> and prints it.</p>
<div class="sourceCode" id="cb399"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
<p>A for loop could be used to add a constant to each element of a vector:</p>
<div class="sourceCode" id="cb401"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code>[1] 4 5 1 2 9 8 0 5 3</code></pre>
<div class="sourceCode" id="cb403"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#for all integers between 1 and length of vector x:</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> </span>
<span>  <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fl">5</span></span>
<span><span class="op">}</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code>[1]  9 10  6  7 14 13  5 10  8</code></pre>
<p>However, in R this is redundant, because of <strong>vectorization</strong> (see the <a href="basics.html#vectors">section on vectors</a> from chapter 2). The above statement os equivalent to:</p>
<div class="sourceCode" id="cb405"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">9</span>, <span class="fl">8</span>, <span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">+</span> <span class="fl">5</span></span></code></pre></div>
<pre><code>[1]  9 10  6  7 14 13  5 10  8</code></pre>
<p>This is not only simpler, but also more efficient.</p>
<p>Another, more practical aplication of the for loop could examine all columns of a data frame for missing values, so that:</p>
<div class="sourceCode" id="cb407"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dev</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"data/un_data/dev2018.csv"</span>,</span>
<span>                stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">missing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#create empty numeric vector</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">missing</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dev</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="co">#get sum of missing for ith column</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">missing</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="co">#name it with ith column name</span></span>
<span><span class="op">}</span></span>
<span><span class="va">missing</span></span></code></pre></div>
<pre><code>country     eys     gni    lexp     mys 
      0       1       3       3       5 </code></pre>
<p>From this, we can see that there are 0 misisng values in the country name, 1 missing value in the expected years of schooling variable and, 3 missing values in gni and life expectancy and 5 missing values in mean years of schooling.</p>
<p>While this is a bit more useful than the previous example, R still offers a shorthand method for such problems, which is discussed in more detail in the <a href="#apply-family">last part of this chapter</a>. In general, due to the phenomena of vectorization, for loops are rarely used in simple data analysis in R. However, they are a core element of programming as such, therefore it’s important to understand them. In fact, vectorization is made possible only because of for loops being used by R in the background - simply their faster and more efficient versions.</p>
</div>
<div id="if-statements" class="section level3 unnumbered">
<h3>If statements<a class="anchor" aria-label="anchor" href="#if-statements"><i class="fas fa-link"></i></a>
</h3>
<p>If statements are another crucial programming concept. They essentially allow performing computation <em>conditionally</em> on a logical statement. In other words, depending on a <a href="logical-values-and-operators">logical expression</a> an operation is performed or not. If loops in R are constructed in the following way:</p>
<div class="sourceCode" id="cb409"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">logical_expression</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">operations</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Where <code>logical_expression</code> must an expression that evaluates to a logical value, for example <code>X &gt; 5</code>, <code>country == "France"</code> or <code>is.na(x)</code>. <code>operations</code> are performed if and only if the <code>logical_expression</code> evaluates to <code>TRUE</code>. The simples possible example would be</p>
<div class="sourceCode" id="cb410"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"the value is greater than 0"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>[1] "the value is greater than 0"</code></pre>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"the value is greater than 0"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If is naturally complemented by the <code>else</code> clause, i.e. the operations that should be performed otherwise. The general form of such statement is:</p>
<div class="sourceCode" id="cb413"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">logical_expression</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">operations</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">other_operations</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>In this case, R first checks if the <code>logical_expression</code> evaluates to <code>TRUE</code>, and if it doesn’t, performs the <code>other_operations</code>. For example:</p>
<div class="sourceCode" id="cb414"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"the value is greater than 0"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"the value is less or equal than 0"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>[1] "the value is less or equal than 0"</code></pre>
<p>Finally, <code>else if</code> allows to provide another statement to be evaluated. The general form of such statement would be:</p>
<div class="sourceCode" id="cb416"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="va">logical_statement</span><span class="op">)</span> <span class="op">{</span> </span>
<span>  <span class="va">operation</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">other_logical_statement</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">other_operation</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">yet_another_operation</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Here, R first checks the <code>logical_statement</code>, if it’s <code>FALSE</code> then it proceeds to check the <code>other_logical_statement</code>. If the second one is <code>TRUE</code> if performs the <code>other_operation</code> and if it’s <code>FALSE</code> it proceeds to perform the <code>yet_another_operation</code>. An extension of the previous example:</p>
<div class="sourceCode" id="cb417"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"The value is positive"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"The value is negative"</span><span class="op">)</span> </span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"The value is 0"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<pre><code>[1] "The value is positive"</code></pre>
<p>IF-ELSE statments can be used to conditionally replace values. For example, suppose that we want to create a variable that is 1 when country is France and 0 otherwise. We could do that by:</p>
<div class="sourceCode" id="cb419"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dev</span><span class="op">$</span><span class="va">france</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">==</span> <span class="st">"France"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dev</span><span class="op">$</span><span class="va">france</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">dev</span><span class="op">$</span><span class="va">france</span><span class="op">[</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"France"</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>Again, because of vectorization, R offers a shorthand for this, through the <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> function:</p>
<div class="sourceCode" id="cb421"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dev</span><span class="op">$</span><span class="va">france</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"France"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">dev</span><span class="op">$</span><span class="va">france</span><span class="op">[</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span> <span class="op">==</span> <span class="st">"France"</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>When you look at the documentation <code><a href="https://rdrr.io/r/base/ifelse.html">?ifelse</a></code>, you can see that it takes three arguments - <code>test</code>, <code>yes</code> and <code>no</code>. The <code>test</code> argument is the logical condition - same as <code>logical_statement</code> in the <code>if</code>, with the small subtle difference that it can evaluate to a logical vector rather than one single logical value. The <code>yes</code> argument is the value returned by the function if the <code>test</code> is <code>TRUE</code> and the <code>no</code> argument is returned when <code>test</code> is <code>FALSE</code>. You can fully see this in the example below:</p>
<div class="sourceCode" id="cb423"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"yes"</span>, <span class="st">"no"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "yes" "no"  "no"  "yes"</code></pre>
<div class="sourceCode" id="cb425"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1 0 0 1</code></pre>
</div>
<div id="functions" class="section level3 unnumbered">
<h3>Functions<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h3>
<p>R is known as a <em>functional programming language</em> - as you have already seen, almost all of the operations performed are done using functions. It is also possible to create our own, custom functions by combining other functions and data structures. This is done using the <code>function()</code> keyword. The general syntax of a function looks as follows:</p>
<div class="sourceCode" id="cb427"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">function_name</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">arg1</span>, <span class="va">arg2</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">operations</span><span class="op">(</span><span class="va">arg1</span>, <span class="va">arg2</span><span class="op">)</span></span>
<span>  <span class="va">output</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>As with any R object, you can use almost any name instead of <code>function_name</code>. Arguments are separeted by commas (in the above example <code>arg1</code>, <code>arg2</code>) - these are the objects you pass to your function on which you perform some arbitrary <code>operations</code>. Again, the arguments can have arbitrary names, but you need to use them within the function consistently. Finally, most of the functions return a value - this is the last object called within the function (<code>output</code> in the above example).</p>
<p>After creating the function we can run it, exactly the same way as we would with any of R’s built-in functions. A simple example could return the number of missing values in an object:</p>
<div class="sourceCode" id="cb428"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">count_na</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">count_na</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">mys</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>We could also implement our own summary statistics function, similar to <code>describe()</code> discussed in <a href="exploratory.html#exploratory">the previous chapter</a>:</p>
<div class="sourceCode" id="cb430"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summary_stats</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                SD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                IQR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/IQR.html">IQR</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, </span>
<span>                  Mean_Nchar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">is.factor</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, </span>
<span>       Nlevels  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Let’s walk through the above function Given a vector <code>x</code>, the function :
1. Checks whether <code>x</code> is a numeric vector. If so, returns a list of it’s mean, standard deviation and interquartile range.
2. Else, checks if <code>x</code> is a character vector. If so, returns a list containng its length and average number of characters.
3. Else, checks if <code>x</code> is a factor. If so returns a list containing its length and average number of character.</p>
<p>We can see how it works below:</p>
<div class="sourceCode" id="cb431"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary_stats</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Mean
[1] 4

$SD
[1] 4.082483

$IQR
[1] 3</code></pre>
<div class="sourceCode" id="cb433"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary_stats</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Length
[1] 195

$Mean_Nchar
[1] 9.902564</code></pre>
<div class="sourceCode" id="cb435"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary_stats</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">country</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>$Length
[1] 195

$Nlevels
[1] 195</code></pre>
<div id="keyword-arguments" class="section level4 unnumbered">
<h4>Keyword arguments<a class="anchor" aria-label="anchor" href="#keyword-arguments"><i class="fas fa-link"></i></a>
</h4>
<p>Many of the functions used in R come with so-called <em>default</em> arguments - this was already mentioned in <a href="basics.html#sorting">sorting</a>. When defining our own functions, we can make use of that functionality as well. For example, the <code>count_na</code> example can be modified in the following way:</p>
<div class="sourceCode" id="cb437"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">count_na</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">proportion</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">num_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">proportion</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">num_na</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">num_na</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The <code>proportion</code> argument controls whether the function returns the number of NAs as value or as proportion of the entire vector:</p>
<div class="sourceCode" id="cb438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">count_na</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">gni</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 0.01538462</code></pre>
<div class="sourceCode" id="cb440"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">count_na</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">gni</span>, proportion <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#same as above</span></span></code></pre></div>
<pre><code>[1] 0.01538462</code></pre>
<div class="sourceCode" id="cb442"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">count_na</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">gni</span>, proportion <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 3</code></pre>
<p>There are couple of reasons why functions are frequently applied when analyzing data:
1. <em>To avoid repetition</em> - often, you need to perform the same operation repeatedly - sometimes on a dataframe with tens or hunderds of columns or even multiple data frames. To avoid re-writing the same code over and over again (which always increases the chance of an error occuring).
2. <em>To enhance clarity</em> - when you perform a long and complicated series of operations on a dataset, it’s often much easier to break it down into functions. Then when you need to come back to your code after a long time, it is often much easier to see <code>recode_missing_values(data)</code> appear in your code, with the <code>record_missing_values</code> function defined somewhere else, as you don’t need to go through your code step by step, but only understand what particular functions return.
3 <em>To improve performance</em> - while most of the operations we’ve seen in R take fractions of seconds, larger data can often lead to longer computation times. Functions can be combined with other tools to make computation more elegant and quicker - some of these methods are discussed in the next section.</p>
</div>
</div>
<div id="sapply" class="section level3 unnumbered">
<h3>Sapply<a class="anchor" aria-label="anchor" href="#sapply"><i class="fas fa-link"></i></a>
</h3>
<p>Recall the code we used to check each column of our data frame for missingness in the <a href="for-loops">for loops section</a>:</p>
<div class="sourceCode" id="cb444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">missing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#create empty numeric vector</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">missing</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">dev</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="co">#get sum of missing for ith column</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">missing</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="co">#name it with ith column name</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We could re-write it using our new knowledge of functions, such that:</p>
<div class="sourceCode" id="cb445"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">count_na</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">missing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">missing</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">count_na</span><span class="op">(</span><span class="va">dev</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">missing</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dev</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span><span class="va">missing</span></span></code></pre></div>
<pre><code>country     eys     gni    lexp     mys  france 
      0       1       3       3       5       0 </code></pre>
<p>While this may look a bit more fancy, in fact more code was used to perform this operation and it doesn’t differ too much in terms of clarity. The exact same result can be achieved using the <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> function. <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> takes two arguments - an R object, such as a vector and a data frame and a function. Then, it applies the function to each element of this object (i.e. value in case of vectors, column/variable in case of data frames).</p>
<div class="sourceCode" id="cb447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">dev</span>, <span class="va">count_na</span><span class="op">)</span></span></code></pre></div>
<pre><code>country     eys     gni    lexp     mys  france 
      0       1       3       3       5       0 </code></pre>
<p>The result is exactly the same as in the previous case. <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> used the <code>count_na</code> function on each columns of the <code>dev</code> dataset.</p>
<p>When using short, simple functions, <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> can be even more concise, as we can defined our function without giving it a name. In the example below, instead of defining <code>count_na</code> separately, we define it directly within the <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> call (i.e. inside the parentheses). This yields the same result.</p>
<div class="sourceCode" id="cb449"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">dev</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>country     eys     gni    lexp     mys  france 
      0       1       3       3       5       0 </code></pre>
<p>Consider the function below. What do you expect it to return? Try going through each element of the code separately. You can check how the <code>rowSums</code> command works by typing <code><a href="https://rdrr.io/r/base/colSums.html">?rowSums</a></code> into the R console.</p>
<div class="sourceCode" id="cb451"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quartile</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">quantiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">comparisons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">quantiles</span>, <span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="va">y</span> <span class="op">&lt;=</span> <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="va">comparisons</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The function takes a vector as input and computes three quantiles of its values - 25%, 50%, 75%. You may recall from the <a href="exploratory.html#exploratory">previous chapter</a> that quantiles are cut points that divide a variable into ranges of equal proportions in the data set. The resulting <code>quantiles</code> vector consists of three values, corresponding with thre three quantiles. We then use <code>sapply</code> on these three values to compare each of them with the value of the <code>x</code> vector. As a result, we obtain a 3 x n array, where n is length of <code>x</code>. For each of the values of <code>x</code> we get three logical values. Each of them is <code>TRUE</code> when the corresponding value of x was larger than the quantile and <code>FALSE</code> if the corresponding value of x was lower than the quantile. We can then sum the results by row, using <code>rowSums</code>. Our final result is a vector with values of 0, 1 and 2. Its value is 0 if the corresponding value of x was less than all quartiles, 1 if it was greater or equal than the .25, 2 if it was greater or equal than 0.5 and 3 if it was greater or equal than all of them. We then finally add 1 to each, so that they correspond to true quartile numbers (1st quartile, rather than 0th quartile, etc).</p>
<p>We can then use the <code>split</code> function, which takes a data frame and a vector as input and splits the data frame into several parts, each with the same value of the splitting variable. As a result, we obtain <code>dev_split</code> dataset, which stores 4 data frames, each only with countries in the respective quantile of expected years of schooling.</p>
<div class="sourceCode" id="cb452"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dev_split</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">dev</span>, <span class="fu">quartile</span><span class="op">(</span><span class="va">dev</span><span class="op">$</span><span class="va">eys</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dev_split</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>                    country  eys  gni lexp mys france
1               Afghanistan 10.1 1746 64.5 3.9      0
14               Bangladesh 11.2 4057 72.3 6.1      0
27             Burkina Faso  8.9 1705 61.2 1.6      0
33 Central African Republic  7.6  777 52.8 4.3      0
34                     Chad  7.5 1716 54.0 2.4      0
38                  Comoros 11.2 2426 64.1 4.9      0</code></pre>
<p>You can then look at descriptive statistics of each of the quartiles using:</p>
<div class="sourceCode" id="cb454"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">dev_split</span>, <span class="va">summary</span><span class="op">)</span></span></code></pre></div>
<pre><code>$`1`
   country               eys              gni             lexp            mys            france 
 Length:47          Min.   : 5.000   Min.   :  777   Min.   :52.80   Min.   :1.600   Min.   :0  
 Class :character   1st Qu.: 8.700   1st Qu.: 1611   1st Qu.:60.80   1st Qu.:3.700   1st Qu.:0  
 Mode  :character   Median : 9.700   Median : 2318   Median :64.30   Median :4.850   Median :0  
                    Mean   : 9.415   Mean   : 3579   Mean   :63.89   Mean   :4.861   Mean   :0  
                    3rd Qu.:10.550   3rd Qu.: 3731   3rd Qu.:67.00   3rd Qu.:6.075   3rd Qu.:0  
                    Max.   :11.200   Max.   :17796   Max.   :75.10   Max.   :9.800   Max.   :0  
                                     NA's   :1                       NA's   :1                  

$`2`
   country               eys             gni              lexp            mys             france 
 Length:50          Min.   :11.30   Min.   :   660   Min.   :58.90   Min.   : 3.100   Min.   :0  
 Class :character   1st Qu.:11.80   1st Qu.:  4232   1st Qu.:68.03   1st Qu.: 6.500   1st Qu.:0  
 Mode  :character   Median :12.30   Median :  6903   Median :71.50   Median : 7.850   Median :0  
                    Mean   :12.22   Mean   : 10788   Mean   :70.39   Mean   : 7.869   Mean   :0  
                    3rd Qu.:12.70   3rd Qu.: 11578   3rd Qu.:73.83   3rd Qu.: 9.475   3rd Qu.:0  
                    Max.   :13.00   Max.   :110489   Max.   :80.10   Max.   :11.600   Max.   :0  
                                                     NA's   :2       NA's   :2                   

$`3`
   country               eys             gni             lexp            mys             france 
 Length:47          Min.   :13.10   Min.   : 3317   Min.   :63.90   Min.   : 5.500   Min.   :0  
 Class :character   1st Qu.:13.65   1st Qu.:10694   1st Qu.:74.53   1st Qu.: 8.600   1st Qu.:0  
 Mode  :character   Median :14.30   Median :14356   Median :76.05   Median : 9.900   Median :0  
                    Mean   :14.19   Mean   :22644   Mean   :75.45   Mean   : 9.883   Mean   :0  
                    3rd Qu.:14.70   3rd Qu.:26054   3rd Qu.:76.88   3rd Qu.:11.200   3rd Qu.:0  
                    Max.   :15.10   Max.   :99732   Max.   :82.10   Max.   :12.600   Max.   :0  
                                    NA's   :1       NA's   :1       NA's   :1                   

$`4`
   country               eys             gni             lexp            mys            france    
 Length:50          Min.   :15.20   Min.   : 9570   Min.   :72.40   Min.   : 7.70   Min.   :0.00  
 Class :character   1st Qu.:15.68   1st Qu.:24906   1st Qu.:77.25   1st Qu.:10.43   1st Qu.:0.00  
 Mode  :character   Median :16.35   Median :34918   Median :81.20   Median :12.25   Median :0.00  
                    Mean   :16.79   Mean   :35322   Mean   :79.66   Mean   :11.55   Mean   :0.02  
                    3rd Qu.:17.40   3rd Qu.:45698   3rd Qu.:82.38   3rd Qu.:12.70   3rd Qu.:0.00  
                    Max.   :22.10   Max.   :83793   Max.   :84.70   Max.   :14.10   Max.   :1.00  </code></pre>
<p>While working an R and looking for help online, you may stumble upon other variants of the <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> functions. Essentially, all R functions with <code>apply</code> in their name serve the same purpose - applying a function to each element of an object. <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> is a less user friendy version of <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code>, which always returns a list, not a vector. <code><a href="https://rdrr.io/r/base/lapply.html">vapply()</a></code> forces the user to determine the type of the output, which makes its behaviour more predictible and slightly faster. <code><a href="https://rdrr.io/r/base/tapply.html">tapply()</a></code> applies the function to data frame by group determined by another variable - a similar procedure to what we did using <code><a href="https://rdrr.io/r/base/split.html">split()</a></code> and <code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code>, but in less steps.</p>
</div>
</div>
<div id="summary-3" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Summary<a class="anchor" aria-label="anchor" href="#summary-3"><i class="fas fa-link"></i></a>
</h2>
<p>-<em>For loops</em> allow to perform the same operation multiple times over a range of values of one variable. They are constructed using <code>for(i in vector)</code>. Their use in R is relatively rare due to vectorization.</p>
<p>-<em>If statements</em> control whether na operation is performed depending on the value of a logical condition. To conditionally modify values of vectors, use <code>ifelse(test, yes, no)</code></p>
<p>-<em>Functions</em> can be created by user to combine multiple operations into shorter pieces of code, which allows to avoid repetition. They take one or many arguments and return one value.</p>
<p>-<code><a href="https://rdrr.io/r/base/lapply.html">sapply()</a></code> is a function used for applying a function to each element of a vector or each column of a data frame. You may find other versions of it, with <em>apply</em> in their name, which perform the same task, but with slight alteration.</p>
<div id="functions-list-3" class="section level3 unnumbered">
<h3>Functions list<a class="anchor" aria-label="anchor" href="#functions-list-3"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="11%">
<col width="16%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th align="left">function</th>
<th align="left">package</th>
<th align="left">description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">count_na()</td>
<td align="left">.GlobalEnv</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">quartile()</td>
<td align="left">.GlobalEnv</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">summary_stats()</td>
<td align="left">.GlobalEnv</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">names()</td>
<td align="left">c(“.GlobalEnv”, “base”)</td>
<td align="left">retrieve names of a list/vector</td>
</tr>
<tr class="odd">
<td align="left">as.factor()</td>
<td align="left">base</td>
<td align="left">coerce a vector to factor</td>
</tr>
<tr class="even">
<td align="left">c()</td>
<td align="left">base</td>
<td align="left">Combine values/vectors into a vector</td>
</tr>
<tr class="odd">
<td align="left">ifelse()</td>
<td align="left">base</td>
<td align="left">return a or b depending on the value of test</td>
</tr>
<tr class="even">
<td align="left">is.character()</td>
<td align="left">base</td>
<td align="left">check if vector is character</td>
</tr>
<tr class="odd">
<td align="left">is.factor()</td>
<td align="left">base</td>
<td align="left">check if a vector is of class ‘factor’</td>
</tr>
<tr class="even">
<td align="left">is.na()</td>
<td align="left">base</td>
<td align="left">check if a value is NA/elements of vector are NA</td>
</tr>
<tr class="odd">
<td align="left">is.numeric()</td>
<td align="left">base</td>
<td align="left">check if vector is numeric</td>
</tr>
<tr class="even">
<td align="left">length()</td>
<td align="left">base</td>
<td align="left">get number of elements in a vector or list</td>
</tr>
<tr class="odd">
<td align="left">levels()</td>
<td align="left">base</td>
<td align="left">get levels of a factor</td>
</tr>
<tr class="even">
<td align="left">list()</td>
<td align="left">base</td>
<td align="left">create a list</td>
</tr>
<tr class="odd">
<td align="left">mean()</td>
<td align="left">base</td>
<td align="left">get mean of a vector</td>
</tr>
<tr class="even">
<td align="left">nchar()</td>
<td align="left">base</td>
<td align="left">get number of characters in a string</td>
</tr>
<tr class="odd">
<td align="left">nrow()</td>
<td align="left">base</td>
<td align="left">get number of rows of a data frame</td>
</tr>
<tr class="even">
<td align="left">numeric()</td>
<td align="left">base</td>
<td align="left">initialize a numeric vector</td>
</tr>
<tr class="odd">
<td align="left">print()</td>
<td align="left">base</td>
<td align="left">print object to the console</td>
</tr>
<tr class="even">
<td align="left">rowSums()</td>
<td align="left">base</td>
<td align="left">get sums of a data frame by rows</td>
</tr>
<tr class="odd">
<td align="left">sapply()</td>
<td align="left">base</td>
<td align="left">apply function to each element of a list</td>
</tr>
<tr class="even">
<td align="left">split()</td>
<td align="left">base</td>
<td align="left">split list based on a function/vector</td>
</tr>
<tr class="odd">
<td align="left">sum()</td>
<td align="left">base</td>
<td align="left">get sum of numeric values or a vector</td>
</tr>
<tr class="even">
<td align="left">IQR()</td>
<td align="left">stats</td>
<td align="left">obtain the inter-quartile range of a vector</td>
</tr>
<tr class="odd">
<td align="left">quantile()</td>
<td align="left">stats</td>
<td align="left">obtain empirical quantiles of a vector</td>
</tr>
<tr class="even">
<td align="left">sd()</td>
<td align="left">stats</td>
<td align="left">Get standard deviation of a vector</td>
</tr>
<tr class="odd">
<td align="left">head()</td>
<td align="left">utils</td>
<td align="left">show first 5 rows of a data frame</td>
</tr>
<tr class="even">
<td align="left">head()</td>
<td align="left">utils</td>
<td align="left">print first n (default 5) rows of the data</td>
</tr>
<tr class="odd">
<td align="left">read.csv()</td>
<td align="left">utils</td>
<td align="left">read a csv file to data frame. Specify stringsAsFactors = FALSE to keep all string columns as characters</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="exercises-3" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-3"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Suppose we pass a data frame to the <code>summary_stats</code> function. What would the function return? Why?</p></li>
<li><p>Use the <code>summary_stats</code> function to summarize each variable from the <code>iris</code> dataset. You can load it using <code>data(iris)</code>.</p></li>
<li><p>Use a for loop to create a scatter plot of <code>Sepal.Width</code> and <code>Sepal.length</code> attributes from the <code>iris</code> dataset with each flower species (specified by the <code>Species</code> variable) having a different marker and color. To do that, use the skeleton code below.</p></li>
</ol>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="programming.html#cb456-1" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb456-2"><a href="programming.html#cb456-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="sc">-</span><span class="dv">99</span>, <span class="sc">-</span><span class="dv">99</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="fu">min</span>(iris<span class="sc">$</span>Sepal.Width), <span class="fu">max</span>(iris<span class="sc">$</span>Sepal.Width)),</span>
<span id="cb456-3"><a href="programming.html#cb456-3" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fu">min</span>(iris<span class="sc">$</span>Sepal.Length), <span class="fu">max</span>(iris<span class="sc">$</span>Petal.Length)))</span>
<span id="cb456-4"><a href="programming.html#cb456-4" tabindex="-1"></a><span class="cf">for</span> (...) {</span>
<span id="cb456-5"><a href="programming.html#cb456-5" tabindex="-1"></a>  <span class="fu">points</span>(<span class="at">x =</span> , <span class="at">y =</span> , <span class="at">col =</span> , <span class="at">pch =</span> )</span>
<span id="cb456-6"><a href="programming.html#cb456-6" tabindex="-1"></a>}</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li><p>Create function called <code>detect_outliers</code> that will take a vector and a quantile threshold as an argument and will return the indices of the values that can be considered outliers given this threshold (i.e. lie above the nth quantile or below 100 - nth quantile).</p></li>
<li><p>Extend this function so that it returns rows of the data frame that contain outliers in <em>any</em> of the (numerical) variables.</p></li>
<li><p>Apply the function from the above exercise to the <code>dev</code> dataset. Which countries can be considered outliers?</p></li>
<li><p>Recall the <code>quartile</code> function from the examples above. Can you extend it so that:</p></li>
</ol>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">quartile</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">quantiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">comparisons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">quantiles</span>, <span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="va">y</span> <span class="op">&lt;=</span> <span class="va">x</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="va">comparisons</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ul>
<li><p>it splits a variable into an arbitary number of ranges with equal proportions (for example into <a href="https://en.wikipedia.org/wiki/Decile">deciles</a>).</p></li>
<li><p>it returns a sensible default when a value of the vector is missing. What could such “sensible default” be? Make it the default value when specifying function arguments.</p></li>
<li><p>Try applying your new function to the <code>dev</code> dataset and splitting it into parts using <code>split</code>. You may then compare the descriptive statistics of each part using the <code>lapply</code> function.</p></li>
</ul>
<p><em>The solutions for the exercises will be available here on 2021-01-07.</em></p>
<button class="btn btn-default" onclick="
    async function downloadFile(event) {
      event.preventDefault();
      try {
        const response = await fetch('data:text/plain;base64,IycgIyMgRXhlcmNpc2VzCiMnIAojJyAxLiBTdXBwb3NlIHdlIHBhc3MgYSBkYXRhIGZyYW1lIHRvIHRoZSBgc3VtbWFyeV9zdGF0c2AgZnVuY3Rpb24uIFdoYXQgd291bGQgdGhlIGZ1bmN0aW9uIHJldHVybj8gV2h5PwojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojQU5TV0VSCnN1bW1hcnlfc3RhdHMgPC0gZnVuY3Rpb24oeCkgewogIGlmIChpcy5udW1lcmljKHgpKSB7CiAgICBsaXN0KE1lYW4gPSBtZWFuKHgsIG5hLnJtID0gVFJVRSksIAogICAgICAgICBTRCA9IHNkKHgsIG5hLnJtID0gVFJVRSksIAogICAgICAgICBJUVIgPSBJUVIoeCwgbmEucm0gPSBUUlVFKSkKICB9IGVsc2UgaWYgKGlzLmNoYXJhY3Rlcih4KSkgewogICAgbGlzdChMZW5ndGggPSBsZW5ndGgoeCksIAogICAgICAgICBNZWFuX05jaGFyID0gbWVhbihuY2hhcih4KSkpCiAgfSBlbHNlIGlmIChpcy5mYWN0b3IoeCkpIHsKICAgIGxpc3QoTGVuZ3RoID0gbGVuZ3RoKHgpLCAKICAgICAgICAgTmxldmVscyAgPSBsZW5ndGgobGV2ZWxzKHgpKSkgCiAgfQp9CgojU09MVVRJT04KCmRhdGEoaXJpcykgI2xvYWQgZXhhbXBsZSBkYXRzZXQKc3VtbWFyeV9zdGF0cyhpcmlzKQoKI3RoaXMgaXMgYmVjYXVzZSB0aGUgaWYgYW5kIGVsc2UtaWYgc3RhdGVtZW50cyBvbmx5IGNoZWNrIGZvciBjaGFyYWN0ZXJzLCBmYWN0b3JzIGFuZCBudW1lcmljIGNsYXNzZXMuCmlzLm51bWVyaWMoaXJpcykKaXMuZmFjdG9yKGlyaXMpCmlzLmNoYXJhY3RlcihpcmlzKQoKc3VtbWFyeV9zdGF0cyA8LSBmdW5jdGlvbih4KSB7CiAgaWYgKGlzLm51bWVyaWMoeCkpIHsKICAgIGxpc3QoTWVhbiA9IG1lYW4oeCwgbmEucm0gPSBUUlVFKSwgCiAgICAgICAgIFNEID0gc2QoeCwgbmEucm0gPSBUUlVFKSwgCiAgICAgICAgIElRUiA9IElRUih4LCBuYS5ybSA9IFRSVUUpKQogIH0gZWxzZSBpZiAoaXMuY2hhcmFjdGVyKHgpKSB7CiAgICBsaXN0KExlbmd0aCA9IGxlbmd0aCh4KSwgCiAgICAgICAgIE1lYW5fTmNoYXIgPSBtZWFuKG5jaGFyKHgpKSkKICB9IGVsc2UgaWYgKGlzLmZhY3Rvcih4KSkgewogICAgbGlzdChMZW5ndGggPSBsZW5ndGgoeCksIAogICAgICAgICBObGV2ZWxzICA9IGxlbmd0aChsZXZlbHMoeCkpKSAKICB9IGVsc2UgewogICAgbWVzc2FnZSgiV3JvbmcgZGF0YSB0eXBlIikKICB9Cn0KCiMnIAojJyAKIycgMi4gVXNlIHRoZSBgc3VtbWFyeV9zdGF0c2AgZnVuY3Rpb24gdG8gc3VtbWFyaXplIGVhY2ggdmFyaWFibGUgZnJvbSB0aGUgYGlyaXNgIGRhdGFzZXQuIFlvdSBjYW4gbG9hZCBpdCB1c2luZyBgZGF0YShpcmlzKWAuCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiNBTlNXRVIKZGF0YShpcmlzKQpzYXBwbHkoaXJpcywgc3VtbWFyeV9zdGF0cykKCiMnIAojJyAKIycgMy4gVXNlIGEgZm9yIGxvb3AgdG8gY3JlYXRlIGEgc2NhdHRlciBwbG90IG9mIGBTZXBhbC5XaWR0aGAgYW5kIGBTZXBhbC5sZW5ndGhgIGF0dHJpYnV0ZXMgZnJvbSB0aGUgYGlyaXNgIGRhdGFzZXQgd2l0aCBlYWNoIGZsb3dlciBzcGVjaWVzIChzcGVjaWZpZWQgYnkgdGhlIGBTcGVjaWVzYCB2YXJpYWJsZSkgaGF2aW5nIGEgZGlmZmVyZW50IG1hcmtlciBhbmQgY29sb3IuIFRvIGRvIHRoYXQsIHVzZSB0aGUgc2tlbGV0b24gY29kZSBiZWxvdy4gCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgZGF0YShpcmlzKQojIHBsb3QoLTk5LCAtOTksIHhsaW0gPSBjKG1pbihpcmlzJFNlcGFsLldpZHRoKSwgbWF4KGlyaXMkU2VwYWwuV2lkdGgpKSwKIyAgICAgIHlsaW0gPSBjKG1pbihpcmlzJFNlcGFsLkxlbmd0aCksIG1heChpcmlzJFBldGFsLkxlbmd0aCkpKQojIGZvciAoLi4uKSB7CiMgICBwb2ludHMoeCA9ICwgeSA9ICwgY29sID0gLCBwY2ggPSApCiMgfQoKIycgCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiNBTlNXRVI6CmRhdGEoaXJpcykKcGxvdCgtOTksIC05OSwgeGxpbSA9IGMobWluKGlyaXMkU2VwYWwuV2lkdGgpLCBtYXgoaXJpcyRTZXBhbC5XaWR0aCkpLAogICAgIHlsaW0gPSBjKG1pbihpcmlzJFNlcGFsLkxlbmd0aCksIG1heChpcmlzJFBldGFsLkxlbmd0aCkpLAogICAgIHhsYWIgPSAiU2VwYWwgV2lkdGgiLCB5bGFiID0gIlNlcGFsIExlbmd0aCIpCmNvbG9ycyA8LSBjKCdyZWQnLCdncmVlbicsJ2JsdWUnKQpzcGVjaWVzIDwtIGxldmVscyhpcmlzJFNwZWNpZXMpCmZvciAoaSBpbiAxOmxlbmd0aChzcGVjaWVzKSkgewogIHN1YmRmIDwtIHN1YnNldChpcmlzLCBpcmlzJFNwZWNpZXMgPT0gc3BlY2llc1tpXSkKICBwb2ludHMoeCA9IHN1YmRmJFNlcGFsLldpZHRoLCB5ID0gc3ViZGYkU2VwYWwuTGVuZ3RoLCBjb2wgPSBjb2xvcnNbaV0sIAogICAgICAgcGNoID0gaSkKfQoKIycgCiMnIDQuIENyZWF0ZSBmdW5jdGlvbiBjYWxsZWQgYGRldGVjdF9vdXRsaWVyc2AgdGhhdCB3aWxsIHRha2UgYSB2ZWN0b3IgYW5kIGEgcXVhbnRpbGUgdGhyZXNob2xkIGFzIGFuIGFyZ3VtZW50IGFuZCB3aWxsIHJldHVybiB0aGUgaW5kaWNlcyBvZiB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGNvbnNpZGVyZWQgb3V0bGllcnMgZ2l2ZW4gdGhpcyB0aHJlc2hvbGQgKGkuZS4gbGllIGFib3ZlIHRoZSBudGggcXVhbnRpbGUgb3IgYmVsb3cgMTAwIC0gbnRoIHF1YW50aWxlKS4KIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KI0FOU1dFUgpkZXRlY3Rfb3V0bGllcnMgPC0gZnVuY3Rpb24oeCwgdGhyZXNob2xkKSB7CiAgY3V0cyA8LSBxdWFudGlsZSh4LCBwcm9icyA9IGFicyhjKDAsMSkgLSB0aHJlc2hvbGQpLCBuYS5ybSA9IFRSVUUpCiAgd2hpY2goeCA8PSBjdXRzWzFdIHwgeCA+PSBjdXRzWzJdKQp9CgpkZXRlY3Rfb3V0bGllcnMoaXJpcyRTZXBhbC5MZW5ndGgsIDAuMDAxKQoKIycgCiMnIDUuIEV4dGVuZCB0aGlzIGZ1bmN0aW9uIHNvIHRoYXQgaXQgcmV0dXJucyByb3dzIG9mIHRoZSBkYXRhIGZyYW1lIHRoYXQgY29udGFpbiBvdXRsaWVycyBpbiAqYW55KiBvZiB0aGUgKG51bWVyaWNhbCkgdmFyaWFibGVzLgojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojQU5TV0VSCmRldGVjdF9vdXRsaWVyc19kZiA8LSBmdW5jdGlvbihkZiwgdGhyZXNob2xkKSB7CiAgaW5kX251bSA8LSBzYXBwbHkoZGYsIGlzLm51bWVyaWMpCiAgb3V0bGllcnMgPC0gc2FwcGx5KGRmWywgaW5kX251bV0sIGZ1bmN0aW9uKHgpIHsKICAgICAgICAgICAgICAgICAgICAgIGRldGVjdF9vdXRsaWVycyh4LCB0aHJlc2hvbGQgPSB0aHJlc2hvbGQpCiAgfSkKICB1bmlxdWUodW5saXN0KG91dGxpZXJzKSkKfQoKIycgCiMnIDYuIEFwcGx5IHRoZSBmdW5jdGlvbiBmcm9tIHRoZSBhYm92ZSBleGVyY2lzZSB0byB0aGUgYGRldmAgZGF0YXNldC4gV2hpY2ggY291bnRyaWVzIGNhbiBiZSBjb25zaWRlcmVkIG91dGxpZXJzPwojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojQU5TV0VSCmRldiA8LSByZWFkLmNzdigiZGF0YS91bl9kYXRhL2RldjIwMTguY3N2IiwKICAgICAgICAgICAgICAgIHN0cmluZ3NBc0ZhY3RvcnMgPSBGQUxTRSkKZGV2W2RldGVjdF9vdXRsaWVyc19kZihkZXYsIDAuMDAwMSksXQoKIycgCiMnIDcuIFJlY2FsbCB0aGUgYHF1YXJ0aWxlYCBmdW5jdGlvbiBmcm9tIHRoZSBleGFtcGxlcyBhYm92ZS4gQ2FuIHlvdSBleHRlbmQgaXQgc28gdGhhdDogCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnF1YXJ0aWxlIDwtIGZ1bmN0aW9uKHgpIHsKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgYygwLjI1LCAwLjUsIDAuNzUpLCBuYS5ybSA9IFRSVUUpCiAgY29tcGFyaXNvbnMgPC0gc2FwcGx5KHF1YW50aWxlcywgZnVuY3Rpb24oeSkgeSA8PSB4KQogIHJvd1N1bXMoY29tcGFyaXNvbnMpICsgMQp9CgojJyAKIycgCiMnIC0gaXQgc3BsaXRzIGEgdmFyaWFibGUgaW50byBhbiBhcmJpdGFyeSBudW1iZXIgb2YgcmFuZ2VzIHdpdGggZXF1YWwgcHJvcG9ydGlvbnMgKGZvciBleGFtcGxlIGludG8gW2RlY2lsZXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RlY2lsZSkpLgojJyAKIyMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpxdWFydGlsZSA8LSBmdW5jdGlvbih4LCBudGlsZXMpIHsKICBwcm9icyA8LSBzZXEoMCwgMSwgbGVuZ3RoLm91dCA9IG50aWxlcykKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgcHJvYnMgPSBwcm9icywgbmEucm0gPSBUUlVFKQogIGNvbXBhcmlzb25zIDwtIHNhcHBseShxdWFudGlsZXMsIGZ1bmN0aW9uKHkpIHkgPD0geCkKICByb3dTdW1zKGNvbXBhcmlzb25zKSArIDEKfQpkZXYkY291bnRyeVtxdWFydGlsZShkZXYkZ25pLCBudGlsZXMgPSA5KSA9PSAxMF0KCiMnIAojJyAtIGl0IHJldHVybnMgYSBzZW5zaWJsZSBkZWZhdWx0IHdoZW4gYSB2YWx1ZSBvZiB0aGUgdmVjdG9yIGlzIG1pc3NpbmcuIFdoYXQgY291bGQgc3VjaCAic2Vuc2libGUgZGVmYXVsdCIgYmU/IE1ha2UgaXQgdGhlIGRlZmF1bHQgdmFsdWUgd2hlbiBzcGVjaWZ5aW5nIGZ1bmN0aW9uIGFyZ3VtZW50cy4KIycgCiMjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KI0FOU1dFUgpxdWFydGlsZSA8LSBmdW5jdGlvbih4LCBudGlsZXMsIG1pc3NfcmVwbCA9IDApIHsKICBwcm9icyA8LSBzZXEoMCwgMSwgbGVuZ3RoLm91dCA9IG50aWxlcykKICBxdWFudGlsZXMgPC0gcXVhbnRpbGUoeCwgcHJvYnMgPSBwcm9icywgbmEucm0gPSBUUlVFKQogIGNvbXBhcmlzb25zIDwtIHNhcHBseShxdWFudGlsZXMsIGZ1bmN0aW9uKHkpIHkgPD0geCkKICByZXN1bHQgPC0gcm93U3Vtcyhjb21wYXJpc29ucykgKyAxCiAgcmVzdWx0W2lzLm5hKHJlc3VsdCldIDwtIG1pc3NfcmVwbCAjdXNlIG1pc3NfcmVwbCB0byByZXBsYWNlIE5BcwogIHJlc3VsdAp9CmRldiRjb3VudHJ5W3F1YXJ0aWxlKGRldiRnbmksIDksIDEpID09IDFdCgojJyAKIycgLSBUcnkgYXBwbHlpbmcgeW91ciBuZXcgZnVuY3Rpb24gdG8gdGhlIGBkZXZgIGRhdGFzZXQgYW5kIHNwbGl0dGluZyBpdCBpbnRvIHBhcnRzIHVzaW5nIGBzcGxpdGAuIFlvdSBtYXkgdGhlbiBjb21wYXJlIHRoZSBkZXNjcmlwdGl2ZSBzdGF0aXN0aWNzIG9mIGVhY2ggcGFydCB1c2luZyB0aGUgYGxhcHBseWAgZnVuY3Rpb24uCiMnIAojIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiNBTlNXRVIKZGV2X3NwbGl0IDwtIHNwbGl0KGRldiwgcXVhcnRpbGUoZGV2JGduaSwgbnRpbGVzID0gOSwgbWlzc19yZXBsID0gMSkpCmxhcHBseShkZXZfc3BsaXQsIHN1bW1hcnkpCgojJyAKIycgKlRoZSBzb2x1dGlvbnMgZm9yIHRoZSBleGVyY2lzZXMgd2lsbCBiZSBhdmFpbGFibGUgaGVyZSBvbiBgciBjb25maWcka2V5X3Byb2dyYW1taW5nX2NvbmNlcHRzYC4qCiMnIAojJyAKAA==');
        if (!response.ok) throw new Error('Network response failed');
        const blob = await response.blob();
        const blobUrl = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = '05-key_programming_concepts-solutions.R';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.dispatchEvent(new MouseEvent('click'));
        document.body.removeChild(a);
        setTimeout(() =&gt; {
          window.URL.revokeObjectURL(blobUrl);
        }, 100);
        return false;
      } catch (error) {
        console.error('Download failed:', error);
        alert('Download failed. Please try again.');
      }
    }
    downloadFile(event);
  "><i class="fa fa-save"></i> Chapter solutions</button>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="exploratory.html"><span class="header-section-number">4</span> Exploratory Data Analysis</a></div>
<div class="next"><a href="dplyr.html"><span class="header-section-number">6</span> Data Manipulation</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#programming"><span class="header-section-number">5</span> Key Programming Concepts</a></li>
<li>
<a class="nav-link" href="#content-3"><span class="header-section-number">5.1</span> Content</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#control-flow-statements">Control flow statements</a></li>
<li><a class="nav-link" href="#for-loops">For loops</a></li>
<li><a class="nav-link" href="#if-statements">If statements</a></li>
<li><a class="nav-link" href="#functions">Functions</a></li>
<li><a class="nav-link" href="#sapply">Sapply</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#summary-3"><span class="header-section-number">5.2</span> Summary</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#functions-list-3">Functions list</a></li></ul>
</li>
<li><a class="nav-link" href="#exercises-3"><span class="header-section-number">5.3</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><p><img src="images/Crest_white.png" width="75" style="display:block; margin:auto; margin-bottom:3em;"> Analysing Quantitative Data with R <br></p></strong>" was written by </p>
<p><strong>Dr Flo Reiche</strong> <br><strong>Department of Politics and International Studies</strong> <br><strong>University of Warwick</strong></p>. It was last built on 27 July, 2025.
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
